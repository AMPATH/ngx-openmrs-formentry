{"version":3,"file":"ampath-kenya-ngx-openmrs-formentry.umd.js.map","sources":["ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/services/debug-mode.service.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/services/form-errors.service.ts",null,"ng://@ampath-kenya/ngx-openmrs-formentry/change-tracking/control-relation.ts","ng://@ampath-kenya/ngx-openmrs-formentry/change-tracking/control-relations.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/control-hiders-disablers/hider-helpers.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/control-alerts/alert-helpers.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/control-hiders-disablers/disabler-helper.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/form-node.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/validation.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/js-expression-validation.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/conditional-validation.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/control-relations.factory.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/expression-runner/expression-runner.ts","ng://@ampath-kenya/ngx-openmrs-formentry/abstract-controls-extension/afe-form-control.ts","ng://@ampath-kenya/ngx-openmrs-formentry/abstract-controls-extension/afe-form-group.ts","ng://@ampath-kenya/ngx-openmrs-formentry/abstract-controls-extension/afe-form-array.ts","ng://@ampath-kenya/ngx-openmrs-formentry/abstract-controls-extension/afe-control-type.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/question-base.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/conditional-required.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/conditional-answered.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/required.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/date.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/min.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/max.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/min-date.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/max-date.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/future-date-restriction.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/helpers/js-expression-helper.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/validations.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/validators/js-expression.validator.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/utils/messages.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/validation.factory.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/hiders-disablers.factory.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/show-messages.factory.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/form-control.service.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-renderer/form-renderer.component.css.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/data-sources/data-sources.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-renderer/form-renderer.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/error-renderer/error-renderer.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/helpers/historical-field-helper-service.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/directives/historical-value-directive.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/select/select.component.style.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/select/option.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/select/diacritics.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/select/option-list.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/select/select.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/select/select-dropdown.component.style.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/select/select-dropdown.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/select/select.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/file-upload/secure.pipe.ts","ng://@ampath-kenya/ngx-openmrs-formentry/shared.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/file-upload/file-upload.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/file-upload/file-upload.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/date-time-picker/date-picker/date-picker.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/date-time-picker/time-picker/time-picker.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/date-time-picker/picker-modal/modal.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/date-time-picker/pipes/moment.pipe.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/date-time-picker/date-time-picker.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/date-time-picker/date-time-picker.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/ngx-date-time-picker/ngx-date-time-picker.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/ngx-date-time-picker/ngx-date-time-picker.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/select-option.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/afe-ng-select.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/services/form-schema-compiler.service.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/text-input-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/text-area-input-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/select-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/ui-select-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/date-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/multi-select-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/interfaces/nested-questions.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/group-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/repeating-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/checkbox.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/time-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/file-upload-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/test-order-question.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/date-validation.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/max-validation.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/min-validation.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/decimal-point-validation.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/data-sources/dummy-data-source.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/services/historical-encounter-data.service.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/helpers/historical-expression-helper-service.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/question.factory.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/form.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-factory/form.factory.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/value-adapters/obs-adapter-helper.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/value-adapters/obs.adapter.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/value-adapters/order.adapter.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/value-adapters/encounter.adapter.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/value-adapters/person-attribute.adapter.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/remote-select/remote-select.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/remote-select/remote-select.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/appointments-overview/appointments-overview.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/encounter-viewer/encounter-viewer.service.ts","ng://@ampath-kenya/ngx-openmrs-formentry/encounter-viewer/encounter-view/encounter-viewer.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/encounter-viewer/encounter-pdf-viewer.service.ts","ng://@ampath-kenya/ngx-openmrs-formentry/encounter-viewer/encounter-container/encounter-container.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/encounter-viewer/display-controls/question-control.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/encounter-viewer/display-controls/file-preview.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/encounter-viewer/display-controls/remote-answer.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/encounter-viewer/encounter-viewer.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/check-box/checkbox.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/check-box/checkbox.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/ngx-time-picker/ngx-time-picker.component.ts","ng://@ampath-kenya/ngx-openmrs-formentry/components/ngx-time-picker/ngx-time-picker.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/form-entry.module.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/pair.model.ts","ng://@ampath-kenya/ngx-openmrs-formentry/form-entry/question-models/rendering-type.ts","ng://@ampath-kenya/ngx-openmrs-formentry/public_api.ts","ng://@ampath-kenya/ngx-openmrs-formentry/ampath-kenya-ngx-openmrs-formentry.ts"],"sourcesContent":["/*\nThis service checks if the debug mode on ng2-amrs\nhas been enabled by checking cookies.\nIf the debug mode has been enabled then\nit returns true and all fields are displayed\nfor use by testers\n*/\n\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class DebugModeService {\n  public cookieKey = 'formDebug';\n\n  constructor() {}\n  public debugEnabled(): boolean {\n    // check if the hidefield\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { Observable } from 'rxjs';\nimport { AbstractControl } from '@angular/forms';\nimport { AfeFormControl } from '../../public_api';\nimport { AfeFormArray, AfeFormGroup } from '../../abstract-controls-extension';\n\n@Injectable()\nexport class FormErrorsService {\n  // Observable string sources\n  public static control: AfeFormControl | AfeFormArray | AfeFormGroup = null;\n  public static tab: number = null;\n  public announceErrorFieldSource = new Subject<string>();\n  public announceErrorField$: Observable<\n    any\n  > = this.announceErrorFieldSource.asObservable();\n  public announceErrorField(error: string) {\n    this.announceErrorFieldSource.next(error);\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { AbstractControl } from '@angular/forms';\n\n// import { CanHide } from '../form-entry/control-hiders-disablers/can-hide';\n// import { CanDisable } from '../form-entry/control-hiders-disablers/can-disable';\n\nexport class ControlRelation {\n  private _control: AbstractControl;\n  private _relatedTo: AbstractControl;\n  private _lastUpdateValue: any;\n\n  constructor(control: AbstractControl, relatedTo: AbstractControl) {\n    this._control = control;\n    this._relatedTo = relatedTo;\n    this._registerForChangesFromRelatedControl();\n  }\n\n  get control(): AbstractControl {\n    return this._control;\n  }\n\n  get relatedTo(): AbstractControl {\n    return this._relatedTo;\n  }\n\n  get lastUpdateValue(): any {\n    return this._lastUpdateValue;\n  }\n\n  updateControlBasedOnRelation(newValue: any): boolean {\n    if (newValue !== this._lastUpdateValue) {\n      this._lastUpdateValue = newValue;\n\n      if ((this._control as any).updateCalculatedValue) {\n        (this._control as any).updateCalculatedValue();\n      }\n\n      this._control.updateValueAndValidity();\n      if ((this._control as any).updateHiddenState) {\n        (this._control as any).updateHiddenState();\n      }\n\n      if ((this._control as any).updateDisabledState) {\n        (this._control as any).updateDisabledState();\n      }\n\n      if ((this._control as any).updateAlert) {\n        (this._control as any).updateAlert();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  private _registerForChangesFromRelatedControl() {\n    this._relatedTo.valueChanges.subscribe((value) => {\n      this.updateControlBasedOnRelation(value);\n    });\n  }\n}\n","import { AbstractControl } from '@angular/forms';\n\nimport { ControlRelation } from './control-relation';\n\nexport class ControlRelations {\n  private _relationFor: AbstractControl;\n  private _relations: ControlRelation[];\n  private _otherRelations: any = [];\n\n  constructor(\n    relationFor: AbstractControl,\n    relatedTo?: AbstractControl | AbstractControl[]\n  ) {\n    this._relationFor = relationFor;\n    this._relations = [];\n\n    if (relatedTo) {\n      this.addRelatedControls(relatedTo);\n    }\n  }\n\n  get relationsFor(): AbstractControl {\n    return this._relationFor;\n  }\n\n  get relations(): ControlRelation[] {\n    return this._relations;\n  }\n\n  get otherRelations() {\n    return this._otherRelations;\n  }\n\n  addRelatedControls(relatedTo: AbstractControl | AbstractControl[]) {\n    if (relatedTo instanceof AbstractControl) {\n      this.relations.push(new ControlRelation(this._relationFor, relatedTo));\n    }\n\n    if (relatedTo instanceof Array) {\n      for (let i = 0; i < relatedTo.length; i++) {\n        this.relations.push(\n          new ControlRelation(this._relationFor, relatedTo[i])\n        );\n      }\n    }\n  }\n}\n","import { CanHide, Hider } from './can-hide';\nexport class HiderHelper {\n  public hideControl(control: CanHide) {\n    control.hidden = true;\n    if (control.disable) {\n      control.disable();\n    }\n  }\n\n  public showControl(control: CanHide) {\n    control.hidden = false;\n  }\n\n  public setHiderForControl(control: CanHide, hider: Hider) {\n    control.hiders.push(hider);\n  }\n\n  public clearHidersForControl(control: CanHide) {\n    control.hiders.splice(0);\n    control.hidden = false;\n  }\n\n  public evaluateControlHiders(control: CanHide) {\n    let hiddenValue = false;\n    control.hiders.forEach((hider) => {\n      hider.reEvaluateHidingExpression();\n      if (hider.toHide === true) {\n        hiddenValue = true;\n      }\n    });\n\n    control.hidden = hiddenValue;\n    if (control.hidden && control.disable) {\n      control.disable();\n      // control.setValue(null);\n    }\n  }\n\n  public setUpReEvaluationWhenValueChanges(control: CanHide) {\n    if (control.updateHiddenState) {\n      control.valueChanges.subscribe((val) => {\n        control.updateHiddenState();\n      });\n    }\n  }\n}\n","import { CanGenerateAlert, Alert } from './can-generate-alert';\nexport class AlertHelper {\n  public hideAlert(control: Alert) {\n    control.shown = false;\n  }\n\n  public showAlert(control: Alert) {\n    control.shown = true;\n  }\n\n  public setAlertsForControl(control: CanGenerateAlert, alert: Alert) {\n    control.alerts.push(alert);\n  }\n\n  public clearAlertsForControl(control: CanGenerateAlert) {\n    control.alerts.splice(0);\n    control.alert = '';\n  }\n\n  public evaluateControlAlerts(control: CanGenerateAlert) {\n    let messageValue = '';\n    control.alerts.forEach((message) => {\n      message.reEvaluateAlertExpression();\n      if (message.shown === true) {\n        messageValue = message.alertMessage;\n      } else {\n        messageValue = '';\n      }\n    });\n\n    control.alert = messageValue;\n    // if (control.message && control.disable) {\n    //     control.disable();\n    //     // control.setValue(null);\n    // }\n  }\n\n  public setUpReEvaluationWhenValueChanges(control: CanGenerateAlert) {\n    if (control.updateAlert) {\n      control.valueChanges.subscribe((val) => {\n        control.updateAlert();\n      });\n    }\n  }\n}\n","import { CanDisable, Disabler } from './can-disable';\nexport class DisablerHelper {\n  public setDisablerForControl(control: CanDisable, disabler: Disabler) {\n    control.disablers.push(disabler);\n  }\n\n  public clearDisablersForControl(control: CanDisable) {\n    control.disablers.splice(0);\n    control.disable();\n  }\n\n  public evaluateControlDisablers(control: CanDisable) {\n    let toDisable = false;\n    control.disablers.forEach((hider) => {\n      hider.reEvaluateDisablingExpression();\n      if (hider.toDisable === true) {\n        toDisable = true;\n      }\n    });\n\n    // console.log('Control', control);\n\n    if (toDisable) {\n      control.disable();\n    } else {\n      control.enable();\n    }\n  }\n\n  public setUpReEvaluationWhenValueChanges(control: CanDisable) {\n    if (control.updateDisabledState) {\n      control.valueChanges.subscribe((val) => {\n        control.updateDisabledState();\n      });\n    }\n  }\n}\n","import { AbstractControl } from '@angular/forms';\n\nimport { FormFactory } from './form.factory';\nimport { Form } from './form';\n\n// import { AfeControlType, AfeFormArray, AfeFormGroup, AfeFormControl } from '../../abstract-controls-extension';\nimport { QuestionBase, RepeatingQuestion } from '../question-models/models';\nimport {\n  AfeFormControl,\n  AfeFormArray,\n  AfeFormGroup\n} from '../../abstract-controls-extension';\nexport interface ChildNodeCreatedListener {\n  addChildNodeCreatedListener(func: any);\n\n  fireChildNodeCreatedListener(node: GroupNode);\n}\n\nexport type CreateArrayChildNodeFunction = (\n  question: RepeatingQuestion,\n  node: ArrayNode,\n  factory?: FormFactory\n) => GroupNode;\n\nexport interface RemoveArrayChildNodeFunction {\n  (index: number, node: ArrayNode);\n}\n\nexport class NodeBase {\n  public children?: any;\n  private _control: AfeFormControl | AfeFormArray | AfeFormGroup;\n  private _questionModel: QuestionBase;\n  private _form: Form;\n  private _path: string;\n\n  public initialValue: any;\n\n  constructor(\n    question: QuestionBase,\n    control?: AfeFormControl | AfeFormArray | AfeFormGroup,\n    form?: Form,\n    parentPath?: string\n  ) {\n    this._control = control;\n    this._questionModel = question;\n    this._form = form;\n    this._path = parentPath ? parentPath + '.' + question.key : question.key;\n  }\n\n  public get question(): QuestionBase {\n    return this._questionModel;\n  }\n\n  public get control(): AfeFormControl | AfeFormArray | AfeFormGroup {\n    return this._control;\n  }\n\n  public get form(): Form {\n    return this._form;\n  }\n\n  public get path(): string {\n    return this._path;\n  }\n  removeAt(index: number) {}\n\n  createChildNode() {}\n  removeChildNode() {}\n}\n\nexport class LeafNode extends NodeBase {\n  constructor(\n    question: QuestionBase,\n    control?: AfeFormControl | AfeFormArray | AfeFormGroup,\n    parentControl?: AfeFormControl | AfeFormArray | AfeFormGroup,\n    form?: Form,\n    parentPath?: string\n  ) {\n    super(question, control, form, parentPath);\n  }\n}\n\nexport class GroupNode extends NodeBase {\n  private _children: any;\n  constructor(\n    question: QuestionBase,\n    control?: AfeFormControl | AfeFormArray | AfeFormGroup,\n    parentControl?: AfeFormControl | AfeFormArray | AfeFormGroup,\n    form?: Form,\n    parentPath?: string\n  ) {\n    super(question, control, form, parentPath);\n    this._children = {};\n  }\n\n  public get children(): any {\n    return this._children;\n  }\n\n  public setChild(key: string, node: NodeBase) {\n    this.children[key] = node;\n  }\n}\n\nexport class ArrayNode extends NodeBase implements ChildNodeCreatedListener {\n  private childNodeCreatedEvents: any[] = [];\n  private _children: GroupNode[];\n  public createChildFunc: CreateArrayChildNodeFunction;\n  public removeChildFunc: RemoveArrayChildNodeFunction;\n\n  constructor(\n    question: QuestionBase,\n    control?: AfeFormControl | AfeFormArray | AfeFormGroup,\n    parentControl?: AfeFormControl | AfeFormArray | AfeFormGroup,\n    private formFactory?: FormFactory,\n    form?: Form,\n    parentPath?: string\n  ) {\n    super(question, control, form, parentPath);\n    this._children = [];\n    this.childNodeCreatedEvents = [];\n  }\n\n  public get children(): GroupNode[] {\n    return this._children;\n  }\n\n  public createChildNode(): GroupNode {\n    if (this.createChildFunc) {\n      const g: GroupNode = this.createChildFunc(\n        this.question as RepeatingQuestion,\n        this,\n        this.formFactory\n      );\n      this.fireChildNodeCreatedListener(g);\n      return g;\n    }\n    return null;\n  }\n\n  public removeAt(index: number) {\n    const removePrompt = confirm('Are you sure you want to remove?');\n    if (removePrompt) {\n      if (this.removeChildFunc) {\n        this.removeChildFunc(index, this);\n      }\n    }\n  }\n\n  addChildNodeCreatedListener(func: any) {\n    this.childNodeCreatedEvents.push(func);\n  }\n\n  fireChildNodeCreatedListener(node: GroupNode) {\n    for (let i = 0; i < this.childNodeCreatedEvents.length; i++) {\n      const func: any = this.childNodeCreatedEvents[i];\n      func(node);\n    }\n  }\n}\n","export class ValidationModel {\n  type: string;\n\n  message: string;\n\n  constructor(validations: any) {\n    this.type = validations.type;\n    this.message = validations.message || null;\n  }\n}\n","import { ValidationModel } from './validation.model';\n\nexport class JsExpressionValidationModel extends ValidationModel {\n  failsWhenExpression: string;\n\n  constructor(validations: any) {\n    super(validations);\n    this.failsWhenExpression = validations.failsWhenExpression;\n  }\n}\n","import { ValidationModel } from './validation.model';\n\nexport class ConditionalValidationModel extends ValidationModel {\n  referenceQuestionId: string;\n  referenceQuestionAnswers: any;\n\n  constructor(validations: any) {\n    super(validations);\n    this.referenceQuestionId = validations.referenceQuestionId;\n    this.referenceQuestionAnswers = validations.referenceQuestionAnswers;\n  }\n}\n","import { Injectable } from '@angular/core';\n\n// import { ControlRelation } from  '../../change-tracking/control-relation';\nimport { QuestionBase } from '../question-models/question-base';\nimport { JsExpressionValidationModel } from '../question-models/js-expression-validation.model';\nimport { ConditionalValidationModel } from '../question-models/conditional-validation.model';\nimport { NodeBase, GroupNode, LeafNode, ArrayNode } from './form-node';\nimport { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\nimport { AfeFormArray } from '../../abstract-controls-extension/afe-form-array';\nimport { Form } from './form';\n\n@Injectable()\nexport class ControlRelationsFactory {\n  constructor() {}\n\n  buildRelations(rootNode: GroupNode) {\n    const controlsStore: any = this.mapControlIds(rootNode, {});\n\n    for (const key in controlsStore) {\n      if (controlsStore.hasOwnProperty(key)) {\n        const nodeBase: NodeBase = controlsStore[key];\n\n        this.setRelations(controlsStore, nodeBase);\n      }\n    }\n  }\n\n  buildArrayNodeRelations(node: GroupNode) {\n    const form: Form = node.form;\n\n    if (!form) {\n      return;\n    }\n    const rootNode: GroupNode = form.rootNode;\n\n    // build relations for controls in the same array\n    this.buildRelations(node);\n\n    // build relations for control outside the array\n    const rootControlsStore: any = this.mapControlIds(rootNode, {});\n    const arrayControlStore: any = this.mapControlIds(node, {});\n\n    for (const key in rootControlsStore) {\n      if (rootControlsStore.hasOwnProperty(key)) {\n        const child: NodeBase = rootControlsStore[key];\n\n        if (child instanceof LeafNode) {\n          const questionBase: QuestionBase = (child as LeafNode).question;\n\n          if (questionBase.key && questionBase.key.length > 0) {\n            this.setRelations(arrayControlStore, child);\n          }\n        }\n      }\n    }\n\n    // define relations for controls outside the group to controls in this group\n    this.createRelationsToArrayControls(node);\n\n    // fire relations\n    for (const id in arrayControlStore) {\n      if (arrayControlStore.hasOwnProperty(id)) {\n        const child: NodeBase = arrayControlStore[id];\n        const control: AfeFormControl | AfeFormArray = child.control as\n          | AfeFormControl\n          | AfeFormArray;\n        control.updateHiddenState();\n        control.updateAlert();\n      }\n    }\n  }\n\n  createRelationsToArrayControls(node: GroupNode) {\n    const form: Form = node.form;\n\n    const rootNode: GroupNode = form.rootNode;\n\n    // build relations for control outside the array\n    const rootControlsStore: any = this.mapControlIds(rootNode, {});\n    const arrayControlStore: any = this.mapControlIds(node, {});\n\n    // loop through form controls\n    for (const key in rootControlsStore) {\n      if (rootControlsStore.hasOwnProperty(key)) {\n        const rChild: NodeBase = rootControlsStore[key];\n\n        const parentNodePath = node.path.substring(\n          0,\n          node.path.lastIndexOf('.')\n        );\n\n        if (rChild.path.indexOf(parentNodePath + '.') === -1) {\n          // loop through controls in the array group\n          for (const id in arrayControlStore) {\n            if (arrayControlStore.hasOwnProperty(id)) {\n              const aChild: NodeBase = arrayControlStore[id];\n              const aChildId = aChild.question.key;\n              if (this.hasRelation(aChildId, rChild.question)) {\n                const nodes: Array<NodeBase> = node.form.searchNodeByPath(\n                  rootNode,\n                  parentNodePath,\n                  []\n                );\n                if (nodes.length > 0) {\n                  const an = nodes[0] as ArrayNode;\n                  const rootControl = rChild.control as\n                    | AfeFormControl\n                    | AfeFormArray;\n\n                  if (\n                    rootControl.controlRelations.otherRelations.indexOf(an) ===\n                    -1\n                  ) {\n                    rootControl.controlRelations.otherRelations.push(an);\n                  }\n\n                  (aChild.control as\n                    | AfeFormControl\n                    | AfeFormArray).addValueChangeListener((value) => {\n                    if ((rootControl as any).updateCalculatedValue) {\n                      (rootControl as any).updateCalculatedValue();\n                    }\n\n                    rootControl.updateValueAndValidity();\n                    if ((rootControl as any).updateHiddenState) {\n                      (rootControl as any).updateHiddenState();\n                    }\n\n                    if ((rootControl as any).updateAlert) {\n                      (rootControl as any).updateAlert();\n                    }\n\n                    if ((rootControl as any).updateDisabledState) {\n                      (rootControl as any).updateDisabledState();\n                    }\n                  });\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  getRelationsForControl(\n    id,\n    node: GroupNode\n  ): Array<AfeFormControl | AfeFormArray> {\n    const relations: Array<AfeFormControl | AfeFormArray> = new Array<\n      AfeFormControl | AfeFormArray\n    >();\n\n    const nodeBaseArray: Array<NodeBase> = node.form.searchNodeByQuestionId(id);\n\n    if (nodeBaseArray.length > 0) {\n      const nodeBase: NodeBase = nodeBaseArray[0];\n\n      const controlList: any = this.mapControlIds(node, {});\n\n      for (const key in controlList) {\n        if (controlList.hasOwnProperty(key)) {\n          if (\n            this.hasRelation(controlList[key].question.key, nodeBase.question)\n          ) {\n            relations.push(controlList[key].control);\n          }\n        }\n      }\n    }\n    return relations;\n  }\n\n  mapControlIds(node: GroupNode, controlsStore: any) {\n    const children: NodeBase = node.children;\n\n    for (const key in children) {\n      if (children.hasOwnProperty(key)) {\n        const child: NodeBase = children[key];\n\n        if (child instanceof GroupNode) {\n          this.mapControlIds(child, controlsStore);\n        } else if (child instanceof LeafNode) {\n          const questionBase: QuestionBase = (child as LeafNode).question;\n\n          if (questionBase.key && questionBase.key.length > 0) {\n            controlsStore[questionBase.key] = child;\n          }\n        } else if (child instanceof ArrayNode) {\n          const questionBase: QuestionBase = (child as ArrayNode).question;\n\n          if (questionBase.key && questionBase.key.length > 0) {\n            controlsStore[questionBase.key] = child;\n          }\n        }\n      }\n    }\n\n    return controlsStore;\n  }\n\n  setRelations(controlsStore: any, nodeBase: NodeBase) {\n    const questionBase: QuestionBase = nodeBase.question;\n\n    const id = questionBase.key;\n\n    for (const key in controlsStore) {\n      if (controlsStore.hasOwnProperty(key) && key !== id) {\n        const node: NodeBase = controlsStore[key];\n        const question: QuestionBase = node.question;\n\n        if (this.hasRelation(id, question, nodeBase)) {\n          this.addRelationToControl(\n            node.control as AfeFormControl | AfeFormArray,\n            nodeBase.control as AfeFormControl | AfeFormArray\n          );\n        }\n\n        // add conditional required and conditional answered relations\n        if (typeof question.required === 'object') {\n          const required: any = question.required;\n\n          if (required.type === 'conditionalRequired') {\n            if (required.referenceQuestionId === id) {\n              this.addRelationToControl(\n                node.control as AfeFormControl | AfeFormArray,\n                nodeBase.control as AfeFormControl | AfeFormArray\n              );\n            }\n          }\n        }\n      }\n    }\n  }\n\n  hasRelation(id: string, questionBase: QuestionBase, nodeBase?: NodeBase) {\n    let hasRelation = false;\n\n    if (questionBase.validators && questionBase.validators.length > 0) {\n      questionBase.validators.forEach((element) => {\n        if (element instanceof JsExpressionValidationModel) {\n          const model: JsExpressionValidationModel = element as JsExpressionValidationModel;\n\n          const failsWhenExpression: string = model.failsWhenExpression;\n          if (failsWhenExpression && failsWhenExpression.indexOf(id) !== -1) {\n            hasRelation = true;\n          }\n        } else if (\n          element instanceof ConditionalValidationModel &&\n          element.type === 'conditionalAnswered' &&\n          element.referenceQuestionId === id\n        ) {\n          hasRelation = true;\n        }\n      });\n    }\n\n    // add hiders and disablers relations\n    if (!hasRelation) {\n      if (typeof questionBase.hide === 'string') {\n        const hide: string = questionBase.hide as string;\n\n        if (hide.length > 0 && hide.indexOf(id) !== -1) {\n          hasRelation = true;\n        }\n      } else if (typeof questionBase.hide === 'object') {\n        const hideObj: any = questionBase.hide;\n\n        if (hideObj.field === id) {\n          hasRelation = true;\n        }\n      }\n\n      if (questionBase.alert && typeof questionBase.alert === 'object') {\n        hasRelation = true;\n      }\n\n      if (typeof questionBase.disable === 'string') {\n        const disable: string = questionBase.disable as string;\n\n        if (disable.length > 0 && disable.indexOf(id) !== -1) {\n          hasRelation = true;\n        }\n      }\n    }\n\n    // add calculate expressions relations\n    if (\n      !hasRelation &&\n      questionBase.calculateExpression &&\n      questionBase.calculateExpression.length > 0 &&\n      questionBase.calculateExpression.indexOf(id) !== -1\n    ) {\n      hasRelation = true;\n    }\n\n    return hasRelation;\n  }\n\n  addRelationToControl(\n    control: AfeFormControl | AfeFormArray,\n    related: AfeFormControl | AfeFormArray\n  ) {\n    //  let relations = control.controlRelations.relations;\n    //\n    //  let hasRelation = false;\n    //\n    //   relations.forEach(element => {\n    //\n    //     let controlRelation: ControlRelation = element as ControlRelation;\n    //\n    //     let relation: AfeFormControl | AfeFormArray = controlRelation.control as AfeFormControl | AfeFormArray;\n    //\n    //     if ( control.uuid !== undefined && control.uuid === relation.uuid ) {\n    //       hasRelation = true;\n    //     }\n    //   });\n\n    // if ( !hasRelation ) {\n    control.controlRelations.addRelatedControls(related);\n    // }\n  }\n}\n","import { AbstractControl } from '@angular/forms';\nimport {\n  AfeFormControl,\n  AfeFormArray,\n  AfeFormGroup\n} from '../../abstract-controls-extension/control-extensions';\nimport { ArrayNode } from '../form-factory/form-node';\nimport { ControlRelationsFactory } from '../form-factory/control-relations.factory';\nimport { Form } from '../form-factory/form';\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\nexport class ExpressionRunner {\n  getRunnable(\n    expression: string,\n    control: AfeFormArray | AfeFormGroup | AfeFormControl,\n    helper: any,\n    dataDependencies: any,\n    form?: Form\n  ): Runnable {\n    const runner = this;\n    const runnable: Runnable = {\n      run: () => {\n        /* tslint:disable */\n        let scope: any = {};\n        if (control.uuid) {\n          scope[control.uuid] = control.value;\n        }\n        window['moment'] = moment;\n        // scope.moment = moment;\n        scope['myValue'] = control.value;\n        runner.getControlRelationValueString(control, scope);\n        runner.getHelperMethods(helper, scope);\n        runner.getDataDependencies(dataDependencies, scope);\n\n        if (form) {\n          // console.error('Form defined', form);\n          runner.getDataDependencies(\n            form.dataSourcesContainer.dataSources,\n            scope\n          );\n        }\n\n        let paramList = '';\n        let argList = '';\n        for (let o in scope) {\n          paramList = paramList === '' ? paramList + o : paramList + ',' + o;\n          argList =\n            argList === ''\n              ? argList + \"scope['\" + o + \"']\"\n              : argList + \",scope['\" + o + \"']\";\n        }\n\n        // prevent more than one return statements\n        if (expression.indexOf('return') === -1) {\n          expression = '\"return ' + expression + '\"';\n        }\n\n        let funcDeclarationCode =\n          'var afeDynamicFunc = new Function(\"' +\n          paramList +\n          '\", ' +\n          expression +\n          ');';\n        let funcCallCode =\n          'afeDynamicFunc.call(this ' +\n          (argList === '' ? '' : ',' + argList) +\n          ');';\n\n        try {\n          if (Object.keys(scope).indexOf('undefined') >= 0) {\n            console.warn('Missing reference found', expression, scope);\n            return false;\n          }\n          //console.info('results: ', expression, eval(funcDeclarationCode + funcCallCode));\n          return eval(funcDeclarationCode + funcCallCode);\n        } catch (e) {\n          // if (window['error_count']) {\n          //     window['error_count'] = window['error_count'] + 1;\n          // } else {\n          //     window['error_count'] = 1;\n          // }\n          // console.error(window['error_count'] + ' Error running expression:' + expression + '. ',\n          //     e, control, 'Effective Expression', (funcDeclarationCode + funcCallCode));\n          // console.error('Error running expression:' + expression + '. ',\n          //     e, control, 'Effective Expression', (funcDeclarationCode + funcCallCode));\n\n          // Uncomment the line above during debugging\n          // console.error('Error running expression:' + expression, scope);\n\n          return false;\n        }\n        /* tslint:enable */\n      }\n    };\n    return runnable;\n  }\n\n  private getControlRelationValueString(\n    control: AfeFormArray | AfeFormGroup | AfeFormControl,\n    scope: any\n  ) {\n    if (\n      control &&\n      control.controlRelations &&\n      control.controlRelations.relations\n    ) {\n      control.controlRelations.relations.forEach((relation) => {\n        if (relation.relatedTo) {\n          const related = relation.relatedTo as any;\n          const relatedAsControl = relation.relatedTo as AbstractControl;\n          if (relatedAsControl && Array.isArray(relatedAsControl.value)) {\n            scope[related.uuid] = relation.relatedTo.value;\n          } else {\n            scope[related.uuid] =\n              relation.relatedTo.value && relation.relatedTo.value.value\n                ? relation.relatedTo.value.value\n                : relation.relatedTo.value;\n          }\n        }\n      });\n    }\n\n    if (\n      control &&\n      control.controlRelations &&\n      control.controlRelations.otherRelations &&\n      control.controlRelations.otherRelations.length > 0\n    ) {\n      control.controlRelations.otherRelations.forEach((node) => {\n        if (node instanceof ArrayNode) {\n          const arrayNode: ArrayNode = node as ArrayNode;\n          const uuid = control.uuid;\n\n          const controlRelationsFactory: ControlRelationsFactory = new ControlRelationsFactory();\n          let relationsForControl: Array<AfeFormControl | AfeFormArray> = [];\n          // get all related controls\n          arrayNode.children.forEach((child) => {\n            relationsForControl = relationsForControl.concat(\n              controlRelationsFactory.getRelationsForControl(uuid, child)\n            );\n          });\n\n          this.setControlArrayValues(\n            control as AfeFormControl | AfeFormArray,\n            relationsForControl,\n            scope\n          );\n        }\n      });\n    }\n  }\n\n  private setControlArrayValues(\n    control: AfeFormControl | AfeFormArray,\n    relationsForControl: Array<AfeFormControl | AfeFormArray>,\n    scope: any\n  ) {\n    const keys: Array<string> = this._getFormControlKeys(relationsForControl);\n\n    keys.forEach((key) => {\n      const values: any = this._getValuesForKey(key, relationsForControl);\n      scope[key] = values;\n    });\n  }\n\n  private _getFormControlKeys(\n    array: Array<AfeFormControl | AfeFormArray>\n  ): Array<string> {\n    const keys: Array<string> = [];\n    array.forEach((control) => {\n      if (keys.indexOf(control.uuid) === -1) {\n        keys.push(control.uuid);\n      }\n    });\n\n    return keys;\n  }\n\n  private _getValuesForKey(\n    key: string,\n    array: Array<AfeFormControl | AfeFormArray>\n  ): any {\n    const values: any = [];\n\n    array.forEach((control) => {\n      if (control.uuid === key) {\n        values.push(control.value);\n      }\n    });\n\n    return values;\n  }\n\n  private getHelperMethods(obj: any, scope?: any) {\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        scope[key] = obj[key];\n      }\n    }\n  }\n\n  private getDataDependencies(obj: any, scope?: any) {\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        scope[key] = obj[key];\n      }\n    }\n  }\n}\n\nexport interface Runnable {\n  run();\n}\n","import {\n  FormControl,\n  ValidatorFn,\n  AsyncValidatorFn,\n  AbstractControlOptions\n} from '@angular/forms';\n\nimport { ControlRelations } from '../change-tracking/control-relations';\nimport { ValueChangeListener } from './value-change.listener';\nimport {\n  CanHide,\n  Hider\n} from '../form-entry/control-hiders-disablers/can-hide';\nimport {\n  CanDisable,\n  Disabler\n} from '../form-entry/control-hiders-disablers/can-disable';\nimport {\n  CanGenerateAlert,\n  Alert\n} from '../form-entry/control-alerts/can-generate-alert';\nimport { HiderHelper } from '../form-entry/control-hiders-disablers/hider-helpers';\nimport { AlertHelper } from '../form-entry/control-alerts/alert-helpers';\nimport { DisablerHelper } from '../form-entry/control-hiders-disablers/disabler-helper';\nimport { CanCalculate } from '../form-entry/control-calculators/can-calculate';\nimport { ExpressionRunner } from '../form-entry/expression-runner/expression-runner';\n\nclass AfeFormControl\n  extends FormControl\n  implements\n    CanHide,\n    CanDisable,\n    CanCalculate,\n    CanGenerateAlert,\n    ValueChangeListener {\n  private _controlRelations: ControlRelations;\n  private _valueChangeListener: any;\n  private _previousValue;\n  public uuid: string;\n  public pathFromRoot: string;\n\n  hidden = false;\n  hiders: Hider[];\n  alert: string;\n  alerts: Alert[];\n  calculator: Function;\n  disablers: Disabler[];\n\n  private hiderHelper: HiderHelper = new HiderHelper();\n  private disablerHelper: DisablerHelper = new DisablerHelper();\n  private AlertHelper: AlertHelper = new AlertHelper();\n  constructor(\n    formState?: any,\n    validator?: ValidatorFn | ValidatorFn[] | AbstractControlOptions | null,\n    asyncValidator?: AsyncValidatorFn | AsyncValidatorFn[] | null\n  ) {\n    super(formState, validator, asyncValidator);\n    this._controlRelations = new ControlRelations(this);\n    this.hiders = [];\n    this.disablers = [];\n    this.alerts = [];\n\n    this.valueChanges.subscribe((value) => {\n      if (this._previousValue !== value) {\n        this.fireValueChangeListener(value);\n        this._previousValue = value;\n      }\n    });\n  }\n\n  get controlRelations(): ControlRelations {\n    return this._controlRelations;\n  }\n\n  disable(param?: { onlySelf?: boolean; emitEvent?: boolean }) {\n    super.disable(param);\n    super.setValue('');\n  }\n\n  hide() {\n    this.hiderHelper.hideControl(this);\n  }\n\n  show() {\n    this.hiderHelper.showControl(this);\n  }\n\n  setHidingFn(newHider: Hider) {\n    this.hiderHelper.setHiderForControl(this, newHider);\n  }\n\n  setCalculatorFn(newCalculator: Function) {\n    this.calculator = newCalculator;\n  }\n\n  updateCalculatedValue() {\n    if (this.calculator) {\n      const _val = this.calculator.call(ExpressionRunner, {});\n      this.setValue(_val);\n    }\n  }\n\n  clearHidingFns() {\n    this.hiderHelper.clearHidersForControl(this);\n  }\n\n  updateHiddenState() {\n    this.hiderHelper.evaluateControlHiders(this);\n  }\n\n  setDisablingFn(newDisabler: Disabler) {\n    this.disablerHelper.setDisablerForControl(this, newDisabler);\n  }\n\n  clearDisablingFns() {\n    this.disablerHelper.clearDisablersForControl(this);\n  }\n\n  updateDisabledState() {\n    this.disablerHelper.evaluateControlDisablers(this);\n  }\n\n  setAlertFn(newHider: Alert) {\n    this.AlertHelper.setAlertsForControl(this, newHider);\n  }\n\n  clearMessageFns() {\n    this.AlertHelper.clearAlertsForControl(this);\n  }\n\n  updateAlert() {\n    this.AlertHelper.evaluateControlAlerts(this);\n  }\n\n  addValueChangeListener(func: any) {\n    this._valueChangeListener = func;\n  }\n\n  fireValueChangeListener(value: any) {\n    if (\n      this._valueChangeListener &&\n      typeof this._valueChangeListener === 'function'\n    ) {\n      this._valueChangeListener(value);\n    }\n  }\n\n  setValue(value: any) {\n    super.setValue(value);\n  }\n}\nexport { AfeFormControl };\n","import {\n  FormGroup,\n  ValidatorFn,\n  AsyncValidatorFn,\n  AbstractControl\n} from '@angular/forms';\n\nimport { ControlRelations } from '../change-tracking/control-relations';\n\nimport {\n  CanHide,\n  Hider\n} from '../form-entry/control-hiders-disablers/can-hide';\nimport {\n  CanDisable,\n  Disabler\n} from '../form-entry/control-hiders-disablers/can-disable';\nimport {\n  CanGenerateAlert,\n  Alert\n} from '../form-entry/control-alerts/can-generate-alert';\nimport { HiderHelper } from '../form-entry/control-hiders-disablers/hider-helpers';\nimport { DisablerHelper } from '../form-entry/control-hiders-disablers/disabler-helper';\nimport { AlertHelper } from '../form-entry/control-alerts/alert-helpers';\n\nexport class AfeFormGroup\n  extends FormGroup\n  implements CanHide, CanDisable, CanGenerateAlert {\n  private _controlRelations: ControlRelations;\n\n  public uuid: string;\n  public pathFromRoot: string;\n\n  hidden: false;\n  hiders: Hider[];\n  alert: string;\n  alerts: Alert[];\n\n  disablers: Disabler[];\n\n  private hiderHelper: HiderHelper = new HiderHelper();\n  private disablerHelper: DisablerHelper = new DisablerHelper();\n  private AlertHelper: AlertHelper = new AlertHelper();\n\n  constructor(\n    controls: { [key: string]: AbstractControl },\n    validator?: ValidatorFn,\n    asyncValidator?: AsyncValidatorFn\n  ) {\n    super(controls, validator, asyncValidator);\n    this._controlRelations = new ControlRelations(this);\n    this.hiders = [];\n    this.disablers = [];\n    this.alerts = [];\n  }\n\n  get controlRelations(): ControlRelations {\n    return this._controlRelations;\n  }\n\n  hide() {\n    this.hiderHelper.hideControl(this);\n  }\n\n  show() {\n    this.hiderHelper.showControl(this);\n  }\n\n  disable(param?: { onlySelf?: boolean; emitEvent?: boolean }) {\n    super.disable(param);\n    super.setValue({});\n  }\n\n  setHidingFn(newHider: Hider) {\n    this.hiderHelper.setHiderForControl(this, newHider);\n  }\n\n  clearHidingFns() {\n    this.hiderHelper.clearHidersForControl(this);\n  }\n\n  updateHiddenState() {\n    this.hiderHelper.evaluateControlHiders(this);\n  }\n\n  setDisablingFn(newDisabler: Disabler) {\n    this.disablerHelper.setDisablerForControl(this, newDisabler);\n  }\n\n  clearDisablingFns() {\n    this.disablerHelper.clearDisablersForControl(this);\n  }\n\n  updateDisabledState() {\n    this.disablerHelper.evaluateControlDisablers(this);\n  }\n\n  setAlertFn(newHider: Alert) {\n    this.AlertHelper.setAlertsForControl(this, newHider);\n  }\n\n  clearMessageFns() {\n    this.AlertHelper.clearAlertsForControl(this);\n  }\n\n  updateAlert() {\n    this.AlertHelper.evaluateControlAlerts(this);\n  }\n  setValue(value: any) {\n    super.setValue(value);\n  }\n}\n","import {\n  FormArray,\n  ValidatorFn,\n  AsyncValidatorFn,\n  AbstractControl\n} from '@angular/forms';\n\nimport { ControlRelations } from '../change-tracking/control-relations';\nimport { ValueChangeListener } from './value-change.listener';\nimport {\n  CanHide,\n  Hider\n} from '../form-entry/control-hiders-disablers/can-hide';\nimport {\n  CanGenerateAlert,\n  Alert\n} from '../form-entry/control-alerts/can-generate-alert';\nimport {\n  CanDisable,\n  Disabler\n} from '../form-entry/control-hiders-disablers/can-disable';\nimport { HiderHelper } from '../form-entry/control-hiders-disablers/hider-helpers';\nimport { AlertHelper } from '../form-entry/control-alerts/alert-helpers';\nimport { DisablerHelper } from '../form-entry/control-hiders-disablers/disabler-helper';\n\nexport class AfeFormArray\n  extends FormArray\n  implements CanHide, CanDisable, CanGenerateAlert, ValueChangeListener {\n  private _controlRelations: ControlRelations;\n  private _valueChangeListener: any;\n  private _previousValue;\n  private _uuid: string;\n  public pathFromRoot: string;\n\n  hidden: false;\n  hiders: Hider[];\n\n  alert: string;\n  alerts: Alert[];\n\n  disablers: Disabler[];\n\n  private hiderHelper: HiderHelper = new HiderHelper();\n  private AlertHelper: AlertHelper = new AlertHelper();\n  private disablerHelper: DisablerHelper = new DisablerHelper();\n\n  constructor(\n    controls: AbstractControl[],\n    validator?: ValidatorFn,\n    asyncValidator?: AsyncValidatorFn\n  ) {\n    super(controls, validator, asyncValidator);\n    this._controlRelations = new ControlRelations(this);\n    this.hiders = [];\n    this.alerts = [];\n    this.disablers = [];\n\n    this.valueChanges.subscribe((value) => {\n      if (this._previousValue !== value) {\n        this.fireValueChangeListener(value);\n        this._previousValue = value;\n      }\n    });\n  }\n\n  get uuid(): string {\n    return this._uuid;\n  }\n  set uuid(val: string) {\n    this._uuid = val;\n  }\n\n  get controlRelations(): ControlRelations {\n    return this._controlRelations;\n  }\n\n  hide() {\n    this.hiderHelper.hideControl(this);\n  }\n\n  show() {\n    this.hiderHelper.showControl(this);\n  }\n\n  disable(param?: { onlySelf?: boolean; emitEvent?: boolean }) {\n    super.disable(param);\n    super.setValue([]);\n  }\n\n  setHidingFn(newHider: Hider) {\n    this.hiderHelper.setHiderForControl(this, newHider);\n  }\n\n  clearHidingFns() {\n    this.hiderHelper.clearHidersForControl(this);\n  }\n\n  updateHiddenState() {\n    this.hiderHelper.evaluateControlHiders(this);\n  }\n\n  setDisablingFn(newDisabler: Disabler) {\n    this.disablerHelper.setDisablerForControl(this, newDisabler);\n  }\n\n  clearDisablingFns() {\n    this.disablerHelper.clearDisablersForControl(this);\n  }\n\n  updateDisabledState() {\n    this.disablerHelper.evaluateControlDisablers(this);\n  }\n\n  setAlertFn(newHider: Alert) {\n    this.AlertHelper.setAlertsForControl(this, newHider);\n  }\n\n  clearMessageFns() {\n    this.AlertHelper.clearAlertsForControl(this);\n  }\n\n  updateAlert() {\n    this.AlertHelper.evaluateControlAlerts(this);\n  }\n\n  addValueChangeListener(func: any) {\n    this._valueChangeListener = func;\n  }\n\n  fireValueChangeListener(value: any) {\n    if (this.alerts.length > 0) {\n      this.updateAlert();\n    }\n    if (\n      this._valueChangeListener &&\n      typeof this._valueChangeListener === 'function'\n    ) {\n      this._valueChangeListener(value);\n    }\n  }\n\n  setValue(value: any) {\n    super.setValue(value);\n  }\n}\n","export enum AfeControlType {\n  AfeFormControl,\n  AfeFormArray,\n  AfeFormGroup,\n  None\n}\n","import { BaseOptions } from './interfaces/base-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\nimport { ValidationModel } from './validation.model';\n\nexport class QuestionBase implements BaseOptions {\n  type: string;\n  order?: number;\n  questionOptions?: any;\n  questions?: any;\n  placeholder?: any;\n  hidden?: any;\n  showTime?: any;\n  showWeek?: any;\n  showDate?: boolean;\n  historicalDisplay?: any;\n  rows?: any;\n  showWeeksAdder?: any;\n  key: string;\n  alert?: any;\n\n  label?: string;\n  renderingType: string;\n\n  defaultValue?: any;\n  originalValue?: any;\n  enableHistoricalValue?: boolean;\n  showHistoricalValueDate?: boolean;\n  historicalDataValue?: any;\n  extras?: any;\n  dataSource?: string;\n  dataSourceOptions?: any;\n\n  controlType?: AfeControlType;\n  validators?: Array<ValidationModel>;\n  required?: boolean;\n  hide?: string | boolean;\n  disable?: string | boolean;\n  calculateExpression?: string;\n  options?: any;\n  maxTime?: string;\n  minTime?: string;\n\n  constructor(options: BaseOptions) {\n    this.defaultValue = options.defaultValue;\n    this.originalValue = options.originalValue;\n    this.extras = options.extras;\n    this.renderingType = options.type;\n    this.key = options.key || '';\n    this.label = options.label || '';\n    this.validators = options.validators || [];\n    this.required = options.required;\n    this.hide = options.hide;\n    this.disable = options.disable;\n    this.alert = options.alert;\n    this.historicalDataValue = options.historicalDataValue;\n    this.calculateExpression = options.calculateExpression;\n  }\n\n  setHistoricalValue(v: boolean) {\n    this.enableHistoricalValue = v;\n  }\n  showHistoricalEncounterDate(v?: boolean) {\n    this.showHistoricalValueDate = v === undefined ? true : v;\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\nimport { ConditionalValidationModel } from '../question-models/conditional-validation.model';\n\nexport class ConditionalRequiredValidator {\n  constructor() {}\n\n  validate(model: ConditionalValidationModel) {\n    // convert helper functions to string\n    return (control: AfeFormControl): { [key: string]: any } => {\n      const value = control.value;\n      let relationValue = null;\n      const referenceQuestionId: string = model.referenceQuestionId;\n      const referenceQuestionAnswers: any = model.referenceQuestionAnswers;\n      let isRequired: boolean;\n\n      if (\n        control &&\n        control.controlRelations &&\n        control.controlRelations.relations\n      ) {\n        control.controlRelations.relations.forEach((relation) => {\n          const relatedAsControl = relation.relatedTo as any;\n          if (relatedAsControl.uuid === referenceQuestionId) {\n            if (relatedAsControl && Array.isArray(relatedAsControl.value)) {\n              relationValue = relation.relatedTo.value;\n            } else {\n              relationValue =\n                relation.relatedTo.value && relation.relatedTo.value.value\n                  ? relation.relatedTo.value.value\n                  : relation.relatedTo.value;\n            }\n          }\n        });\n      }\n\n      if (\n        typeof referenceQuestionAnswers === 'object' &&\n        referenceQuestionAnswers.indexOf(relationValue) !== -1\n      ) {\n        isRequired = true;\n      }\n\n      if (isRequired && !value) {\n        return { conditional_required: { message: model.message } };\n      }\n\n      return null;\n    };\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\nimport { ConditionalValidationModel } from '../question-models/conditional-validation.model';\n\nexport class ConditionalAnsweredValidator {\n  constructor() {}\n\n  validate(model: ConditionalValidationModel) {\n    return (control: AfeFormControl): { [key: string]: any } => {\n      const value = control.value;\n      let relationValue = null;\n      const referenceQuestionId: string = model.referenceQuestionId;\n      const referenceQuestionAnswers: any = model.referenceQuestionAnswers;\n      let successCondition: any = true;\n\n      if (value) {\n        if (\n          control &&\n          control.controlRelations &&\n          control.controlRelations.relations\n        ) {\n          control.controlRelations.relations.forEach((relation) => {\n            const relatedAsControl = relation.relatedTo as any;\n            if (relatedAsControl.uuid === referenceQuestionId) {\n              if (Array.isArray(relatedAsControl.value)) {\n                relationValue = relatedAsControl.value;\n              } else {\n                relationValue =\n                  relatedAsControl.value &&\n                  typeof relatedAsControl.value === 'object' &&\n                  relatedAsControl.value.value\n                    ? relatedAsControl.value.value\n                    : relatedAsControl.value;\n              }\n            }\n\n            if (!relationValue) {\n              successCondition = false;\n            } else if (\n              typeof referenceQuestionAnswers === 'object' &&\n              referenceQuestionAnswers.indexOf(relationValue) === -1\n            ) {\n              successCondition = false;\n            }\n          });\n        }\n      }\n\n      if (!successCondition) {\n        return { conditional_answered: { message: model.message } };\n      }\n\n      return null;\n    };\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\n\nexport class RequiredValidator {\n  validate(control: AfeFormControl) {\n    if (control.hidden) {\n      return null;\n    }\n\n    const value: any = control.value;\n    const isEmpty: boolean =\n      value == null || (typeof value === 'string' && value.length === 0);\n\n    return isEmpty ? { required: true } : null;\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\n\nexport class DateValidator {\n  constructor() {}\n\n  validate(control: AfeFormControl) {\n    if (control.hidden) {\n      return null;\n    }\n\n    const value = control.value;\n\n    if (value && value.length !== 0) {\n      // YYYY-MM-DD or DD-MM-YYYY\n      const test: boolean = !/Invalid|NaN/.test(new Date(value).toString());\n\n      return test ? null : { date: true };\n    } else {\n      return null;\n    }\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\n\nexport class MinValidator {\n  validate(min: number) {\n    return (control: AfeFormControl): { [key: string]: any } => {\n      if (control.hidden) {\n        return null;\n      }\n      if (control.value && control.value.length !== 0) {\n        const v: number = control.value;\n        return v >= min\n          ? null\n          : { min: { requiredValue: min, actualValue: v } };\n      }\n\n      return null;\n    };\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\n\nexport class MaxValidator {\n  validate(max: number) {\n    return (control: AfeFormControl): { [key: string]: any } => {\n      if (control.hidden) {\n        return null;\n      }\n\n      if (control.value && control.value.length !== 0) {\n        const v: number = control.value;\n        return v <= max\n          ? null\n          : { max: { requiredValue: max, actualValue: v } };\n      }\n\n      return null;\n    };\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\nimport { DateValidator } from './date.validator';\n\nexport class MinDateValidator {\n  validate(min: Date) {\n    return (control: AfeFormControl): { [key: string]: any } => {\n      if (control.hidden) {\n        return null;\n      }\n\n      if (control.value && control.value.length !== 0) {\n        if (!new DateValidator().validate(control.value)) {\n          const newDate: Date = new Date(control.value);\n\n          return newDate.getTime() < min.getTime()\n            ? { mindate: { requiredDate: min, actualDate: newDate } }\n            : null;\n        } else {\n          return { mindate: { requiredDate: min } };\n        }\n      }\n\n      return null;\n    };\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\nimport { DateValidator } from './date.validator';\n\nexport class MaxDateValidator {\n  validate(max: Date) {\n    return (control: AfeFormControl): { [key: string]: any } => {\n      if (control.hidden) {\n        return null;\n      }\n\n      if (control.value && control.value.length !== 0) {\n        if (!new DateValidator().validate(control.value)) {\n          const newDate: Date = new Date(control.value);\n\n          return newDate.getTime() > max.getTime()\n            ? { maxdate: { requiredDate: max, actualDate: newDate } }\n            : null;\n        } else {\n          return { maxdate: { requiredDate: max } };\n        }\n      }\n\n      return null;\n    };\n  }\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\nimport { DateValidator } from './date.validator';\n\nexport class FutureDateRestrictionValidator {\n  constructor() {}\n\n  validate(control: AfeFormControl) {\n    if (control.hidden) {\n      return null;\n    }\n\n    const value = control.value;\n    const now: Date = new Date();\n\n    if (value && value.length !== 0) {\n      if (!new DateValidator().validate(value)) {\n        const d: Date = new Date(value);\n\n        return d.getTime() > now.getTime()\n          ? { futureDateRestriction: true }\n          : null;\n      }\n    }\n\n    return null;\n  }\n}\n","import * as _ from 'lodash';\nexport class JsExpressionHelper {\n  calcBMI(height, weight) {\n    let r;\n    if (height && weight) {\n      r = (weight / (((height / 100) * height) / 100)).toFixed(1);\n    }\n    return height && weight ? parseFloat(r) : null;\n  }\n\n  calcBSA(height: number, weight: number) {\n    let result;\n    if (height && weight) {\n      result = Math.sqrt((height * weight) / 3600).toFixed(2);\n    }\n    return height && weight ? parseFloat(result) : null;\n  }\n\n  calcBMIForAgeZscore(bmiForAgeRef, height, weight) {\n    let bmi;\n    const maxAgeInDays = 1856;\n    if (height && weight) {\n      bmi = (weight / (((height / 100) * height) / 100)).toFixed(1);\n    }\n    const refSectionObject = _.first(bmiForAgeRef);\n    let formattedSDValue;\n    if (refSectionObject) {\n      const refObjectValues = Object.keys(refSectionObject)\n        .map((key) => refSectionObject[key])\n        .map((x) => x);\n      const refObjectKeys = Object.keys(refSectionObject);\n      const minimumValue = refObjectValues[1];\n      const minReferencePoint = [];\n      if (bmi < minimumValue) {\n        minReferencePoint.push(minimumValue);\n      } else {\n        _.forEach(refObjectValues, (value) => {\n          if (value <= bmi) {\n            minReferencePoint.push(value);\n          }\n        });\n      }\n      const lastReferenceValue = _.last(minReferencePoint);\n      const lastValueIndex = _.findIndex(refObjectValues, (o) => {\n        return o === lastReferenceValue;\n      });\n      const SDValue = refObjectKeys[lastValueIndex];\n      formattedSDValue = SDValue.replace('SD', '');\n      if (formattedSDValue.includes('neg')) {\n        formattedSDValue = formattedSDValue.substring(1, 0);\n        formattedSDValue = '-' + formattedSDValue;\n      }\n\n      if (\n        formattedSDValue === 'S' ||\n        formattedSDValue === 'L' ||\n        formattedSDValue === 'M' ||\n        formattedSDValue === '-5'\n      ) {\n        formattedSDValue = '-4';\n      }\n    }\n\n    return bmi && refSectionObject ? formattedSDValue : null;\n  }\n  calcWeightForHeightZscore(weightForHeightRef, height, weight) {\n    let refSection;\n    let formattedSDValue;\n    if (height && weight) {\n      height = parseFloat(height).toFixed(1);\n    }\n    const standardHeightMin = 45;\n    const standardMaxHeight = 110;\n    if (height < standardHeightMin || height > standardMaxHeight) {\n      formattedSDValue = -4;\n    } else {\n      refSection = _.filter(weightForHeightRef, (refObject) => {\n        return parseFloat(refObject['Length']).toFixed(1) === height;\n      });\n    }\n\n    const refSectionObject = _.first(refSection);\n    if (refSectionObject) {\n      const refObjectValues = Object.keys(refSectionObject)\n        .map((key) => refSectionObject[key])\n        .map((x) => x);\n      const refObjectKeys = Object.keys(refSectionObject);\n      const minimumValue = refObjectValues[1];\n      const minReferencePoint = [];\n      if (weight < minimumValue) {\n        minReferencePoint.push(minimumValue);\n      } else {\n        _.forEach(refObjectValues, (value) => {\n          if (value <= weight) {\n            minReferencePoint.push(value);\n          }\n        });\n      }\n      const lastReferenceValue = _.last(minReferencePoint);\n      const lastValueIndex = _.findIndex(refObjectValues, (o) => {\n        return o === lastReferenceValue;\n      });\n      const SDValue = refObjectKeys[lastValueIndex];\n      formattedSDValue = SDValue.replace('SD', '');\n      if (formattedSDValue.includes('neg')) {\n        formattedSDValue = formattedSDValue.substring(1, 0);\n        formattedSDValue = '-' + formattedSDValue;\n      }\n      if (\n        formattedSDValue === 'S' ||\n        formattedSDValue === 'L' ||\n        formattedSDValue === 'M' ||\n        formattedSDValue === '-5'\n      ) {\n        formattedSDValue = '-4';\n      }\n    }\n\n    return height && weight ? formattedSDValue : null;\n  }\n\n  calcHeightForAgeZscore(heightForAgeRef, height, weight) {\n    const refSectionObject = _.first(heightForAgeRef);\n    let formattedSDValue;\n    if (refSectionObject) {\n      const refObjectValues = Object.keys(refSectionObject)\n        .map((key) => refSectionObject[key])\n        .map((x) => x);\n      const refObjectKeys = Object.keys(refSectionObject);\n      const minimumValue = refObjectValues[1];\n      const minReferencePoint = [];\n      if (height < minimumValue) {\n        minReferencePoint.push(minimumValue);\n      } else {\n        _.forEach(refObjectValues, (value) => {\n          if (value <= height) {\n            minReferencePoint.push(value);\n          }\n        });\n      }\n      const lastReferenceValue = _.last(minReferencePoint);\n      const lastValueIndex = _.findIndex(refObjectValues, (o) => {\n        return o === lastReferenceValue;\n      });\n      const SDValue = refObjectKeys[lastValueIndex];\n      formattedSDValue = SDValue.replace('SD', '');\n      if (formattedSDValue.includes('neg')) {\n        formattedSDValue = formattedSDValue.substring(1, 0);\n        formattedSDValue = '-' + formattedSDValue;\n      }\n\n      if (\n        formattedSDValue === 'S' ||\n        formattedSDValue === 'L' ||\n        formattedSDValue === 'M' ||\n        formattedSDValue === '-5'\n      ) {\n        formattedSDValue = '-4';\n      }\n    }\n\n    return height && weight && refSectionObject ? formattedSDValue : null;\n  }\n\n  isEmpty(val) {\n    if (\n      val === undefined ||\n      val === null ||\n      val === '' ||\n      val === 'null' ||\n      val === 'undefined'\n    ) {\n      return true;\n    }\n\n    if (Array.isArray(val) && val.length === 0) {\n      return true;\n    }\n    return false;\n  }\n\n  arrayContains(array, members) {\n    if (Array.isArray(members)) {\n      if (members.length === 0) {\n        return true;\n      }\n\n      let contains = true;\n\n      for (let i = 0; i < members.length; i++) {\n        const val = members[i];\n        if (array.indexOf(val) === -1) {\n          contains = false;\n        }\n      }\n\n      return contains;\n    } else {\n      return array.indexOf(members) !== -1;\n    }\n  }\n  extractRepeatingGroupValues(key, array) {\n    const values = array.map(function (item) {\n      return item[key];\n    });\n    return values;\n  }\n  formatDate(value, format, offset) {\n    format = format || 'yyyy-MM-dd';\n    offset = offset || '+0300';\n\n    if (!(value instanceof Date)) {\n      value = new Date(value);\n      if (value === null || value === undefined) {\n        throw new Error(\n          'DateFormatException: value passed ' + 'is not a valid date'\n        );\n      }\n    }\n\n    return value; // TODO implement this\n    // return $filter('date')(value, format, offset);\n  }\n\n  arrayContainsAny(array, members) {\n    if (Array.isArray(members)) {\n      if (members.length === 0) {\n        return true;\n      }\n      let contains = false;\n\n      for (let i = 0; i < members.length; i++) {\n        const val = members[i];\n        if (array.indexOf(val) !== -1) {\n          contains = true;\n        }\n      }\n      return contains;\n    } else {\n      return array.indexOf(members) !== -1;\n    }\n  }\n\n  get helperFunctions() {\n    const helper = this;\n    return {\n      arrayContainsAny: helper.arrayContainsAny,\n      calcBMI: helper.calcBMI,\n      calcBMIForAgeZscore: helper.calcBMIForAgeZscore,\n      calcWeightForHeightZscore: helper.calcWeightForHeightZscore,\n      calcHeightForAgeZscore: helper.calcHeightForAgeZscore,\n      isEmpty: helper.isEmpty,\n      arrayContains: helper.arrayContains,\n      extractRepeatingGroupValues: helper.extractRepeatingGroupValues\n    };\n  }\n}\n","export class Validations {\n  public static JSExpressionValidatorsEnabled = false;\n\n  constructor() {}\n}\n","import { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\nimport { ExpressionRunner } from '../expression-runner/expression-runner';\nimport { JsExpressionHelper } from '../helpers/js-expression-helper';\nimport { JsExpressionValidationModel } from '../question-models/js-expression-validation.model';\nimport { Validations } from './validations';\n\nexport class JsExpressionValidator {\n  constructor() {}\n\n  validate(model: JsExpressionValidationModel, form?: any) {\n    // convert helper functions to string\n    return (control: AfeFormControl): { [key: string]: any } => {\n      if (!Validations.JSExpressionValidatorsEnabled) {\n        return null;\n      }\n\n      const expression = model.failsWhenExpression;\n      const helper = new JsExpressionHelper();\n      const dataDependencies = {};\n\n      const helperFunctions = helper.helperFunctions;\n      const runnable = new ExpressionRunner().getRunnable(\n        expression,\n        control,\n        helperFunctions,\n        dataDependencies,\n        form\n      );\n\n      if (runnable.run()) {\n        return {\n          js_expression: { expression: expression, message: model.message }\n        };\n      }\n\n      return null;\n    };\n  }\n}\n","export class Messages {\n  public static readonly REQUIRED_FIELD_MSG = 'This field is required!';\n\n  public static readonly INVALID_DATE_MSG = 'Provided date is invalid!';\n\n  public static readonly FUTURE_DATE_RESTRICTION_MSG =\n    'Future date is not allowed!';\n\n  public static readonly MIN_LENGTH_MSG = 'Min Length should be {minLength}';\n\n  public static readonly MAX_LENGTH_MSG = 'Max Length should be {maxLength}';\n\n  public static readonly MAX_DATE_MSG = 'Max Date should be {maxDate}';\n\n  public static readonly MIN_DATE_MSG = 'Min Date should be {minDate}';\n\n  public static readonly MAX_MSG = 'Max value should be {max}';\n\n  public static readonly MIN_MSG = 'Min value should be {min}';\n}\n","import { Injectable } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport * as _ from 'lodash';\n\nimport { ConditionalRequiredValidator } from '../validators/conditional-required.validator';\nimport { ConditionalAnsweredValidator } from '../validators/conditional-answered.validator';\nimport { RequiredValidator } from '../validators/required.validator';\nimport { DateValidator } from '../validators/date.validator';\nimport { MinValidator } from '../validators/min.validator';\nimport { MaxValidator } from '../validators/max.validator';\nimport { MinDateValidator } from '../validators/min-date.validator';\nimport { MaxDateValidator } from '../validators/max-date.validator';\nimport { FutureDateRestrictionValidator } from '../validators/future-date-restriction.validator';\nimport { JsExpressionValidator } from '../validators/js-expression.validator';\nimport { QuestionBase } from '../question-models/question-base';\nimport { Messages } from '../utils/messages';\nimport { ValidationModel } from '../question-models/validation.model';\nimport { DateValidationModel } from '../question-models/date-validation.model';\nimport { MaxValidationModel } from '../question-models/max-validation.model';\nimport { MinValidationModel } from '../question-models/min-validation.model';\nimport { JsExpressionValidationModel } from '../question-models/js-expression-validation.model';\nimport { ConditionalValidationModel } from '../question-models/conditional-validation.model';\n\n@Injectable()\nexport class ValidationFactory {\n  constructor() {}\n\n  getValidators(question: QuestionBase, form?: any) {\n    const list: Array<any> = [];\n\n    if (question.validators) {\n      _.forEach(question.validators, (validator: ValidationModel) => {\n        switch (validator.type) {\n          case 'date':\n            list.push(this.dateValidator);\n            const allowFutureDates: boolean = (<DateValidationModel>validator)\n              .allowFutureDates;\n\n            if (!allowFutureDates) {\n              list.push(this.futureDateRestrictionValidator);\n            }\n            break;\n          case 'js_expression':\n            list.push(\n              this.jsExpressionValidator.validate(\n                <JsExpressionValidationModel>validator,\n                form\n              )\n            );\n            break;\n          case 'max':\n            list.push(\n              this.getMaxValueValidator((<MaxValidationModel>validator).max)\n            );\n            break;\n          case 'min':\n            list.push(\n              this.getMinValueValidator((<MinValidationModel>validator).min)\n            );\n            break;\n          case 'conditionalRequired':\n            list.push(\n              this.conditionalRequiredValidator.validate(\n                <ConditionalValidationModel>validator\n              )\n            );\n            break;\n          case 'conditionalAnswered':\n            list.push(\n              this.conditionalAnsweredValidator.validate(\n                <ConditionalValidationModel>validator\n              )\n            );\n            break;\n        }\n      });\n    }\n\n    if (\n      question.required &&\n      typeof question.required === 'string' &&\n      question.required === 'true'\n    ) {\n      list.push(this.requiredValidator);\n    } else {\n      // TODO - handle custom required validator\n    }\n\n    return list;\n  }\n\n  get conditionalRequiredValidator(): ConditionalRequiredValidator {\n    return new ConditionalRequiredValidator();\n  }\n\n  get conditionalAnsweredValidator(): ConditionalAnsweredValidator {\n    return new ConditionalAnsweredValidator();\n  }\n\n  get requiredValidator(): any {\n    return new RequiredValidator().validate;\n  }\n\n  get dateValidator(): any {\n    return new DateValidator().validate;\n  }\n\n  get futureDateRestrictionValidator(): any {\n    return new FutureDateRestrictionValidator().validate;\n  }\n\n  get maxDateValidator(): any {\n    return new MaxDateValidator().validate;\n  }\n\n  get minDateValidator(): any {\n    return new MinDateValidator().validate;\n  }\n\n  get minLengthValidator(): any {\n    return Validators.minLength;\n  }\n\n  get maxLengthValidator() {\n    return Validators.maxLength;\n  }\n\n  public getMinValueValidator(min: number): any {\n    return new MinValidator().validate(min);\n  }\n\n  public getMaxValueValidator(max: number): any {\n    return new MaxValidator().validate(max);\n  }\n\n  get jsExpressionValidator() {\n    return new JsExpressionValidator();\n  }\n\n  public errors(errors: any, question: QuestionBase): Array<string> {\n    const messages: Array<string> = [];\n\n    for (const property in errors) {\n      if (errors.hasOwnProperty(property)) {\n        switch (property) {\n          case 'required':\n            messages.push(Messages.REQUIRED_FIELD_MSG);\n            break;\n          case 'date':\n            messages.push(Messages.INVALID_DATE_MSG);\n            break;\n          case 'futureDateRestriction':\n            messages.push(Messages.FUTURE_DATE_RESTRICTION_MSG);\n            break;\n          case 'minlength':\n            messages.push(\n              Messages.MIN_LENGTH_MSG.replace(\n                '{minLength}',\n                errors.minlength.requiredLength\n              )\n            );\n            break;\n          case 'maxlength':\n            messages.push(\n              Messages.MIN_LENGTH_MSG.replace(\n                '{maxLength}',\n                errors.maxlength.requiredLength\n              )\n            );\n            break;\n          case 'maxdate':\n            messages.push(\n              Messages.MAX_DATE_MSG.replace(\n                '{maxDate}',\n                errors.maxdate.requiredDate\n              )\n            );\n            break;\n          case 'mindate':\n            messages.push(\n              Messages.MIN_DATE_MSG.replace(\n                '{minDate}',\n                errors.mindate.requiredDate\n              )\n            );\n            break;\n          case 'max':\n            messages.push(\n              Messages.MAX_MSG.replace('{max}', errors.max.requiredValue)\n            );\n            break;\n          case 'min':\n            messages.push(\n              Messages.MIN_MSG.replace('{min}', errors.min.requiredValue)\n            );\n            break;\n          case 'js_expression':\n            messages.push(errors['js_expression'].message);\n            break;\n          case 'conditional_required':\n            messages.push(errors['conditional_required'].message);\n            break;\n          case 'conditional_answered':\n            messages.push(errors['conditional_answered'].message);\n            break;\n        }\n      }\n    }\n\n    return messages;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Disabler } from '../control-hiders-disablers/can-disable';\nimport { Hider } from '../control-hiders-disablers/can-hide';\n\nimport {\n  ExpressionRunner,\n  Runnable\n} from '../expression-runner/expression-runner';\nimport {\n  AfeFormControl,\n  AfeFormArray,\n  AfeFormGroup\n} from '../../abstract-controls-extension';\nimport { QuestionBase } from '../question-models/question-base';\nimport { JsExpressionHelper } from '../helpers/js-expression-helper';\nimport { Form } from './form';\n// Add ability to display all fields for debugging\nimport { DebugModeService } from './../services/debug-mode.service';\n\n@Injectable()\nexport class HidersDisablersFactory {\n  constructor(\n    private expressionRunner: ExpressionRunner,\n    private expressionHelper: JsExpressionHelper,\n    private _debugModeService: DebugModeService\n  ) {}\n\n  getJsExpressionDisabler(\n    question: QuestionBase,\n    control: AfeFormControl | AfeFormArray | AfeFormGroup,\n    form?: Form\n  ): Disabler {\n    const runnable: Runnable = this.expressionRunner.getRunnable(\n      question.disable as string,\n      control,\n      this.expressionHelper.helperFunctions,\n      {},\n      form\n    );\n    const disabler: Disabler = {\n      toDisable: false,\n      disableWhenExpression: question.disable as string,\n      reEvaluateDisablingExpression: () => {\n        const result = runnable.run();\n        disabler.toDisable = result;\n      }\n    };\n    return disabler;\n  }\n\n  getJsExpressionHider(\n    question: QuestionBase,\n    control: AfeFormControl | AfeFormArray | AfeFormGroup,\n    form?: Form\n  ): Hider {\n    const hide: any = question.hide;\n    const value: string =\n      typeof hide === 'object'\n        ? this.convertHideObjectToString(hide)\n        : (question.hide as string);\n\n    // check if debugging has been enabled\n\n    const debugEnabled = this._debugModeService.debugEnabled();\n\n    const runnable: Runnable = this.expressionRunner.getRunnable(\n      value,\n      control,\n      this.expressionHelper.helperFunctions,\n      {},\n      form\n    );\n\n    const hider: Hider = {\n      toHide: false,\n      hideWhenExpression: value,\n      reEvaluateHidingExpression: () => {\n        /* if debug is enabled then hiders to be false\n                 else run the normal eveluator i.e runnable.run()\n                 */\n        if (debugEnabled === true) {\n          hider.toHide = false;\n        } else {\n          hider.toHide = runnable.run();\n        }\n      }\n    };\n    return hider;\n  }\n\n  convertHideObjectToString(hide: any) {\n    if (hide.value instanceof Array) {\n      const arrayStr: string = \"'\" + hide.value.join(\"','\") + \"'\";\n      const exp = '!arrayContains([' + arrayStr + '],' + hide.field + ')';\n      return exp;\n    }\n\n    return '';\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Alert } from '../control-alerts/can-generate-alert';\n\nimport {\n  ExpressionRunner,\n  Runnable\n} from '../expression-runner/expression-runner';\nimport {\n  AfeFormControl,\n  AfeFormArray,\n  AfeFormGroup\n} from '../../abstract-controls-extension';\nimport { QuestionBase } from '../question-models/question-base';\nimport { JsExpressionHelper } from '../helpers/js-expression-helper';\nimport { Form } from './form';\n\n@Injectable()\nexport class AlertsFactory {\n  constructor(\n    private expressionRunner: ExpressionRunner,\n    private expressionHelper: JsExpressionHelper\n  ) {}\n  getJsExpressionshowAlert(\n    question: QuestionBase,\n    control: AfeFormControl | AfeFormArray | AfeFormGroup,\n    form?: Form\n  ): Alert {\n    const runnable: Runnable = this.expressionRunner.getRunnable(\n      question.alert.alertWhenExpression,\n      control,\n      this.expressionHelper.helperFunctions,\n      {},\n      form\n    );\n    const showAlert: Alert = {\n      shown: false,\n      alertWhenExpression: question.alert.alertWhenExpression,\n      alertMessage: question.alert.message,\n      reEvaluateAlertExpression: () => {\n        const result = runnable.run();\n        showAlert.shown = result;\n      }\n    };\n    return showAlert;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AbstractControl } from '@angular/forms';\n\nimport {\n  AfeFormControl,\n  AfeFormArray,\n  AfeFormGroup,\n  AfeControlType\n} from '../../abstract-controls-extension';\n\nimport { NestedQuestion } from '../question-models/interfaces/nested-questions';\n\nimport { QuestionBase } from '../question-models/question-base';\nimport { QuestionGroup } from '../question-models/group-question';\nimport { ValidationFactory } from '../form-factory/validation.factory';\nimport { HidersDisablersFactory } from './hiders-disablers.factory';\nimport { AlertsFactory } from './show-messages.factory';\nimport { Form } from './form';\nimport {\n  ExpressionRunner,\n  Runnable\n} from '../expression-runner/expression-runner';\nimport { JsExpressionHelper } from '../helpers/js-expression-helper';\n\n@Injectable()\nexport class FormControlService {\n  controls = [];\n  validationFactory: ValidationFactory;\n  hidersDisablersFactory: HidersDisablersFactory;\n\n  constructor(\n    validationFactory: ValidationFactory,\n    hidersDisablersFactory: HidersDisablersFactory,\n    private alertsFactory: AlertsFactory\n  ) {\n    this.validationFactory = validationFactory;\n    this.hidersDisablersFactory = hidersDisablersFactory;\n  }\n\n  generateControlModel(\n    questionModel: QuestionBase | NestedQuestion,\n    parentControl: AfeFormGroup,\n    generateChildren: boolean,\n    form?: Form\n  ): AfeFormControl | AfeFormArray | AfeFormGroup {\n    if (questionModel instanceof QuestionBase) {\n      if (questionModel.controlType === AfeControlType.AfeFormArray) {\n        return this.generateFormArray(questionModel, parentControl, form);\n      }\n      if (questionModel.controlType === AfeControlType.AfeFormGroup) {\n        return this.generateFormGroupModel(\n          questionModel,\n          generateChildren,\n          parentControl,\n          form\n        );\n      }\n\n      if (questionModel.controlType === AfeControlType.AfeFormControl) {\n        return this.generateFormControl(questionModel, parentControl, form);\n      }\n    }\n    return null;\n  }\n\n  generateFormGroupModel(\n    question: QuestionBase,\n    generateChildren: boolean,\n    parentControl?: AfeFormGroup,\n    form?: Form\n  ): AfeFormGroup {\n    const formGroup = new AfeFormGroup({});\n    this.wireHidersDisablers(question, formGroup, form);\n    this.wireAlerts(question, formGroup, form);\n    if (parentControl instanceof AfeFormGroup) {\n      parentControl.setControl(question.key, formGroup);\n    }\n\n    const asGroup = question as QuestionGroup;\n\n    if (generateChildren && asGroup && asGroup.questions.length > 0) {\n      this._generateFormGroupChildrenModel(asGroup.questions, formGroup, form);\n    }\n\n    return formGroup;\n  }\n\n  _generateFormGroupChildrenModel(\n    questions: QuestionBase[],\n    parentControl: AfeFormGroup,\n    form?: Form\n  ) {\n    if (questions.length > 0) {\n      questions.forEach((element) => {\n        const generated = this.generateControlModel(\n          element,\n          parentControl,\n          true,\n          form\n        );\n        if (generated !== null) {\n          parentControl.addControl(element.key, generated);\n        }\n      });\n    }\n  }\n\n  generateFormArray(\n    question: QuestionBase,\n    parentControl?: AfeFormGroup,\n    form?: Form\n  ): AfeFormArray {\n    const validators = this.validationFactory.getValidators(question, form);\n    let formArray: AfeFormArray;\n    if (validators && validators.length > 0) {\n      formArray = new AfeFormArray([], validators[0]);\n    } else {\n      formArray = new AfeFormArray([]);\n    }\n    formArray.uuid = question.key;\n    this.wireHidersDisablers(question, formArray, form);\n    this.wireAlerts(question, formArray, form);\n    if (parentControl instanceof AfeFormGroup) {\n      parentControl.setControl(question.key, formArray);\n    }\n\n    return formArray;\n  }\n\n  generateFormControl(\n    question: QuestionBase,\n    parentControl?: AfeFormGroup,\n    form?: Form\n  ): AfeFormControl {\n    const value = question.defaultValue || '';\n    const validators = this.validationFactory.getValidators(question, form);\n\n    const control = new AfeFormControl(value, validators);\n    control.uuid = question.key;\n    this.wireHidersDisablers(question, control, form);\n    this.wireAlerts(question, control, form);\n    this.wireCalculator(\n      question,\n      control,\n      form ? form.dataSourcesContainer.dataSources : null\n    );\n\n    if (parentControl instanceof AfeFormGroup) {\n      parentControl.setControl(question.key, control);\n    }\n\n    return control;\n  }\n\n  private wireAlerts(\n    question: QuestionBase,\n    control: AfeFormArray | AfeFormGroup | AfeFormControl,\n    form?: Form\n  ) {\n    if (question.alert && question.alert !== '') {\n      const alert = this.alertsFactory.getJsExpressionshowAlert(\n        question,\n        control,\n        form\n      );\n      control.setAlertFn(alert);\n    }\n  }\n  private wireHidersDisablers(\n    question: QuestionBase,\n    control: AfeFormArray | AfeFormGroup | AfeFormControl,\n    form?: Form\n  ) {\n    if (question.hide && question.hide !== '') {\n      const hider = this.hidersDisablersFactory.getJsExpressionHider(\n        question,\n        control,\n        form\n      );\n      control.setHidingFn(hider);\n    }\n\n    if (question.disable && question.disable !== '') {\n      const disable = this.hidersDisablersFactory.getJsExpressionDisabler(\n        question,\n        control,\n        form\n      );\n      control.setDisablingFn(disable);\n    }\n  }\n\n  private wireCalculator(\n    question: QuestionBase,\n    control: AfeFormControl,\n    dataSource?: any\n  ) {\n    if (question.calculateExpression && question.calculateExpression !== '') {\n      const helper: JsExpressionHelper = new JsExpressionHelper();\n      const runner: ExpressionRunner = new ExpressionRunner();\n      const runnable: Runnable = runner.getRunnable(\n        question.calculateExpression,\n        control,\n        helper.helperFunctions,\n        dataSource\n      );\n      // this functionality strictly assumes the calculateExpression function has been defined in the JsExpressionHelper class\n      control.setCalculatorFn(runnable.run);\n    }\n  }\n}\n","export const DEFAULT_STYLES = `a {\n      color: white;\n      text-decoration: none;\n      font-size: 12px;\n      text-transform: uppercase;\n    }\n\n    ul {\n      list-style-type: none;\n      margin: 2px auto;\n      position: relative;\n    }\n\n    li {\n      display: block;\n      padding: 10px 20px;\n      white-space: nowrap;\n      transition: all 0.3s ease-in;\n      border-bottom: 4px solid transparent;\n    }\n\n    li:hover {\n      border-bottom: 4px solid white;\n      opacity: 0.7;\n      cursor: pointer;\n    }\n\n    .owl-theme .owl-controls .owl-nav {\n      position: absolute;\n      width: 100%;\n      top: 0;\n    }\n\n    .owl-theme .owl-controls .owl-nav [class*=\"owl-\"] {\n      position: absolute;\n      background: none;\n      color: black;\n    }\n\n    .owl-theme .owl-controls .owl-nav [class*=\"owl-\"]:hover {\n      background: none;\n      color: black;\n    }\n\n    .owl-theme .owl-controls .owl-nav .owl-next {\n      right: 0;\n      transform: translate(120%);\n    }\n\n    .owl-theme .owl-controls .owl-nav .owl-prev {\n      left: 0;\n      transform: translate(-120%);\n    }\n\n    .slick-initialized .swipe-tab-content {\n      position: relative;\n      min-height: 365px;\n    }\n    @media screen and (min-width: 767px) {\n      .slick-initialized .swipe-tab-content {\n        min-height: 500px;\n      }\n      .time-control{\n        width:50%;\n      }\n    }\n    .slick-initialized .swipe-tab {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 50px;\n      background: none;\n      border: 0;\n      color: #757575;\n      cursor: pointer;\n      text-align: center;\n      border-bottom: 2px solid rgba(51, 122, 183, 0);\n      transition: all 0.5s;\n    }\n    .slick-initialized .swipe-tab:hover {\n      color: #337AB7;\n    }\n    .slick-initialized .swipe-tab.active-tab {\n      border-bottom-color: #337AB7;\n      color: #337AB7;\n      font-weight: bold;\n    }\n\n    .disabled {\n      opacity: .5;\n      pointer-events: none;\n    }\n\n    .select2-container {\n      margin-top: -5px;\n    }\n\n    .btn {\n      padding: 0px 12px !important;\n    }\n\n    .form-tooltip{\n      color:rgb(51, 122, 183);\n      display: inline-block;\n    }\n    .question-info{\n          opacity:0;\n          height:0px;\n          display: none;\n          transition-duration: opacity 1s ease-out;\n          transtion-delay: 0.5s;\n          padding-top: 2px;\n          padding-bottom: 2px;\n          color: #696969;\n          border-style: ridge;\n          border-width: 1px;\n          border-color: #337ab7;\n          margin-top: 2px;\n    }\n    .hide-info{\n      display:none;\n      height:0px;\n    }\n    .form-tooltip:hover ~ .question-info {\n          display:block;\n          opacity:1;\n          height:auto;\n     }\n    .form-tooltip .tooltipcontent::after {\n          content: \" \";\n          position: absolute;\n          bottom: 100%;  /* At the top of the tooltip */\n          right: 0%;\n          margin-left: -5px;\n          border-width: 5px;\n          border-style: solid;\n          border-top-color: transparent;\n          border-right-color: transparent;\n          border-bottom-color: #337ab7;\n          border-left-color: transparent;\n }\n\n    ng-select.form-control {\n      padding-top: 0;\n      height: auto;\n      padding-bottom: 0;\n    }\n\n .forms-dropdown-menu {\n     max-height: 450px;\n     overflow-y: scroll;\n }\n .no-border {\n  border: 0;\n  box-shadow: none;\n}\n.time-control{\n  width:100%;\n}\n\n    `;\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class DataSources {\n  private _dataSources: any = {};\n  constructor() {}\n\n  get dataSources(): any {\n    return this._dataSources;\n  }\n\n  registerDataSource(key: string, dataSource: any, unWrap = false) {\n    if (unWrap) {\n      // tslint:disable-next-line:forin\n      for (const o in dataSource) {\n        console.log('registering', o, dataSource[o]);\n        this.registerDataSource(o, dataSource[o], false);\n      }\n    }\n    if (this.dataSources[key]) {\n      console.warn('Overriding registered data source', key);\n    }\n    this._dataSources[key] = dataSource;\n  }\n\n  clearDataSource(key: string) {\n    delete this._dataSources[key];\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  Inject,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\nimport 'hammerjs';\nimport { DEFAULT_STYLES } from './form-renderer.component.css';\nimport { DOCUMENT } from '@angular/common';\nimport { DataSources } from '../data-sources/data-sources';\nimport { NodeBase, LeafNode, GroupNode } from '../form-factory/form-node';\nimport { AfeFormGroup } from '../../abstract-controls-extension/afe-form-group';\nimport { ValidationFactory } from '../form-factory/validation.factory';\nimport { DataSource } from '../question-models/interfaces/data-source';\nimport { FormErrorsService } from '../services/form-errors.service';\nimport { QuestionGroup } from '../question-models/group-question';\n// import { concat, of, Observable, Subject, BehaviorSubject } from 'rxjs';\n// import * as _ from 'lodash';\n\n// import { debounceTime, distinctUntilChanged, tap, switchMap, catchError, map } from 'rxjs/operators';\n// import { QuestionBase } from '../question-models';\n\n@Component({\n  selector: 'form-renderer',\n  template: `<!--CONTAINERS-->\n<div *ngIf=\"node.question.renderingType === 'form'\">\n  <div class=\"dropdown dropdown-tabs forms-dropdown\">\n    <a class=\"btn dropdown-toggle\" data-toggle=\"dropdown\">\n      <i class=\"fa fa-angle-double-down\"></i>\n    </a>\n    <ul\n      class=\"dropdown-menu dropdown-menu-right forms-dropdown-menu\"\n      role=\"menu\"\n      aria-labelledby=\"dropdownMenu\"\n    >\n      <li\n        *ngFor=\"let question of node.question.questions; let i = index\"\n        (click)=\"clickTab(i)\"\n      >\n        {{ question.label }}\n      </li>\n    </ul>\n  </div>\n  <mat-tab-group\n    (selectedIndexChange)=\"tabSelected($event)\"\n    [selectedIndex]=\"activeTab\"\n  >\n    <mat-tab\n      [label]=\"question.label\"\n      *ngFor=\"let question of node.question.questions; let i = index\"\n    >\n      <div (swipeLeft)=\"loadNextTab()\" (swipeRight)=\"loadPreviousTab()\">\n        <form-renderer\n          [node]=\"node.children[question.key]\"\n          [parentComponent]=\"this\"\n          [parentGroup]=\"node.control\"\n        ></form-renderer>\n      </div>\n    </mat-tab>\n  </mat-tab-group>\n\n  <div style=\"text-align: center\">\n    <button\n      type=\"button\"\n      class=\"btn btn-default\"\n      (click)=\"loadPreviousTab()\"\n      [ngClass]=\"{ disabled: isCurrentTabFirst() }\"\n    >\n      &lt;&lt;\n    </button>\n    <button\n      type=\"button\"\n      class=\"btn btn-default\"\n      (click)=\"loadNextTab()\"\n      [ngClass]=\"{ disabled: isCurrentTabLast() }\"\n    >\n      &gt;&gt;\n    </button>\n  </div>\n</div>\n<div *ngIf=\"node.question.renderingType === 'page'\">\n  <!--<h2>{{node.question.label}}</h2>-->\n  <form-renderer\n    *ngFor=\"let question of node.question.questions\"\n    [parentComponent]=\"this\"\n    [node]=\"node.children[question.key]\"\n    [parentGroup]=\"parentGroup\"\n  ></form-renderer>\n</div>\n<div *ngIf=\"node.question.renderingType === 'section' && checkSection(node)\">\n  <div class=\"panel panel-primary\">\n    <div class=\"panel-heading\">\n      <button\n        type=\"button\"\n        class=\"btn btn-primary pull-right\"\n        (click)=\"isCollapsed = !isCollapsed\"\n      >\n        {{ isCollapsed ? 'Show' : 'Hide' }}\n      </button>\n      {{ node.question.label }}\n    </div>\n    <div class=\"panel-body\" [collapse]=\"isCollapsed\">\n      <form-renderer\n        *ngFor=\"let question of node.question.questions\"\n        [parentComponent]=\"this\"\n        [node]=\"node.children[question.key]\"\n        [parentGroup]=\"parentGroup\"\n      ></form-renderer>\n    </div>\n  </div>\n</div>\n\n<!-- MESSAGES -->\n<div\n  *ngIf=\"node.control && node.control.alert && node.control.alert !== ''\"\n  class=\"alert alert-warning\"\n>\n  <a class=\"close\" data-dismiss=\"alert\">&times;</a> {{ node.control.alert }}\n</div>\n\n<!--CONTROLS-->\n\n<div\n  *ngIf=\"node.question.controlType === 0\"\n  class=\"form-group\"\n  [formGroup]=\"parentGroup\"\n  [hidden]=\"node.control.hidden\"\n  [ngClass]=\"{ disabled: node.control.disabled }\"\n>\n  <!--LEAF CONTROL-->\n  <div class=\"question-area\">\n    <a\n      class=\"form-tooltip pull-right\"\n      (click)=\"toggleInformation(node.question.extras.id)\"\n      data-placement=\"right\"\n      *ngIf=\"\n        node.question &&\n        node.question.extras.questionInfo &&\n        node.question.extras.questionInfo !== '' &&\n        node.question.extras.questionInfo !== ' '\n      \"\n    >\n      <i class=\"glyphicon glyphicon-question-sign\" aria-hidden=\"true\"></i>\n    </a>\n\n    <label\n      *ngIf=\"node.question.label\"\n      [style.color]=\"hasErrors() ? 'red' : ''\"\n      class=\"control-label\"\n      [attr.for]=\"node.question.key\"\n    >\n      {{ node.question.required ? '*' : '' }} {{ node.question.label }}\n    </label>\n    <div [ngSwitch]=\"node.question.renderingType\">\n      <select\n        class=\"form-control\"\n        *ngSwitchCase=\"'select'\"\n        [formControlName]=\"node.question.key\"\n        [id]=\"node.question.key + 'id'\"\n      >\n        <option *ngFor=\"let o of node.question.options\" [ngValue]=\"o.value\">\n          {{ o.label }}\n        </option>\n      </select>\n\n      <app-file-upload\n        *ngSwitchCase=\"'file'\"\n        [dataSource]=\"dataSource\"\n        [formControlName]=\"node.question.key\"\n        [id]=\"node.question.key + 'id'\"\n        (fileChanged)=\"upload($event)\"\n      >\n      </app-file-upload>\n      <textarea\n        [placeholder]=\"node.question.placeholder\"\n        [rows]=\"node.question.rows\"\n        class=\"form-control\"\n        *ngSwitchCase=\"'textarea'\"\n        [formControlName]=\"node.question.key\"\n        [id]=\"node.question.key + 'id'\"\n      >\n      </textarea>\n      <!--\n      <ng-select *ngSwitchCase=\"'remote-select'\" [items]=\"items$ | async\" bindLabel=\"label\" bindValue=\"value\" placeholder=\"{{node.question.placeholder}}\"\n        [hideSelected]=\"true\" [loading]=\"itemsLoading\"  [typeahead]=\"itemsInput$\" [formControlName]=\"node.question.key\" [id]=\"node.question.key + 'id'\">\n      </ng-select>\n    -->\n      <remote-select\n        *ngSwitchCase=\"'remote-select'\"\n        [placeholder]=\"node.question.placeholder\"\n        tabindex=\"0\"\n        [dataSource]=\"dataSource\"\n        [componentID]=\"node.question.key + 'id'\"\n        [formControlName]=\"node.question.key\"\n        [id]=\"node.question.key + 'id'\"\n      ></remote-select>\n      <!--  \n      <date-time-picker *ngSwitchCase=\"'date'\" [showTime]=\"node.question.showTime\" tabindex=\"0\" [weeks]='node.question.extras.questionOptions.weeksList'\n        (onDateChange)=\"onDateChanged(node)\" [showWeeks]=\"node.question.showWeeksAdder\" [formControlName]=\"node.question.key\"\n        [id]=\"node.question.key + 'id'\"></date-time-picker>\n  -->\n\n      <ngx-date-time-picker\n        *ngSwitchCase=\"'date'\"\n        [showTime]=\"node.question.showTime\"\n        [id]=\"node.question.key + 'id'\"\n        [formControlName]=\"node.question.key\"\n        [weeks]=\"node.question.extras.questionOptions.weeksList\"\n        (onDateChange)=\"onDateChanged(node)\"\n        [showWeeks]=\"node.question.showWeeksAdder\"\n      ></ngx-date-time-picker>\n      <ngx-time-picker  \n      *ngSwitchCase=\"'time'\"  \n      id=\"node.question.key + 'id'\"  \n      [formControlName]=\"node.question.key\"\n      ></ngx-time-picker>\n      <ng-select\n        *ngSwitchCase=\"'multi-select'\"\n        [style.height]=\"'auto'\"\n        [style.overflow-x]=\"'hidden'\"\n        tabindex=\"0\"\n        [formControlName]=\"node.question.key\"\n        [id]=\"node.question.key + 'id'\"\n        [options]=\"node.question.options\"\n        [multiple]=\"true\"\n      >\n      </ng-select>\n      <ng-select\n        *ngSwitchCase=\"'single-select'\"\n        [style.height]=\"auto\"\n        tabindex=\"0\"\n        [formControlName]=\"node.question.key\"\n        [id]=\"node.question.key + 'id'\"\n        [options]=\"node.question.options\"\n        [multiple]=\"false\"\n      >\n      </ng-select>\n      <input\n        class=\"form-control\"\n        *ngSwitchCase=\"'number'\"\n        [formControlName]=\"node.question.key\"\n        [attr.placeholder]=\"node.question.placeholder\"\n        [type]=\"'number'\"\n        [id]=\"node.question.key + 'id'\"\n        [step]=\"'any'\"\n        [min]=\"node.question.extras.questionOptions.min\"\n        [max]=\"node.question.extras.questionOptions.max\"\n      />\n      <input\n        class=\"form-control\"\n        *ngSwitchCase=\"'decimal'\"\n        [formControlName]=\"node.question.key\"\n        [attr.placeholder]=\"node.question.placeholder\"\n        [type]=\"'text'\"\n        [id]=\"node.question.key + 'id'\"\n        [min]=\"node.question.extras.questionOptions.min\"\n        [max]=\"node.question.extras.questionOptions.max\"\n      />\n      <input\n        class=\"form-control\"\n        *ngSwitchDefault\n        [formControlName]=\"node.question.key\"\n        [attr.placeholder]=\"node.question.placeholder\"\n        [type]=\"node.question.renderingType\"\n        [id]=\"node.question.key + 'id'\"\n      />\n\n      <div *ngSwitchCase=\"'radio'\">\n        <div *ngFor=\"let o of node.question.options\">\n          <label class=\"form-control no-border\">\n            <input\n              type=\"radio\"\n              [formControlName]=\"node.question.key\"\n              [id]=\"node.question.key + 'id'\"\n              [value]=\"o.value\"\n            />\n            {{ o.label }}\n          </label>\n        </div>\n      </div>\n\n      <div *ngSwitchCase=\"'checkbox'\">\n        <checkbox\n          [id]=\"node.question.key + 'id'\"\n          [formControlName]=\"node.question.key\"\n          [options]=\"node.question.options\"\n          [selected]=\"node.control.value\"\n        ></checkbox>\n      </div>\n\n      <div\n        *ngIf=\"\n          node.question.enableHistoricalValue && node.question.historicalDisplay\n        \"\n        style=\"margin-top: 2px\"\n      >\n        <div class=\"container-fluid\">\n          <div class=\"row\">\n            <div class=\"col-xs-9\">\n              <span class=\"text-warning\">Previous Value: </span>\n              <strong>{{ node.question.historicalDisplay?.text }}</strong>\n              <span *ngIf=\"node.question.showHistoricalValueDate\">\n                <span> | </span>\n                <strong class=\"text-primary\"\n                  >{{ node.question.historicalDisplay?._date }}\n                </strong>\n                <span\n                  class=\"text-primary\"\n                  *ngIf=\"\n                    node.question.historicalDisplay &&\n                    node.question.historicalDisplay._date\n                  \"\n                >\n                  ({{ node.question.historicalDisplay._date | timeAgo }})</span\n                >\n              </span>\n            </div>\n            <button\n              type=\"button\"\n              [node]=\"node\"\n              [name]=\"'historyValue'\"\n              class=\"btn btn-primary btn-small col-xs-3\"\n            >\n              Use Value\n            </button>\n          </div>\n        </div>\n      </div>\n      <appointments-overview [node]=\"node\"></appointments-overview>\n      <div *ngIf=\"hasErrors()\">\n        <p *ngFor=\"let e of errors()\">\n          <span class=\"text-danger\">{{ e }}</span>\n        </p>\n      </div>\n    </div>\n\n    <div\n      class=\"question-info col-md-12 col-lg-12 col-sm-12\"\n      id=\"{{ node.question.extras.id }}\"\n      *ngIf=\"\n        node.question &&\n        node.question.extras.questionInfo &&\n        node.question.extras.questionInfo !== '' &&\n        node.question.extras.questionInfo !== ' '\n      \"\n    >\n      {{ node.question.extras.questionInfo }}\n    </div>\n  </div>\n</div>\n<div\n  *ngIf=\"node.question.controlType === 1\"\n  [hidden]=\"node.control.hidden\"\n  [ngClass]=\"{ disabled: node.control.disabled }\"\n>\n  <!--ARRAY CONTROL-->\n  <div [ngSwitch]=\"node.question.renderingType\">\n    <div class=\"well\" style=\"padding: 2px\" *ngSwitchCase=\"'repeating'\">\n      <h4 style=\"margin: 2px; font-weight: bold\">{{ node.question.label }}</h4>\n      <hr\n        style=\"\n          margin-left: -2px;\n          margin-right: -2px;\n          margin-bottom: 4px;\n          margin-top: 8px;\n          border-width: 2px;\n        \"\n      />\n      <div [ngSwitch]=\"node.question.extras.type\">\n        <div *ngSwitchCase=\"'testOrder'\">\n          <div *ngFor=\"let child of node.children; let i = index\">\n            <form-renderer\n              *ngFor=\"let question of child.question.questions\"\n              [parentComponent]=\"this\"\n              [node]=\"child.children[question.key]\"\n              [parentGroup]=\"child.control\"\n            ></form-renderer>\n            <div>{{ child.orderNumber }}</div>\n            <button\n              type=\"button \"\n              class=\"btn btn-sm btn-danger\"\n              (click)=\"node.removeAt(i)\"\n            >\n              Remove\n            </button>\n            <br />\n            <hr\n              style=\"\n                margin-left: -2px;\n                margin-right: -2px;\n                margin-bottom: 4px;\n                margin-top: 8px;\n                border-width: 1px;\n              \"\n            />\n          </div>\n        </div>\n\n        <div *ngSwitchCase=\"'obsGroup'\" style=\"margin-bottom: 20px\">\n          <div *ngFor=\"let child of node.children; let i = index\">\n            <form-renderer\n              *ngFor=\"let question of child.question.questions\"\n              [parentComponent]=\"this\"\n              [node]=\"child.children[question.key]\"\n              [parentGroup]=\"child.control\"\n            ></form-renderer>\n            <button\n              type=\"button \"\n              class=\"btn btn-sm btn-danger\"\n              (click)=\"node.removeAt(i)\"\n            >\n              Remove\n            </button>\n            <br />\n            <hr\n              style=\"\n                margin-left: -2px;\n                margin-right: -2px;\n                margin-bottom: 4px;\n                margin-top: 8px;\n                border-width: 1px;\n              \"\n            />\n          </div>\n        </div>\n      </div>\n      <button\n        type=\"button \"\n        class=\"btn btn-primary\"\n        (click)=\"node.createChildNode()\"\n      >\n        Add\n      </button>\n    </div>\n  </div>\n</div>\n<div\n  *ngIf=\"node.question.controlType === 2\"\n  [hidden]=\"node.control.hidden\"\n  [ngClass]=\"{ disabled: node.control.disabled }\"\n>\n  <!--GROUP-->\n  <div [ngSwitch]=\"node.question.renderingType\">\n    <div *ngSwitchCase=\"'group'\">\n      <form-renderer\n        *ngFor=\"let question of node.question.questions\"\n        [parentComponent]=\"this\"\n        [node]=\"node.children[question.key]\"\n        [parentGroup]=\"node.control\"\n      ></form-renderer>\n    </div>\n    <div\n      *ngSwitchCase=\"'field-set'\"\n      style=\"border: 1px solid #eeeeee; padding: 2px; margin: 2px\"\n    >\n      <form-renderer\n        *ngFor=\"let question of node.question.questions\"\n        [parentComponent]=\"this\"\n        [node]=\"node.children[question.key]\"\n        [parentGroup]=\"node.control\"\n      ></form-renderer>\n    </div>\n  </div>\n</div>\n`,\n  styles: ['../../style/app.css', DEFAULT_STYLES]\n})\nexport class FormRendererComponent implements OnInit {\n  @Input() public parentComponent: FormRendererComponent;\n  @Input() public node: NodeBase;\n  @Input() public parentGroup: AfeFormGroup;\n  public childComponents: FormRendererComponent[] = [];\n  public showTime: boolean;\n  public showWeeks: boolean;\n  public activeTab: number;\n  public dataSource: DataSource;\n  public isCollapsed = false;\n  public auto: any;\n\n  // items$: Observable<any[]>;\n  // itemsLoading = false;\n  // itemsInput$ = new Subject<string>();\n\n  constructor(\n    private validationFactory: ValidationFactory,\n    private dataSources: DataSources,\n    private formErrorsService: FormErrorsService,\n    @Inject(DOCUMENT) private document: any\n  ) {\n    this.activeTab = 0;\n  }\n\n  public ngOnInit() {\n    this.setUpRemoteSelect();\n    this.setUpFileUpload();\n    if (this.node && this.node.form) {\n      const tab = this.node.form.valueProcessingInfo.lastFormTab;\n      if (tab && tab !== this.activeTab) {\n        this.activeTab = tab;\n      }\n    }\n    if (this.node && this.node.question.renderingType === 'form') {\n      this.formErrorsService.announceErrorField$.subscribe((error) => {\n        this.scrollToControl(error);\n      });\n    }\n\n    if (this.node && this.node.question.renderingType === 'section') {\n      this.isCollapsed = !(this.node.question as QuestionGroup).isExpanded;\n    }\n\n    if (this.parentComponent) {\n      this.parentComponent.addChildComponent(this);\n    }\n  }\n\n  public addChildComponent(child: FormRendererComponent) {\n    this.childComponents.push(child);\n  }\n\n  public setUpRemoteSelect() {\n    if (\n      this.node &&\n      this.node.question.extras &&\n      this.node.question.renderingType === 'remote-select'\n    ) {\n      // let selectQuestion = this.node.form.searchNodeByQuestionId(this.node.question.key)[0];\n      this.dataSource = this.dataSources.dataSources[\n        this.node.question.dataSource\n      ];\n      /*\n      let defaltValues = of([]);\n      if (this.dataSource.resolveSelectedValue(selectQuestion.control.value)) {\n        defaltValues = this.dataSource.resolveSelectedValue(selectQuestion.control.value).pipe(\n          catchError(() => of([])), // empty list on error\n        );\n      }\n      this.items$ = concat(\n        defaltValues,\n        this.itemsInput$.pipe(\n          debounceTime(200),\n          distinctUntilChanged(),\n          tap(() => this.itemsLoading = true),\n          switchMap(term => this.dataSource.searchOptions(term).pipe(\n            catchError(() => of([])), // empty list on error\n            tap(() => {\n              this.itemsLoading = false\n            })\n          ))\n        )\n      );\n      */\n      if (this.dataSource && this.node.question.dataSourceOptions) {\n        this.dataSource.dataSourceOptions = this.node.question.dataSourceOptions;\n      }\n    }\n  }\n\n  public setUpFileUpload() {\n    if (\n      this.node &&\n      this.node.question.extras &&\n      this.node.question.renderingType === 'file'\n    ) {\n      this.dataSource = this.dataSources.dataSources[\n        this.node.question.dataSource\n      ];\n      // console.log('Key', this.node.question);\n      // console.log('Data source', this.dataSource);\n    }\n  }\n\n  checkSection(node: NodeBase) {\n    if (node.question.renderingType === 'section') {\n      let groupChildrenHidden = false;\n      const allSectionControlsHidden = Object.keys(node.children).every((k) => {\n        const innerNode = node.children[k];\n        if (innerNode instanceof GroupNode) {\n          groupChildrenHidden = Object.keys(innerNode.children).every(\n            (i) => innerNode.children[i].control.hidden\n          );\n        }\n        return node.children[k].control.hidden || groupChildrenHidden;\n      });\n      return !allSectionControlsHidden;\n    }\n    return true;\n  }\n\n  public clickTab(tabNumber) {\n    this.activeTab = tabNumber;\n  }\n\n  public loadPreviousTab() {\n    if (!this.isCurrentTabFirst()) {\n      this.clickTab(this.activeTab - 1);\n      document.body.scrollTop = 0;\n    }\n  }\n\n  public isCurrentTabFirst() {\n    return this.activeTab === 0;\n  }\n\n  public isCurrentTabLast() {\n    return this.activeTab === this.node.question['questions'].length - 1;\n  }\n\n  public loadNextTab() {\n    if (!this.isCurrentTabLast()) {\n      this.clickTab(this.activeTab + 1);\n      document.body.scrollTop = 0;\n    }\n  }\n  public tabSelected($event) {\n    this.activeTab = $event;\n    this.setPreviousTab();\n  }\n  public setPreviousTab() {\n    if (this.node && this.node.form) {\n      this.node.form.valueProcessingInfo['lastFormTab'] = this.activeTab;\n    }\n  }\n  public hasErrors() {\n    return this.node.control.touched && !this.node.control.valid;\n  }\n\n  public errors() {\n    return this.getErrors(this.node);\n  }\n\n  public scrollToControl(error: string) {\n    const tab: number = +error.split(',')[0];\n    const elSelector = error.split(',')[1] + 'id';\n\n    // the tab components\n    const tabComponent: FormRendererComponent = this.childComponents[tab];\n\n    this.clickTab(tab);\n\n    setTimeout(() => {\n      // expand all sections\n      tabComponent.childComponents.forEach((section) => {\n        section.isCollapsed = false;\n\n        setTimeout(() => {\n          const element: any = this.document.getElementById(elSelector);\n          if (element !== null && element.focus) {\n            element.focus();\n            element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n          }\n        }, 100);\n      });\n    }, 200);\n  }\n\n  public onDateChanged(node: LeafNode) {\n    // console.log('Node', node);\n    this.node = node;\n  }\n\n  public upload(event) {\n    // console.log('Event', event);\n    // console.log('Data', this.dataSource);\n  }\n\n  public toggleInformation(infoId) {\n    const e = document.getElementById(infoId);\n\n    if (e.style.display === 'block') {\n      e.style.display = 'none';\n    } else {\n      e.style.display = 'block';\n    }\n\n    console.log('InfoId', infoId);\n  }\n\n  private getErrors(node: NodeBase) {\n    const errors: any = node.control.errors;\n\n    if (errors) {\n      return this.validationFactory.errors(errors, node.question);\n    }\n\n    return [];\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport * as _ from 'lodash';\n\nimport { Form } from '../form-factory/form';\nimport { ValidationFactory } from '../form-factory/validation.factory';\nimport { NodeBase, LeafNode } from '../form-factory/form-node';\nimport { QuestionGroup } from '../question-models/group-question';\nimport { FormErrorsService } from '../services/form-errors.service';\n\n@Component({\n  selector: 'error-renderer',\n  template: `<div *ngIf=\"showErrors()\" class=\"container\">\n  <ul class=\"list-group\">\n    <li\n      class=\"list-group-item list-group-item-warning\"\n      *ngFor=\"let errorNode of errorNodes\"\n      (click)=\"announceErrorField(errorNode)\"\n    >\n      <div class=\"error\" *ngIf=\"errorNode.control.valid == false\">\n        <h4>{{ errorNode.question.label }}</h4>\n        <span class=\"text-danger\"> {{ getControlError(errorNode) }}</span>\n      </div>\n    </li>\n  </ul>\n</div>\n`,\n  styles: [`ul{list-style:none}.list-group-item{padding:2px 15px;cursor:pointer}ul li:hover{background-color:#fff}h4{margin-top:7px;margin-bottom:7px}`]\n})\nexport class ErrorRendererComponent implements OnInit {\n  @Input() form: Form;\n\n  constructor(\n    private validationFactory: ValidationFactory,\n    private formErrorsService: FormErrorsService\n  ) {}\n\n  ngOnInit() {}\n\n  showErrors() {\n    return !this.form.valid && this.form.showErrors;\n  }\n\n  get errorNodes() {\n    const invalidControls = this.form.markInvalidControls(\n      this.form.rootNode,\n      []\n    );\n    return invalidControls;\n  }\n\n  getControlError(node: LeafNode) {\n    const errors: any = node.control.errors;\n\n    if (errors) {\n      return this.validationFactory.errors(errors, node.question);\n    }\n\n    return [];\n  }\n\n  announceErrorField(errorNode: LeafNode) {\n    const nodes: Array<NodeBase> = this.form.searchNodeByQuestionId(\n      errorNode.path.substring(0, errorNode.path.indexOf('.'))\n    );\n\n    _.forEach(nodes, (node: NodeBase) => {\n      if (node.question.renderingType === 'page') {\n        const pageIndex: number = this.getPageIndex(node);\n        this.formErrorsService.announceErrorField(\n          pageIndex + ',' + errorNode.question.key\n        );\n      }\n    });\n  }\n\n  getPageIndex(node: NodeBase) {\n    const questionGroup: QuestionGroup = this.form.rootNode\n      .question as QuestionGroup;\n    return questionGroup.questions.indexOf(node.question);\n  }\n}\n","import * as _ from 'lodash';\nimport { QuestionBase } from '../question-models/question-base';\n\nexport class HistoricalFieldHelperService {\n  public getDisplayTextFromOptions(\n    question: QuestionBase,\n    valueProperty: string,\n    displayProperty: string\n  ): string {\n    let displayText = '';\n    const historicalValue = question.historicalDataValue;\n    if (_.isArray(historicalValue.value)) {\n      let valueConverted = 0;\n      _.each(historicalValue.value, (val) => {\n        _.each(question.options, (option) => {\n          if (option[valueProperty] === val) {\n            if (valueConverted === 0) {\n              displayText = displayText + option[displayProperty];\n            } else {\n              displayText = displayText + ', ' + option[displayProperty];\n            }\n            valueConverted++;\n          }\n        });\n      });\n    } else {\n      _.each(question.options, (option) => {\n        if (option[valueProperty] === historicalValue.value) {\n          displayText = option[displayProperty];\n        }\n      });\n    }\n    return displayText;\n  }\n}\n","import {\n  Directive,\n  HostListener,\n  Input,\n  Output,\n  EventEmitter\n} from '@angular/core';\n\nimport { HistoricalFieldHelperService } from '../helpers/historical-field-helper-service';\nimport * as _ from 'lodash';\nimport { NodeBase } from '../form-factory/form-node';\n\n@Directive({\n  selector: `[node]`\n})\nexport class HistoricalValueDirective {\n  @Input() _node: NodeBase;\n  @Output() _nodeChange = new EventEmitter<Object>();\n\n  historicalDisplay: string;\n\n  constructor(private historicalFieldHelper: HistoricalFieldHelperService) {}\n\n  @HostListener('click', ['$event'])\n  setValue(e) {\n    if (e.target.name === 'historyValue') {\n      if (\n        this._node &&\n        (!this.compareString(this._node.question.renderingType, 'page') ||\n          !this.compareString(this._node.question.renderingType, 'section'))\n      ) {\n        this._node.control.setValue(\n          this._node.question.historicalDataValue.value\n        );\n\n        this._node.question[\n          'historicalValue'\n        ] = this._node.question.historicalDataValue;\n        e.stopPropagation();\n        this._nodeChange.emit(this._node);\n      }\n    }\n  }\n  private compareString(a, b) {\n    if (a === b) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  @Input()\n  set node(node: NodeBase) {\n    if (node) {\n      this._node = node;\n      if (\n        this._node.question.enableHistoricalValue &&\n        !_.isUndefined(this._node.question.historicalDataValue)\n      ) {\n        const display: any = { text: '', _date: '' };\n        if (\n          this._node.question.renderingType === 'select' ||\n          this._node.question.renderingType === 'multi-select' ||\n          this._node.question.renderingType === 'single-select'\n        ) {\n          display.text = this.historicalFieldHelper.getDisplayTextFromOptions(\n            this._node.question,\n            'value',\n            'label'\n          );\n          display._date = this._node.question.historicalDataValue.valueDate;\n\n          this._node.question['historicalDisplay'] = display;\n        } else if (!_.isUndefined(this._node.question.historicalDataValue)) {\n          display.text = this._node.question.historicalDataValue.value;\n          display._date = this._node.question.historicalDataValue.valueDate;\n\n          this._node.question['historicalDisplay'] = display;\n        }\n      }\n    }\n  }\n}\n","export const STYLE = `\nng-select {\n  display: inline-block;\n  margin: 0;\n  position: relative;\n  vertical-align: middle;\n  width: 100%;\n}\nng-select * {\n  box-sizing: border-box;\n  font-family: Sans-Serif;\n}\nng-select > div {\n  border: 1px solid #ddd;\n  box-sizing: border-box;\n  cursor: pointer;\n  user-select: none;\n  width: 100%;\n}\nng-select > div.disabled {\n  background-color: #eee;\n  color: #aaa;\n  cursor: default;\n  pointer-events: none;\n}\nng-select > div > div.single {\n  display: flex;\n  height: 30px;\n  width: 100%;\n}\nng-select > div > div.single > div.value,\nng-select > div > div.single > div.placeholder {\n  flex: 1;\n  line-height: 30px;\n  overflow: hidden;\n  padding: 0 10px;\n  white-space: nowrap;\n}\nng-select > div > div.single > div.placeholder {\n  color: #a9a9a9;\n}\nng-select > div > div.single > div.clear,\nng-select > div > div.single > div.toggle {\n  color: #aaa;\n  line-height: 30px;\n  text-align: center;\n  width: 30px;\n}\nng-select > div > div.single > div.clear:hover,\nng-select > div > div.single > div.toggle:hover {\n  background-color: #ececec;\n}\nng-select > div > div.single > div.clear {\n  font-size: 18px;\n}\nng-select > div > div.single > div.toggle {\n  font-size: 14px;\n}\nng-select > div > div.multiple {\n  display: flex;\n  flex-flow: row wrap;\n  height: 100%;\n  min-height: 30px;\n  padding: 0 10px;\n  width: 100%;\n}\nng-select > div > div.multiple > div.option {\n  background-color: #eee;\n  border: 1px solid #aaa;\n  border-radius: 4px;\n  color: #333;\n  cursor: default;\n  display: inline-block;\n  flex-shrink: 0;\n  font-size: 14px;\n  line-height: 22px;\n  margin: 3px 5px 3px 0;\n  padding: 0 4px;\n}\nng-select > div > div.multiple > div.option span.deselect-option {\n  color: #aaa;\n  cursor: pointer;\n  font-size: 14px;\n  height: 20px;\n  line-height: 20px;\n}\nng-select > div > div.multiple > div.option span.deselect-option:hover {\n  color: #555;\n}\nng-select > div > div.multiple input {\n  background-color: transparent;\n  border: none;\n  height: 30px;\n  line-height: 30px;\n  padding: 0;\n}\nng-select > div > div.multiple input:focus {\n  outline: none;\n}\n`;\n","export class Option {\n  value: string;\n  label: string;\n\n  disabled: boolean;\n  highlighted: boolean;\n  selected: boolean;\n  shown: boolean;\n\n  constructor(value: string, label: string) {\n    this.value = value;\n    this.label = label;\n\n    this.disabled = false;\n    this.highlighted = false;\n    this.selected = false;\n    this.shown = true;\n  }\n\n  show() {\n    this.shown = true;\n  }\n\n  hide() {\n    this.shown = false;\n  }\n\n  disable() {\n    this.disabled = true;\n  }\n\n  enable() {\n    this.disabled = false;\n  }\n\n  undecoratedCopy() {\n    return {\n      label: this.label,\n      value: this.value\n    };\n  }\n}\n","export class Diacritics {\n  static DIACRITICS = {\n    '\\u24B6': 'A',\n    '\\uFF21': 'A',\n    '\\u00C0': 'A',\n    '\\u00C1': 'A',\n    '\\u00C2': 'A',\n    '\\u1EA6': 'A',\n    '\\u1EA4': 'A',\n    '\\u1EAA': 'A',\n    '\\u1EA8': 'A',\n    '\\u00C3': 'A',\n    '\\u0100': 'A',\n    '\\u0102': 'A',\n    '\\u1EB0': 'A',\n    '\\u1EAE': 'A',\n    '\\u1EB4': 'A',\n    '\\u1EB2': 'A',\n    '\\u0226': 'A',\n    '\\u01E0': 'A',\n    '\\u00C4': 'A',\n    '\\u01DE': 'A',\n    '\\u1EA2': 'A',\n    '\\u00C5': 'A',\n    '\\u01FA': 'A',\n    '\\u01CD': 'A',\n    '\\u0200': 'A',\n    '\\u0202': 'A',\n    '\\u1EA0': 'A',\n    '\\u1EAC': 'A',\n    '\\u1EB6': 'A',\n    '\\u1E00': 'A',\n    '\\u0104': 'A',\n    '\\u023A': 'A',\n    '\\u2C6F': 'A',\n    '\\uA732': 'AA',\n    '\\u00C6': 'AE',\n    '\\u01FC': 'AE',\n    '\\u01E2': 'AE',\n    '\\uA734': 'AO',\n    '\\uA736': 'AU',\n    '\\uA738': 'AV',\n    '\\uA73A': 'AV',\n    '\\uA73C': 'AY',\n    '\\u24B7': 'B',\n    '\\uFF22': 'B',\n    '\\u1E02': 'B',\n    '\\u1E04': 'B',\n    '\\u1E06': 'B',\n    '\\u0243': 'B',\n    '\\u0182': 'B',\n    '\\u0181': 'B',\n    '\\u24B8': 'C',\n    '\\uFF23': 'C',\n    '\\u0106': 'C',\n    '\\u0108': 'C',\n    '\\u010A': 'C',\n    '\\u010C': 'C',\n    '\\u00C7': 'C',\n    '\\u1E08': 'C',\n    '\\u0187': 'C',\n    '\\u023B': 'C',\n    '\\uA73E': 'C',\n    '\\u24B9': 'D',\n    '\\uFF24': 'D',\n    '\\u1E0A': 'D',\n    '\\u010E': 'D',\n    '\\u1E0C': 'D',\n    '\\u1E10': 'D',\n    '\\u1E12': 'D',\n    '\\u1E0E': 'D',\n    '\\u0110': 'D',\n    '\\u018B': 'D',\n    '\\u018A': 'D',\n    '\\u0189': 'D',\n    '\\uA779': 'D',\n    '\\u01F1': 'DZ',\n    '\\u01C4': 'DZ',\n    '\\u01F2': 'Dz',\n    '\\u01C5': 'Dz',\n    '\\u24BA': 'E',\n    '\\uFF25': 'E',\n    '\\u00C8': 'E',\n    '\\u00C9': 'E',\n    '\\u00CA': 'E',\n    '\\u1EC0': 'E',\n    '\\u1EBE': 'E',\n    '\\u1EC4': 'E',\n    '\\u1EC2': 'E',\n    '\\u1EBC': 'E',\n    '\\u0112': 'E',\n    '\\u1E14': 'E',\n    '\\u1E16': 'E',\n    '\\u0114': 'E',\n    '\\u0116': 'E',\n    '\\u00CB': 'E',\n    '\\u1EBA': 'E',\n    '\\u011A': 'E',\n    '\\u0204': 'E',\n    '\\u0206': 'E',\n    '\\u1EB8': 'E',\n    '\\u1EC6': 'E',\n    '\\u0228': 'E',\n    '\\u1E1C': 'E',\n    '\\u0118': 'E',\n    '\\u1E18': 'E',\n    '\\u1E1A': 'E',\n    '\\u0190': 'E',\n    '\\u018E': 'E',\n    '\\u24BB': 'F',\n    '\\uFF26': 'F',\n    '\\u1E1E': 'F',\n    '\\u0191': 'F',\n    '\\uA77B': 'F',\n    '\\u24BC': 'G',\n    '\\uFF27': 'G',\n    '\\u01F4': 'G',\n    '\\u011C': 'G',\n    '\\u1E20': 'G',\n    '\\u011E': 'G',\n    '\\u0120': 'G',\n    '\\u01E6': 'G',\n    '\\u0122': 'G',\n    '\\u01E4': 'G',\n    '\\u0193': 'G',\n    '\\uA7A0': 'G',\n    '\\uA77D': 'G',\n    '\\uA77E': 'G',\n    '\\u24BD': 'H',\n    '\\uFF28': 'H',\n    '\\u0124': 'H',\n    '\\u1E22': 'H',\n    '\\u1E26': 'H',\n    '\\u021E': 'H',\n    '\\u1E24': 'H',\n    '\\u1E28': 'H',\n    '\\u1E2A': 'H',\n    '\\u0126': 'H',\n    '\\u2C67': 'H',\n    '\\u2C75': 'H',\n    '\\uA78D': 'H',\n    '\\u24BE': 'I',\n    '\\uFF29': 'I',\n    '\\u00CC': 'I',\n    '\\u00CD': 'I',\n    '\\u00CE': 'I',\n    '\\u0128': 'I',\n    '\\u012A': 'I',\n    '\\u012C': 'I',\n    '\\u0130': 'I',\n    '\\u00CF': 'I',\n    '\\u1E2E': 'I',\n    '\\u1EC8': 'I',\n    '\\u01CF': 'I',\n    '\\u0208': 'I',\n    '\\u020A': 'I',\n    '\\u1ECA': 'I',\n    '\\u012E': 'I',\n    '\\u1E2C': 'I',\n    '\\u0197': 'I',\n    '\\u24BF': 'J',\n    '\\uFF2A': 'J',\n    '\\u0134': 'J',\n    '\\u0248': 'J',\n    '\\u24C0': 'K',\n    '\\uFF2B': 'K',\n    '\\u1E30': 'K',\n    '\\u01E8': 'K',\n    '\\u1E32': 'K',\n    '\\u0136': 'K',\n    '\\u1E34': 'K',\n    '\\u0198': 'K',\n    '\\u2C69': 'K',\n    '\\uA740': 'K',\n    '\\uA742': 'K',\n    '\\uA744': 'K',\n    '\\uA7A2': 'K',\n    '\\u24C1': 'L',\n    '\\uFF2C': 'L',\n    '\\u013F': 'L',\n    '\\u0139': 'L',\n    '\\u013D': 'L',\n    '\\u1E36': 'L',\n    '\\u1E38': 'L',\n    '\\u013B': 'L',\n    '\\u1E3C': 'L',\n    '\\u1E3A': 'L',\n    '\\u0141': 'L',\n    '\\u023D': 'L',\n    '\\u2C62': 'L',\n    '\\u2C60': 'L',\n    '\\uA748': 'L',\n    '\\uA746': 'L',\n    '\\uA780': 'L',\n    '\\u01C7': 'LJ',\n    '\\u01C8': 'Lj',\n    '\\u24C2': 'M',\n    '\\uFF2D': 'M',\n    '\\u1E3E': 'M',\n    '\\u1E40': 'M',\n    '\\u1E42': 'M',\n    '\\u2C6E': 'M',\n    '\\u019C': 'M',\n    '\\u24C3': 'N',\n    '\\uFF2E': 'N',\n    '\\u01F8': 'N',\n    '\\u0143': 'N',\n    '\\u00D1': 'N',\n    '\\u1E44': 'N',\n    '\\u0147': 'N',\n    '\\u1E46': 'N',\n    '\\u0145': 'N',\n    '\\u1E4A': 'N',\n    '\\u1E48': 'N',\n    '\\u0220': 'N',\n    '\\u019D': 'N',\n    '\\uA790': 'N',\n    '\\uA7A4': 'N',\n    '\\u01CA': 'NJ',\n    '\\u01CB': 'Nj',\n    '\\u24C4': 'O',\n    '\\uFF2F': 'O',\n    '\\u00D2': 'O',\n    '\\u00D3': 'O',\n    '\\u00D4': 'O',\n    '\\u1ED2': 'O',\n    '\\u1ED0': 'O',\n    '\\u1ED6': 'O',\n    '\\u1ED4': 'O',\n    '\\u00D5': 'O',\n    '\\u1E4C': 'O',\n    '\\u022C': 'O',\n    '\\u1E4E': 'O',\n    '\\u014C': 'O',\n    '\\u1E50': 'O',\n    '\\u1E52': 'O',\n    '\\u014E': 'O',\n    '\\u022E': 'O',\n    '\\u0230': 'O',\n    '\\u00D6': 'O',\n    '\\u022A': 'O',\n    '\\u1ECE': 'O',\n    '\\u0150': 'O',\n    '\\u01D1': 'O',\n    '\\u020C': 'O',\n    '\\u020E': 'O',\n    '\\u01A0': 'O',\n    '\\u1EDC': 'O',\n    '\\u1EDA': 'O',\n    '\\u1EE0': 'O',\n    '\\u1EDE': 'O',\n    '\\u1EE2': 'O',\n    '\\u1ECC': 'O',\n    '\\u1ED8': 'O',\n    '\\u01EA': 'O',\n    '\\u01EC': 'O',\n    '\\u00D8': 'O',\n    '\\u01FE': 'O',\n    '\\u0186': 'O',\n    '\\u019F': 'O',\n    '\\uA74A': 'O',\n    '\\uA74C': 'O',\n    '\\u01A2': 'OI',\n    '\\uA74E': 'OO',\n    '\\u0222': 'OU',\n    '\\u24C5': 'P',\n    '\\uFF30': 'P',\n    '\\u1E54': 'P',\n    '\\u1E56': 'P',\n    '\\u01A4': 'P',\n    '\\u2C63': 'P',\n    '\\uA750': 'P',\n    '\\uA752': 'P',\n    '\\uA754': 'P',\n    '\\u24C6': 'Q',\n    '\\uFF31': 'Q',\n    '\\uA756': 'Q',\n    '\\uA758': 'Q',\n    '\\u024A': 'Q',\n    '\\u24C7': 'R',\n    '\\uFF32': 'R',\n    '\\u0154': 'R',\n    '\\u1E58': 'R',\n    '\\u0158': 'R',\n    '\\u0210': 'R',\n    '\\u0212': 'R',\n    '\\u1E5A': 'R',\n    '\\u1E5C': 'R',\n    '\\u0156': 'R',\n    '\\u1E5E': 'R',\n    '\\u024C': 'R',\n    '\\u2C64': 'R',\n    '\\uA75A': 'R',\n    '\\uA7A6': 'R',\n    '\\uA782': 'R',\n    '\\u24C8': 'S',\n    '\\uFF33': 'S',\n    '\\u1E9E': 'S',\n    '\\u015A': 'S',\n    '\\u1E64': 'S',\n    '\\u015C': 'S',\n    '\\u1E60': 'S',\n    '\\u0160': 'S',\n    '\\u1E66': 'S',\n    '\\u1E62': 'S',\n    '\\u1E68': 'S',\n    '\\u0218': 'S',\n    '\\u015E': 'S',\n    '\\u2C7E': 'S',\n    '\\uA7A8': 'S',\n    '\\uA784': 'S',\n    '\\u24C9': 'T',\n    '\\uFF34': 'T',\n    '\\u1E6A': 'T',\n    '\\u0164': 'T',\n    '\\u1E6C': 'T',\n    '\\u021A': 'T',\n    '\\u0162': 'T',\n    '\\u1E70': 'T',\n    '\\u1E6E': 'T',\n    '\\u0166': 'T',\n    '\\u01AC': 'T',\n    '\\u01AE': 'T',\n    '\\u023E': 'T',\n    '\\uA786': 'T',\n    '\\uA728': 'TZ',\n    '\\u24CA': 'U',\n    '\\uFF35': 'U',\n    '\\u00D9': 'U',\n    '\\u00DA': 'U',\n    '\\u00DB': 'U',\n    '\\u0168': 'U',\n    '\\u1E78': 'U',\n    '\\u016A': 'U',\n    '\\u1E7A': 'U',\n    '\\u016C': 'U',\n    '\\u00DC': 'U',\n    '\\u01DB': 'U',\n    '\\u01D7': 'U',\n    '\\u01D5': 'U',\n    '\\u01D9': 'U',\n    '\\u1EE6': 'U',\n    '\\u016E': 'U',\n    '\\u0170': 'U',\n    '\\u01D3': 'U',\n    '\\u0214': 'U',\n    '\\u0216': 'U',\n    '\\u01AF': 'U',\n    '\\u1EEA': 'U',\n    '\\u1EE8': 'U',\n    '\\u1EEE': 'U',\n    '\\u1EEC': 'U',\n    '\\u1EF0': 'U',\n    '\\u1EE4': 'U',\n    '\\u1E72': 'U',\n    '\\u0172': 'U',\n    '\\u1E76': 'U',\n    '\\u1E74': 'U',\n    '\\u0244': 'U',\n    '\\u24CB': 'V',\n    '\\uFF36': 'V',\n    '\\u1E7C': 'V',\n    '\\u1E7E': 'V',\n    '\\u01B2': 'V',\n    '\\uA75E': 'V',\n    '\\u0245': 'V',\n    '\\uA760': 'VY',\n    '\\u24CC': 'W',\n    '\\uFF37': 'W',\n    '\\u1E80': 'W',\n    '\\u1E82': 'W',\n    '\\u0174': 'W',\n    '\\u1E86': 'W',\n    '\\u1E84': 'W',\n    '\\u1E88': 'W',\n    '\\u2C72': 'W',\n    '\\u24CD': 'X',\n    '\\uFF38': 'X',\n    '\\u1E8A': 'X',\n    '\\u1E8C': 'X',\n    '\\u24CE': 'Y',\n    '\\uFF39': 'Y',\n    '\\u1EF2': 'Y',\n    '\\u00DD': 'Y',\n    '\\u0176': 'Y',\n    '\\u1EF8': 'Y',\n    '\\u0232': 'Y',\n    '\\u1E8E': 'Y',\n    '\\u0178': 'Y',\n    '\\u1EF6': 'Y',\n    '\\u1EF4': 'Y',\n    '\\u01B3': 'Y',\n    '\\u024E': 'Y',\n    '\\u1EFE': 'Y',\n    '\\u24CF': 'Z',\n    '\\uFF3A': 'Z',\n    '\\u0179': 'Z',\n    '\\u1E90': 'Z',\n    '\\u017B': 'Z',\n    '\\u017D': 'Z',\n    '\\u1E92': 'Z',\n    '\\u1E94': 'Z',\n    '\\u01B5': 'Z',\n    '\\u0224': 'Z',\n    '\\u2C7F': 'Z',\n    '\\u2C6B': 'Z',\n    '\\uA762': 'Z',\n    '\\u24D0': 'a',\n    '\\uFF41': 'a',\n    '\\u1E9A': 'a',\n    '\\u00E0': 'a',\n    '\\u00E1': 'a',\n    '\\u00E2': 'a',\n    '\\u1EA7': 'a',\n    '\\u1EA5': 'a',\n    '\\u1EAB': 'a',\n    '\\u1EA9': 'a',\n    '\\u00E3': 'a',\n    '\\u0101': 'a',\n    '\\u0103': 'a',\n    '\\u1EB1': 'a',\n    '\\u1EAF': 'a',\n    '\\u1EB5': 'a',\n    '\\u1EB3': 'a',\n    '\\u0227': 'a',\n    '\\u01E1': 'a',\n    '\\u00E4': 'a',\n    '\\u01DF': 'a',\n    '\\u1EA3': 'a',\n    '\\u00E5': 'a',\n    '\\u01FB': 'a',\n    '\\u01CE': 'a',\n    '\\u0201': 'a',\n    '\\u0203': 'a',\n    '\\u1EA1': 'a',\n    '\\u1EAD': 'a',\n    '\\u1EB7': 'a',\n    '\\u1E01': 'a',\n    '\\u0105': 'a',\n    '\\u2C65': 'a',\n    '\\u0250': 'a',\n    '\\uA733': 'aa',\n    '\\u00E6': 'ae',\n    '\\u01FD': 'ae',\n    '\\u01E3': 'ae',\n    '\\uA735': 'ao',\n    '\\uA737': 'au',\n    '\\uA739': 'av',\n    '\\uA73B': 'av',\n    '\\uA73D': 'ay',\n    '\\u24D1': 'b',\n    '\\uFF42': 'b',\n    '\\u1E03': 'b',\n    '\\u1E05': 'b',\n    '\\u1E07': 'b',\n    '\\u0180': 'b',\n    '\\u0183': 'b',\n    '\\u0253': 'b',\n    '\\u24D2': 'c',\n    '\\uFF43': 'c',\n    '\\u0107': 'c',\n    '\\u0109': 'c',\n    '\\u010B': 'c',\n    '\\u010D': 'c',\n    '\\u00E7': 'c',\n    '\\u1E09': 'c',\n    '\\u0188': 'c',\n    '\\u023C': 'c',\n    '\\uA73F': 'c',\n    '\\u2184': 'c',\n    '\\u24D3': 'd',\n    '\\uFF44': 'd',\n    '\\u1E0B': 'd',\n    '\\u010F': 'd',\n    '\\u1E0D': 'd',\n    '\\u1E11': 'd',\n    '\\u1E13': 'd',\n    '\\u1E0F': 'd',\n    '\\u0111': 'd',\n    '\\u018C': 'd',\n    '\\u0256': 'd',\n    '\\u0257': 'd',\n    '\\uA77A': 'd',\n    '\\u01F3': 'dz',\n    '\\u01C6': 'dz',\n    '\\u24D4': 'e',\n    '\\uFF45': 'e',\n    '\\u00E8': 'e',\n    '\\u00E9': 'e',\n    '\\u00EA': 'e',\n    '\\u1EC1': 'e',\n    '\\u1EBF': 'e',\n    '\\u1EC5': 'e',\n    '\\u1EC3': 'e',\n    '\\u1EBD': 'e',\n    '\\u0113': 'e',\n    '\\u1E15': 'e',\n    '\\u1E17': 'e',\n    '\\u0115': 'e',\n    '\\u0117': 'e',\n    '\\u00EB': 'e',\n    '\\u1EBB': 'e',\n    '\\u011B': 'e',\n    '\\u0205': 'e',\n    '\\u0207': 'e',\n    '\\u1EB9': 'e',\n    '\\u1EC7': 'e',\n    '\\u0229': 'e',\n    '\\u1E1D': 'e',\n    '\\u0119': 'e',\n    '\\u1E19': 'e',\n    '\\u1E1B': 'e',\n    '\\u0247': 'e',\n    '\\u025B': 'e',\n    '\\u01DD': 'e',\n    '\\u24D5': 'f',\n    '\\uFF46': 'f',\n    '\\u1E1F': 'f',\n    '\\u0192': 'f',\n    '\\uA77C': 'f',\n    '\\u24D6': 'g',\n    '\\uFF47': 'g',\n    '\\u01F5': 'g',\n    '\\u011D': 'g',\n    '\\u1E21': 'g',\n    '\\u011F': 'g',\n    '\\u0121': 'g',\n    '\\u01E7': 'g',\n    '\\u0123': 'g',\n    '\\u01E5': 'g',\n    '\\u0260': 'g',\n    '\\uA7A1': 'g',\n    '\\u1D79': 'g',\n    '\\uA77F': 'g',\n    '\\u24D7': 'h',\n    '\\uFF48': 'h',\n    '\\u0125': 'h',\n    '\\u1E23': 'h',\n    '\\u1E27': 'h',\n    '\\u021F': 'h',\n    '\\u1E25': 'h',\n    '\\u1E29': 'h',\n    '\\u1E2B': 'h',\n    '\\u1E96': 'h',\n    '\\u0127': 'h',\n    '\\u2C68': 'h',\n    '\\u2C76': 'h',\n    '\\u0265': 'h',\n    '\\u0195': 'hv',\n    '\\u24D8': 'i',\n    '\\uFF49': 'i',\n    '\\u00EC': 'i',\n    '\\u00ED': 'i',\n    '\\u00EE': 'i',\n    '\\u0129': 'i',\n    '\\u012B': 'i',\n    '\\u012D': 'i',\n    '\\u00EF': 'i',\n    '\\u1E2F': 'i',\n    '\\u1EC9': 'i',\n    '\\u01D0': 'i',\n    '\\u0209': 'i',\n    '\\u020B': 'i',\n    '\\u1ECB': 'i',\n    '\\u012F': 'i',\n    '\\u1E2D': 'i',\n    '\\u0268': 'i',\n    '\\u0131': 'i',\n    '\\u24D9': 'j',\n    '\\uFF4A': 'j',\n    '\\u0135': 'j',\n    '\\u01F0': 'j',\n    '\\u0249': 'j',\n    '\\u24DA': 'k',\n    '\\uFF4B': 'k',\n    '\\u1E31': 'k',\n    '\\u01E9': 'k',\n    '\\u1E33': 'k',\n    '\\u0137': 'k',\n    '\\u1E35': 'k',\n    '\\u0199': 'k',\n    '\\u2C6A': 'k',\n    '\\uA741': 'k',\n    '\\uA743': 'k',\n    '\\uA745': 'k',\n    '\\uA7A3': 'k',\n    '\\u24DB': 'l',\n    '\\uFF4C': 'l',\n    '\\u0140': 'l',\n    '\\u013A': 'l',\n    '\\u013E': 'l',\n    '\\u1E37': 'l',\n    '\\u1E39': 'l',\n    '\\u013C': 'l',\n    '\\u1E3D': 'l',\n    '\\u1E3B': 'l',\n    '\\u017F': 'l',\n    '\\u0142': 'l',\n    '\\u019A': 'l',\n    '\\u026B': 'l',\n    '\\u2C61': 'l',\n    '\\uA749': 'l',\n    '\\uA781': 'l',\n    '\\uA747': 'l',\n    '\\u01C9': 'lj',\n    '\\u24DC': 'm',\n    '\\uFF4D': 'm',\n    '\\u1E3F': 'm',\n    '\\u1E41': 'm',\n    '\\u1E43': 'm',\n    '\\u0271': 'm',\n    '\\u026F': 'm',\n    '\\u24DD': 'n',\n    '\\uFF4E': 'n',\n    '\\u01F9': 'n',\n    '\\u0144': 'n',\n    '\\u00F1': 'n',\n    '\\u1E45': 'n',\n    '\\u0148': 'n',\n    '\\u1E47': 'n',\n    '\\u0146': 'n',\n    '\\u1E4B': 'n',\n    '\\u1E49': 'n',\n    '\\u019E': 'n',\n    '\\u0272': 'n',\n    '\\u0149': 'n',\n    '\\uA791': 'n',\n    '\\uA7A5': 'n',\n    '\\u01CC': 'nj',\n    '\\u24DE': 'o',\n    '\\uFF4F': 'o',\n    '\\u00F2': 'o',\n    '\\u00F3': 'o',\n    '\\u00F4': 'o',\n    '\\u1ED3': 'o',\n    '\\u1ED1': 'o',\n    '\\u1ED7': 'o',\n    '\\u1ED5': 'o',\n    '\\u00F5': 'o',\n    '\\u1E4D': 'o',\n    '\\u022D': 'o',\n    '\\u1E4F': 'o',\n    '\\u014D': 'o',\n    '\\u1E51': 'o',\n    '\\u1E53': 'o',\n    '\\u014F': 'o',\n    '\\u022F': 'o',\n    '\\u0231': 'o',\n    '\\u00F6': 'o',\n    '\\u022B': 'o',\n    '\\u1ECF': 'o',\n    '\\u0151': 'o',\n    '\\u01D2': 'o',\n    '\\u020D': 'o',\n    '\\u020F': 'o',\n    '\\u01A1': 'o',\n    '\\u1EDD': 'o',\n    '\\u1EDB': 'o',\n    '\\u1EE1': 'o',\n    '\\u1EDF': 'o',\n    '\\u1EE3': 'o',\n    '\\u1ECD': 'o',\n    '\\u1ED9': 'o',\n    '\\u01EB': 'o',\n    '\\u01ED': 'o',\n    '\\u00F8': 'o',\n    '\\u01FF': 'o',\n    '\\u0254': 'o',\n    '\\uA74B': 'o',\n    '\\uA74D': 'o',\n    '\\u0275': 'o',\n    '\\u01A3': 'oi',\n    '\\u0223': 'ou',\n    '\\uA74F': 'oo',\n    '\\u24DF': 'p',\n    '\\uFF50': 'p',\n    '\\u1E55': 'p',\n    '\\u1E57': 'p',\n    '\\u01A5': 'p',\n    '\\u1D7D': 'p',\n    '\\uA751': 'p',\n    '\\uA753': 'p',\n    '\\uA755': 'p',\n    '\\u24E0': 'q',\n    '\\uFF51': 'q',\n    '\\u024B': 'q',\n    '\\uA757': 'q',\n    '\\uA759': 'q',\n    '\\u24E1': 'r',\n    '\\uFF52': 'r',\n    '\\u0155': 'r',\n    '\\u1E59': 'r',\n    '\\u0159': 'r',\n    '\\u0211': 'r',\n    '\\u0213': 'r',\n    '\\u1E5B': 'r',\n    '\\u1E5D': 'r',\n    '\\u0157': 'r',\n    '\\u1E5F': 'r',\n    '\\u024D': 'r',\n    '\\u027D': 'r',\n    '\\uA75B': 'r',\n    '\\uA7A7': 'r',\n    '\\uA783': 'r',\n    '\\u24E2': 's',\n    '\\uFF53': 's',\n    '\\u00DF': 's',\n    '\\u015B': 's',\n    '\\u1E65': 's',\n    '\\u015D': 's',\n    '\\u1E61': 's',\n    '\\u0161': 's',\n    '\\u1E67': 's',\n    '\\u1E63': 's',\n    '\\u1E69': 's',\n    '\\u0219': 's',\n    '\\u015F': 's',\n    '\\u023F': 's',\n    '\\uA7A9': 's',\n    '\\uA785': 's',\n    '\\u1E9B': 's',\n    '\\u24E3': 't',\n    '\\uFF54': 't',\n    '\\u1E6B': 't',\n    '\\u1E97': 't',\n    '\\u0165': 't',\n    '\\u1E6D': 't',\n    '\\u021B': 't',\n    '\\u0163': 't',\n    '\\u1E71': 't',\n    '\\u1E6F': 't',\n    '\\u0167': 't',\n    '\\u01AD': 't',\n    '\\u0288': 't',\n    '\\u2C66': 't',\n    '\\uA787': 't',\n    '\\uA729': 'tz',\n    '\\u24E4': 'u',\n    '\\uFF55': 'u',\n    '\\u00F9': 'u',\n    '\\u00FA': 'u',\n    '\\u00FB': 'u',\n    '\\u0169': 'u',\n    '\\u1E79': 'u',\n    '\\u016B': 'u',\n    '\\u1E7B': 'u',\n    '\\u016D': 'u',\n    '\\u00FC': 'u',\n    '\\u01DC': 'u',\n    '\\u01D8': 'u',\n    '\\u01D6': 'u',\n    '\\u01DA': 'u',\n    '\\u1EE7': 'u',\n    '\\u016F': 'u',\n    '\\u0171': 'u',\n    '\\u01D4': 'u',\n    '\\u0215': 'u',\n    '\\u0217': 'u',\n    '\\u01B0': 'u',\n    '\\u1EEB': 'u',\n    '\\u1EE9': 'u',\n    '\\u1EEF': 'u',\n    '\\u1EED': 'u',\n    '\\u1EF1': 'u',\n    '\\u1EE5': 'u',\n    '\\u1E73': 'u',\n    '\\u0173': 'u',\n    '\\u1E77': 'u',\n    '\\u1E75': 'u',\n    '\\u0289': 'u',\n    '\\u24E5': 'v',\n    '\\uFF56': 'v',\n    '\\u1E7D': 'v',\n    '\\u1E7F': 'v',\n    '\\u028B': 'v',\n    '\\uA75F': 'v',\n    '\\u028C': 'v',\n    '\\uA761': 'vy',\n    '\\u24E6': 'w',\n    '\\uFF57': 'w',\n    '\\u1E81': 'w',\n    '\\u1E83': 'w',\n    '\\u0175': 'w',\n    '\\u1E87': 'w',\n    '\\u1E85': 'w',\n    '\\u1E98': 'w',\n    '\\u1E89': 'w',\n    '\\u2C73': 'w',\n    '\\u24E7': 'x',\n    '\\uFF58': 'x',\n    '\\u1E8B': 'x',\n    '\\u1E8D': 'x',\n    '\\u24E8': 'y',\n    '\\uFF59': 'y',\n    '\\u1EF3': 'y',\n    '\\u00FD': 'y',\n    '\\u0177': 'y',\n    '\\u1EF9': 'y',\n    '\\u0233': 'y',\n    '\\u1E8F': 'y',\n    '\\u00FF': 'y',\n    '\\u1EF7': 'y',\n    '\\u1E99': 'y',\n    '\\u1EF5': 'y',\n    '\\u01B4': 'y',\n    '\\u024F': 'y',\n    '\\u1EFF': 'y',\n    '\\u24E9': 'z',\n    '\\uFF5A': 'z',\n    '\\u017A': 'z',\n    '\\u1E91': 'z',\n    '\\u017C': 'z',\n    '\\u017E': 'z',\n    '\\u1E93': 'z',\n    '\\u1E95': 'z',\n    '\\u01B6': 'z',\n    '\\u0225': 'z',\n    '\\u0240': 'z',\n    '\\u2C6C': 'z',\n    '\\uA763': 'z',\n    '\\u0386': '\\u0391',\n    '\\u0388': '\\u0395',\n    '\\u0389': '\\u0397',\n    '\\u038A': '\\u0399',\n    '\\u03AA': '\\u0399',\n    '\\u038C': '\\u039F',\n    '\\u038E': '\\u03A5',\n    '\\u03AB': '\\u03A5',\n    '\\u038F': '\\u03A9',\n    '\\u03AC': '\\u03B1',\n    '\\u03AD': '\\u03B5',\n    '\\u03AE': '\\u03B7',\n    '\\u03AF': '\\u03B9',\n    '\\u03CA': '\\u03B9',\n    '\\u0390': '\\u03B9',\n    '\\u03CC': '\\u03BF',\n    '\\u03CD': '\\u03C5',\n    '\\u03CB': '\\u03C5',\n    '\\u03B0': '\\u03C5',\n    '\\u03C9': '\\u03C9',\n    '\\u03C2': '\\u03C3'\n  };\n\n  static strip(text: string): string {\n    const match = (a: string): string => {\n      return this.DIACRITICS[a] || a;\n    };\n    if (text) {\n      return text.replace(/[^\\u0000-\\u007E]/g, match);\n    } else {\n      return '';\n    }\n  }\n}\n","import { Option } from './option';\nimport { Diacritics } from './diacritics';\n\nexport class OptionList {\n  private _options: Array<Option>;\n\n  /* Consider using these for performance improvement. */\n  // private _selection: Array<Option>;\n  // private _filtered: Array<Option>;\n  // private _value: Array<string>;\n\n  private _highlightedOption: Option = null;\n  // v0 and v1 are assumed not to be undefined or null.\n  static equalValues(v0: Array<string>, v1: Array<string>): boolean {\n    if (v0.length !== v1.length) {\n      return false;\n    }\n\n    const a: Array<string> = v0.slice().sort();\n    const b: Array<string> = v1.slice().sort();\n\n    return a.every((v, i) => {\n      return v === b[i];\n    });\n  }\n\n  constructor(options: Array<any>) {\n    if (typeof options === 'undefined' || options === null) {\n      options = [];\n    }\n\n    this._options = options.map((option) => {\n      const o: Option = new Option(option.value, option.label);\n      if (option.disabled) {\n        o.disable();\n      }\n      return o;\n    });\n\n    this.highlight();\n  }\n\n  /** Options. **/\n\n  get options(): Array<Option> {\n    return this._options;\n  }\n\n  getOptionsByValue(value: string): Array<Option> {\n    return this.options.filter((option) => {\n      return option.value === value;\n    });\n  }\n\n  /** Value. **/\n\n  get value(): Array<string> {\n    return this.selection.map((selectedOption) => {\n      return selectedOption.value;\n    });\n  }\n\n  set value(v: Array<string>) {\n    v = typeof v === 'undefined' || v === null ? [] : v;\n\n    this.options.forEach((option) => {\n      option.selected = v.indexOf(option.value) > -1;\n    });\n  }\n\n  /** Selection. **/\n\n  get selection(): Array<Option> {\n    return this.options.filter((option) => {\n      return option.selected;\n    });\n  }\n\n  select(option: Option, multiple: boolean) {\n    if (!multiple) {\n      this.clearSelection();\n    }\n    option.selected = true;\n  }\n\n  deselect(option: Option) {\n    option.selected = false;\n  }\n\n  clearSelection() {\n    this.options.forEach((option) => {\n      option.selected = false;\n    });\n  }\n\n  /** Filter. **/\n\n  get filtered(): Array<Option> {\n    return this.options.filter((option) => {\n      return option.shown;\n    });\n  }\n\n  filter(term: string) {\n    if (term.trim() === '') {\n      this.resetFilter();\n    } else {\n      this.options.forEach((option) => {\n        const l: string = Diacritics.strip(option.label).toUpperCase();\n        const t: string = Diacritics.strip(term).toUpperCase();\n        option.shown = l.indexOf(t) > -1;\n      });\n    }\n\n    this.highlight();\n  }\n\n  resetFilter() {\n    this.options.forEach((option) => {\n      option.shown = true;\n    });\n  }\n\n  /** Highlight. **/\n\n  get highlightedOption(): Option {\n    return this._highlightedOption;\n  }\n\n  highlight() {\n    const option: Option = this.hasShownSelected()\n      ? this.getFirstShownSelected()\n      : this.getFirstShown();\n    this.highlightOption(option);\n  }\n\n  highlightOption(option: Option) {\n    this.clearHighlightedOption();\n\n    if (option !== null) {\n      option.highlighted = true;\n      this._highlightedOption = option;\n    }\n  }\n\n  highlightNextOption() {\n    const shownOptions = this.filtered;\n    const index = this.getHighlightedIndexFromList(shownOptions);\n\n    if (index > -1 && index < shownOptions.length - 1) {\n      this.highlightOption(shownOptions[index + 1]);\n    }\n  }\n\n  highlightPreviousOption() {\n    const shownOptions = this.filtered;\n    const index = this.getHighlightedIndexFromList(shownOptions);\n\n    if (index > 0) {\n      this.highlightOption(shownOptions[index - 1]);\n    }\n  }\n\n  private clearHighlightedOption() {\n    if (this.highlightedOption !== null) {\n      this.highlightedOption.highlighted = false;\n      this._highlightedOption = null;\n    }\n  }\n\n  private getHighlightedIndexFromList(options: Array<Option>) {\n    for (let i = 0; i < options.length; i++) {\n      if (options[i].highlighted) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  getHighlightedIndex() {\n    return this.getHighlightedIndexFromList(this.filtered);\n  }\n\n  /** Util. **/\n\n  hasShown() {\n    return this.options.some((option) => {\n      return option.shown;\n    });\n  }\n\n  hasSelected() {\n    return this.options.some((option) => {\n      return option.selected;\n    });\n  }\n\n  hasShownSelected() {\n    return this.options.some((option) => {\n      return option.shown && option.selected;\n    });\n  }\n\n  private getFirstShown(): Option {\n    for (const option of this.options) {\n      if (option.shown) {\n        return option;\n      }\n    }\n    return null;\n  }\n\n  private getFirstShownSelected(): Option {\n    for (const option of this.options) {\n      if (option.shown && option.selected) {\n        return option;\n      }\n    }\n    return null;\n  }\n}\n","import {\n  AfterViewInit,\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  EventEmitter,\n  ExistingProvider,\n  ViewChild,\n  ViewEncapsulation,\n  forwardRef\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { STYLE } from './select.component.style';\nimport { SelectDropdownComponent } from './select-dropdown.component';\nimport { Option } from './option';\nimport { OptionList } from './option-list';\n\nexport const SELECT_VALUE_ACCESSOR: ExistingProvider = {\n  provide: NG_VALUE_ACCESSOR,\n  // tslint:disable:no-use-before-declare\n  useExisting: forwardRef(() => SelectComponent),\n  multi: true\n};\n\n@Component({\n  selector: 'ng-select',\n  template: `<div\n  #selection\n  [attr.tabindex]=\"disabled ? null : 0\"\n  [ngClass]=\"{\n    open: isOpen,\n    focus: hasFocus,\n    below: isBelow,\n    disabled: disabled\n  }\"\n  (click)=\"onSelectContainerClick($event)\"\n  (focus)=\"onSelectContainerFocus()\"\n  (keydown)=\"onSelectContainerKeydown($event)\"\n  (window:click)=\"onWindowClick()\"\n  (window:resize)=\"onWindowResize()\"\n>\n  <div class=\"single\" *ngIf=\"!multiple\">\n    <div class=\"value\" *ngIf=\"optionList.hasSelected()\">\n      {{ optionList.selection[0].label }}\n    </div>\n    <div class=\"placeholder\" *ngIf=\"!optionList.hasSelected()\">\n      {{ placeholderView }}\n    </div>\n    <div\n      class=\"clear\"\n      *ngIf=\"allowClear\"\n      (click)=\"onClearSelectionClick($event)\"\n    >\n      &#x2715;\n    </div>\n    <div class=\"toggle\" *ngIf=\"isOpen\">&#x25B2;</div>\n    <div class=\"toggle\" *ngIf=\"!isOpen\">&#x25BC;</div>\n  </div>\n\n  <div class=\"multiple\" *ngIf=\"multiple\">\n    <div class=\"option\" *ngFor=\"let option of optionList.selection\">\n      <span class=\"deselect-option\" (click)=\"onDeselectOptionClick(option)\">\n        &#x2715;\n      </span>\n      {{ option.label }}\n    </div>\n    <input\n      *ngIf=\"filterEnabled\"\n      #filterInput\n      tabindex=\"-1\"\n      [placeholder]=\"placeholderView\"\n      [ngStyle]=\"{ 'width.px': filterInputWidth }\"\n      (input)=\"onMultipleFilterInput($event)\"\n      (keydown)=\"onMultipleFilterKeydown($event)\"\n    />\n  </div>\n</div>\n<select-dropdown\n  *ngIf=\"isOpen\"\n  #dropdown\n  [multiple]=\"multiple\"\n  [optionList]=\"optionList\"\n  [notFoundMsg]=\"notFoundMsg\"\n  [highlightColor]=\"highlightColor\"\n  [highlightTextColor]=\"highlightTextColor\"\n  [filterEnabled]=\"filterEnabled\"\n  [width]=\"width\"\n  [top]=\"top\"\n  [left]=\"left\"\n  (close)=\"onDropdownClose($event)\"\n  (optionClicked)=\"onDropdownOptionClicked($event)\"\n  (singleFilterClick)=\"onSingleFilterClick()\"\n  (singleFilterInput)=\"onSingleFilterInput($event)\"\n  (singleFilterKeydown)=\"onSingleFilterKeydown($event)\"\n>\n</select-dropdown>\n`,\n  styles: [STYLE],\n  providers: [SELECT_VALUE_ACCESSOR],\n  encapsulation: ViewEncapsulation.None\n})\nexport class SelectComponent\n  implements AfterViewInit, ControlValueAccessor, OnChanges, OnInit {\n  /** Keys. **/\n\n  private KEYS: any = {\n    BACKSPACE: 8,\n    TAB: 9,\n    ENTER: 13,\n    ESC: 27,\n    SPACE: 32,\n    UP: 38,\n    DOWN: 40\n  };\n\n  @Input() options: Array<any>;\n\n  @Input() allowClear = false;\n  @Input() disabled = false;\n  @Input() highlightColor = '#2196f3';\n  @Input() highlightTextColor = '#fff';\n  @Input() multiple = false;\n  @Input() noFilter = 0;\n  @Input() notFoundMsg = 'No results found';\n  @Input() placeholder = '';\n\n  @Output() opened: EventEmitter<null> = new EventEmitter<null>();\n  @Output() closed: EventEmitter<null> = new EventEmitter<null>();\n  @Output() selected: EventEmitter<any> = new EventEmitter<any>();\n  @Output() deselected: EventEmitter<any> = new EventEmitter<any>();\n  @Output() typed: EventEmitter<any> = new EventEmitter<any>();\n\n  @ViewChild('selection') selectionSpan: any;\n  @ViewChild('dropdown') dropdown: SelectDropdownComponent;\n  @ViewChild('filterInput') filterInput: any;\n\n  private _value: Array<any> = [];\n  optionList: OptionList;\n\n  // Selection state variables.\n  hasSelected = false;\n\n  // View state variables.\n  filterEnabled = true;\n  filterInputWidth = 1;\n  hasFocus = false;\n  isBelow = true;\n  isDisabled = false;\n  isOpen = false;\n  placeholderView = '';\n\n  clearClicked = false;\n  selectContainerClicked = false;\n\n  // Width and position for the dropdown container.\n  width: number;\n  top: number;\n  left: number;\n\n  private onChange = (_: any) => {};\n  private onTouched = () => {};\n\n  /** Event handlers. **/\n\n  // Angular lifecycle hooks.\n\n  ngOnInit() {\n    this.placeholderView = this.placeholder;\n  }\n\n  ngAfterViewInit() {\n    this.updateFilterWidth();\n  }\n\n  ngOnChanges(changes: any) {\n    if (changes.hasOwnProperty('options')) {\n      this.updateOptionsList(changes['options'].isFirstChange());\n    }\n    if (changes.hasOwnProperty('noFilter')) {\n      const numOptions: number = this.optionList.options.length;\n      const minNumOptions: number = changes['noFilter'].currentValue;\n      this.filterEnabled = numOptions >= minNumOptions;\n    }\n  }\n\n  // Window.\n\n  onWindowClick() {\n    if (!this.selectContainerClicked) {\n      this.closeDropdown();\n    }\n    this.clearClicked = false;\n    this.selectContainerClicked = false;\n  }\n\n  onWindowResize() {\n    this.updateWidth();\n  }\n\n  // Select container.\n\n  onSelectContainerClick(event: any) {\n    this.selectContainerClicked = true;\n    if (!this.clearClicked) {\n      this.toggleDropdown();\n    }\n  }\n\n  onSelectContainerFocus() {\n    this.onTouched();\n  }\n\n  onSelectContainerKeydown(event: any) {\n    this.handleSelectContainerKeydown(event);\n  }\n\n  // Dropdown container.\n\n  onDropdownOptionClicked(option: Option) {\n    this.multiple ? this.toggleSelectOption(option) : this.selectOption(option);\n  }\n\n  onDropdownClose(focus: any) {\n    this.closeDropdown(focus);\n  }\n\n  // Single filter input.\n\n  onSingleFilterClick() {\n    this.selectContainerClicked = true;\n  }\n\n  onSingleFilterInput(term: string) {\n    setTimeout(() => {\n      if (term.length > 2) {\n        this.typed.emit(term);\n      }\n    }, 500);\n    this.optionList.filter(term);\n  }\n\n  onSingleFilterKeydown(event: any) {\n    this.handleSingleFilterKeydown(event);\n  }\n\n  // Multiple filter input.\n\n  onMultipleFilterInput(event: any) {\n    if (!this.isOpen) {\n      this.openDropdown();\n    }\n    this.updateFilterWidth();\n    setTimeout(() => {\n      this.optionList.filter(event.target.value);\n    });\n  }\n\n  onMultipleFilterKeydown(event: any) {\n    this.handleMultipleFilterKeydown(event);\n  }\n\n  // Single clear select.\n\n  onClearSelectionClick(event: any) {\n    this.clearClicked = true;\n    this.clearSelection();\n    this.closeDropdown(true);\n  }\n\n  // Multiple deselect option.\n\n  onDeselectOptionClick(option: Option) {\n    this.clearClicked = true;\n    this.deselectOption(option);\n  }\n\n  /** API. **/\n\n  // TODO fix issues with global click/key handler that closes the dropdown.\n  open() {\n    this.openDropdown();\n  }\n\n  close() {\n    this.closeDropdown();\n  }\n\n  clear() {\n    this.clearSelection();\n  }\n\n  select(value: string) {\n    this.optionList.getOptionsByValue(value).forEach((option) => {\n      this.selectOption(option);\n    });\n    this.valueChanged();\n  }\n\n  /** ControlValueAccessor interface methods. **/\n\n  writeValue(value: any) {\n    this.value = value;\n  }\n\n  registerOnChange(fn: (_: any) => void) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean) {\n    this.disabled = isDisabled;\n  }\n\n  /** Value. **/\n\n  get value(): any {\n    if (this._value.length === 0) {\n      return '';\n    } else {\n      return this.multiple ? this._value : this._value[0];\n    }\n  }\n\n  set value(v: any) {\n    if (typeof v === 'undefined' || v === null || v === '') {\n      v = [];\n    } else if (typeof v === 'string') {\n      v = [v];\n    } else if (!Array.isArray(v)) {\n      throw new TypeError('Value must be a string or an array.');\n    }\n\n    if (!OptionList.equalValues(v, this._value)) {\n      this.optionList.value = v;\n      this.valueChanged();\n    }\n  }\n\n  private valueChanged() {\n    this._value = this.optionList.value;\n\n    this.hasSelected = this._value.length > 0;\n    this.placeholderView = this.hasSelected ? '' : this.placeholder;\n    this.updateFilterWidth();\n\n    this.onChange(this.value);\n  }\n\n  /** Initialization. **/\n\n  private updateOptionsList(firstTime: boolean) {\n    let v: Array<string>;\n\n    if (!firstTime) {\n      v = this.optionList.value;\n    }\n\n    this.optionList = new OptionList(this.options);\n\n    if (!firstTime) {\n      this.optionList.value = v;\n      this.valueChanged();\n    }\n  }\n\n  /** Dropdown. **/\n\n  private toggleDropdown() {\n    if (!this.isDisabled) {\n      this.isOpen ? this.closeDropdown(true) : this.openDropdown();\n    }\n  }\n\n  private openDropdown() {\n    if (!this.isOpen) {\n      this.updateWidth();\n      this.updatePosition();\n      this.isOpen = true;\n      if (this.multiple && this.filterEnabled) {\n        this.filterInput.nativeElement.focus();\n      }\n      this.opened.emit(null);\n    }\n  }\n  /* tslint:disable */\n  private closeDropdown(focus: boolean = false) {\n    if (this.isOpen) {\n      this.clearFilterInput();\n      this.isOpen = false;\n      if (focus) {\n        this.focus();\n      }\n      this.closed.emit(null);\n    }\n  }\n  /* tslint:enable */\n  /** Select. **/\n\n  private selectOption(option: Option) {\n    if (!option.selected) {\n      this.optionList.select(option, this.multiple);\n      this.valueChanged();\n      this.selected.emit(option.undecoratedCopy());\n      // Is this not allready done when setting the value??\n      /*setTimeout(() => {\n                if (this.multiple) {\n                    this.updateFilterWidth();\n                }\n            });*/\n    }\n  }\n\n  private deselectOption(option: Option) {\n    if (option.selected) {\n      this.optionList.deselect(option);\n      this.valueChanged();\n      this.deselected.emit(option.undecoratedCopy());\n      setTimeout(() => {\n        if (this.multiple) {\n          // this.updateFilterWidth();\n          this.updatePosition();\n          this.optionList.highlight();\n          if (this.isOpen) {\n            this.dropdown.moveHighlightedIntoView();\n          }\n        }\n      });\n    }\n  }\n\n  private clearSelection() {\n    const selection: Array<Option> = this.optionList.selection;\n    if (selection.length > 0) {\n      this.optionList.clearSelection();\n      this.valueChanged();\n\n      if (selection.length === 1) {\n        this.deselected.emit(selection[0].undecoratedCopy());\n      } else {\n        this.deselected.emit(\n          selection.map((option) => {\n            return option.undecoratedCopy();\n          })\n        );\n      }\n    }\n  }\n\n  private toggleSelectOption(option: Option) {\n    option.selected ? this.deselectOption(option) : this.selectOption(option);\n  }\n\n  private selectHighlightedOption() {\n    const option: Option = this.optionList.highlightedOption;\n    if (option !== null) {\n      this.selectOption(option);\n      this.closeDropdown(true);\n    }\n  }\n\n  private deselectLast() {\n    const sel: Array<Option> = this.optionList.selection;\n\n    if (sel.length > 0) {\n      const option: Option = sel[sel.length - 1];\n      this.deselectOption(option);\n      this.setMultipleFilterInput(option.label + ' ');\n    }\n  }\n\n  /** Filter. **/\n\n  private clearFilterInput() {\n    if (this.multiple && this.filterEnabled) {\n      this.filterInput.nativeElement.value = '';\n    } else {\n      this.dropdown.clearFilterInput();\n    }\n  }\n\n  private setMultipleFilterInput(value: string) {\n    if (this.filterEnabled) {\n      this.filterInput.nativeElement.value = value;\n    }\n  }\n\n  private handleSelectContainerKeydown(event: any) {\n    const key = event.which;\n\n    if (this.isOpen) {\n      if (key === this.KEYS.ESC || (key === this.KEYS.UP && event.altKey)) {\n        this.closeDropdown(true);\n      } else if (key === this.KEYS.TAB) {\n        this.closeDropdown();\n      } else if (key === this.KEYS.ENTER) {\n        this.selectHighlightedOption();\n      } else if (key === this.KEYS.UP) {\n        this.optionList.highlightPreviousOption();\n        this.dropdown.moveHighlightedIntoView();\n        if (!this.filterEnabled) {\n          event.preventDefault();\n        }\n      } else if (key === this.KEYS.DOWN) {\n        this.optionList.highlightNextOption();\n        this.dropdown.moveHighlightedIntoView();\n        if (!this.filterEnabled) {\n          event.preventDefault();\n        }\n      }\n    } else {\n      if (\n        key === this.KEYS.ENTER ||\n        key === this.KEYS.SPACE ||\n        (key === this.KEYS.DOWN && event.altKey)\n      ) {\n        /* FIREFOX HACK:\n         *\n         * The setTimeout is added to prevent the enter keydown event\n         * to be triggered for the filter input field, which causes\n         * the dropdown to be closed again.\n         */\n        setTimeout(() => {\n          this.openDropdown();\n        });\n      }\n    }\n  }\n\n  private handleMultipleFilterKeydown(event: any) {\n    const key = event.which;\n\n    if (key === this.KEYS.BACKSPACE) {\n      if (\n        this.hasSelected &&\n        this.filterEnabled &&\n        this.filterInput.nativeElement.value === ''\n      ) {\n        this.deselectLast();\n      }\n    }\n  }\n\n  private handleSingleFilterKeydown(event: any) {\n    const key = event.which;\n\n    if (\n      key === this.KEYS.ESC ||\n      key === this.KEYS.TAB ||\n      key === this.KEYS.UP ||\n      key === this.KEYS.DOWN ||\n      key === this.KEYS.ENTER\n    ) {\n      this.handleSelectContainerKeydown(event);\n    }\n  }\n\n  /** View. **/\n\n  focus() {\n    this.hasFocus = true;\n    if (this.multiple && this.filterEnabled) {\n      this.filterInput.nativeElement.focus();\n    } else {\n      this.selectionSpan.nativeElement.focus();\n    }\n  }\n\n  blur() {\n    this.hasFocus = false;\n    this.selectionSpan.nativeElement.blur();\n  }\n\n  updateWidth() {\n    this.width = this.selectionSpan.nativeElement.offsetWidth;\n  }\n\n  updatePosition() {\n    const e = this.selectionSpan.nativeElement;\n    this.left = e.offsetLeft;\n    this.top = e.offsetTop + e.offsetHeight;\n  }\n\n  updateFilterWidth() {\n    if (typeof this.filterInput !== 'undefined') {\n      const value: string = this.filterInput.nativeElement.value;\n      this.filterInputWidth =\n        value.length === 0\n          ? 1 + this.placeholderView.length * 10\n          : 1 + value.length * 10;\n    }\n  }\n}\n","export const STYLE = `select-dropdown {\n  box-sizing: border-box;\n  font-family: Sans-Serif;\n}\nselect-dropdown * {\n  box-sizing: border-box;\n  font-family: Sans-Serif;\n}\nselect-dropdown > div {\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-top: none;\n  box-sizing: border-box;\n  position: absolute;\n  z-index: 1;\n}\nselect-dropdown > div .filter {\n  padding: 3px;\n  width: 100%;\n}\nselect-dropdown > div .filter input {\n  border: 1px solid #eee;\n  box-sizing: border-box;\n  padding: 4px;\n  width: 100%;\n}\nselect-dropdown > div .options {\n  max-height: 200px;\n  overflow-y: auto;\n}\nselect-dropdown > div .options ul {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\nselect-dropdown > div .options ul li {\n  padding: 4px 8px;\n  cursor: pointer;\n  user-select: none;\n}\nselect-dropdown .selected {\n  background-color: #e0e0e0;\n}\nselect-dropdown .selected.highlighted {\n  background-color: #2196F3;\n  color: #fff;\n}\nselect-dropdown .highlighted {\n  background-color: #2196F3;\n  color: #fff;\n}\nselect-dropdown .disabled {\n  background-color: #fff;\n  color: #9e9e9e;\n  cursor: default;\n  pointer-events: none;\n}`;\n","import {\n  AfterViewInit,\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport { STYLE } from './select-dropdown.component.style';\nimport { Option } from './option';\nimport { OptionList } from './option-list';\n\n@Component({\n  selector: 'select-dropdown',\n  template: `<div [ngStyle]=\"{ 'top.px': top, 'left.px': left, 'width.px': width }\">\n  <div class=\"filter\" *ngIf=\"!multiple\">\n    <input\n      *ngIf=\"filterEnabled\"\n      #filterInput\n      (click)=\"onSingleFilterClick($event)\"\n      (input)=\"onSingleFilterInput($event)\"\n      (keydown)=\"onSingleFilterKeydown($event)\"\n    />\n  </div>\n\n  <div class=\"options\" #optionsList>\n    <ul (wheel)=\"onOptionsWheel($event)\">\n      <li\n        *ngFor=\"let option of optionList.filtered\"\n        [ngClass]=\"{\n          highlighted: option.highlighted,\n          selected: option.selected,\n          disabled: option.disabled\n        }\"\n        [ngStyle]=\"getOptionStyle(option)\"\n        (click)=\"onOptionClick(option)\"\n        (mouseover)=\"onOptionMouseover(option)\"\n      >\n        {{ option.label }}\n      </li>\n      <li *ngIf=\"!optionList.hasShown()\" class=\"message\">\n        {{ notFoundMsg }}\n      </li>\n    </ul>\n  </div>\n</div>\n`,\n  styles: [STYLE],\n  encapsulation: ViewEncapsulation.None\n})\nexport class SelectDropdownComponent\n  implements AfterViewInit, OnChanges, OnInit {\n  @Input() filterEnabled: boolean;\n  @Input() highlightColor: string;\n  @Input() highlightTextColor: string;\n  @Input() left: number;\n  @Input() multiple: boolean;\n  @Input() notFoundMsg: string;\n  @Input() optionList: OptionList;\n  @Input() top: number;\n  @Input() width: number;\n\n  @Output() close = new EventEmitter<boolean>();\n  @Output() optionClicked = new EventEmitter<Option>();\n  @Output() singleFilterClick = new EventEmitter<null>();\n  @Output() singleFilterInput = new EventEmitter<string>();\n  @Output() singleFilterKeydown = new EventEmitter<any>();\n\n  @ViewChild('filterInput') filterInput: any;\n  @ViewChild('optionsList') optionsList: any;\n\n  disabledColor = '#fff';\n  disabledTextColor = '9e9e9e';\n\n  /** Event handlers. **/\n\n  // Angular life cycle hooks.\n\n  ngOnInit() {\n    this.optionsReset();\n  }\n\n  ngOnChanges(changes: any) {\n    if (changes.hasOwnProperty('optionList')) {\n      this.optionsReset();\n    }\n  }\n\n  ngAfterViewInit() {\n    this.moveHighlightedIntoView();\n    if (!this.multiple && this.filterEnabled) {\n      this.filterInput.nativeElement.focus();\n    }\n  }\n\n  // Filter input (single select).\n\n  onSingleFilterClick(event: any) {\n    this.singleFilterClick.emit(null);\n  }\n\n  onSingleFilterInput(event: any) {\n    this.singleFilterInput.emit(event.target.value);\n  }\n\n  onSingleFilterKeydown(event: any) {\n    this.singleFilterKeydown.emit(event);\n  }\n\n  // Options list.\n\n  onOptionsWheel(event: any) {\n    this.handleOptionsWheel(event);\n  }\n\n  onOptionMouseover(option: Option) {\n    this.optionList.highlightOption(option);\n  }\n\n  onOptionClick(option: Option) {\n    this.optionClicked.emit(option);\n  }\n\n  /** Initialization. **/\n\n  private optionsReset() {\n    this.optionList.resetFilter();\n    this.optionList.highlight();\n  }\n\n  /** View. **/\n\n  getOptionStyle(option: Option): any {\n    if (option.highlighted) {\n      return {\n        'background-color': this.highlightColor,\n        color: this.highlightTextColor\n      };\n    } else {\n      return {};\n    }\n  }\n\n  clearFilterInput() {\n    if (this.filterEnabled) {\n      this.filterInput.nativeElement.value = '';\n    }\n  }\n\n  moveHighlightedIntoView() {\n    const list = this.optionsList.nativeElement;\n    const listHeight = list.offsetHeight;\n\n    const itemIndex = this.optionList.getHighlightedIndex();\n\n    if (itemIndex > -1) {\n      const item = list.children[0].children[itemIndex];\n      const itemHeight = item.offsetHeight;\n\n      const itemTop = itemIndex * itemHeight;\n      const itemBottom = itemTop + itemHeight;\n\n      const viewTop = list.scrollTop;\n      const viewBottom = viewTop + listHeight;\n\n      if (itemBottom > viewBottom) {\n        list.scrollTop = itemBottom - listHeight;\n      } else if (itemTop < viewTop) {\n        list.scrollTop = itemTop;\n      }\n    }\n  }\n\n  private handleOptionsWheel(e: any) {\n    const div = this.optionsList.nativeElement;\n    const atTop = div.scrollTop === 0;\n    const atBottom = div.offsetHeight + div.scrollTop === div.scrollHeight;\n\n    if (atTop && e.deltaY < 0) {\n      e.preventDefault();\n    } else if (atBottom && e.deltaY > 0) {\n      e.preventDefault();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { SelectComponent } from './select.component';\nimport { SelectDropdownComponent } from './select-dropdown.component';\n\n@NgModule({\n  declarations: [SelectComponent, SelectDropdownComponent],\n  exports: [SelectComponent],\n  imports: [CommonModule, FormsModule]\n})\nexport class SelectModule {}\n","import {\n  Pipe,\n  PipeTransform,\n  OnDestroy,\n  WrappedValue,\n  ChangeDetectorRef\n} from '@angular/core';\nimport { of } from 'rxjs';\n\nimport { Subscription } from 'rxjs';\nimport { Observable } from 'rxjs';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { DomSanitizer } from '@angular/platform-browser';\n// import { FileUploadResourceService } from '../../etl-api/file-upload-resource.service';\n\n// Using similarity from AsyncPipe to avoid having to pipe |secure|async in HTML.\n// tslint:disable-next-line:use-pipe-transform-interface\n@Pipe({\n  name: 'secure',\n  pure: false\n})\nexport class SecurePipe implements PipeTransform, OnDestroy {\n  private _latestValue: any = null;\n  private _latestReturnedValue: any = null;\n  private _subscription: Subscription = null;\n  private _obj: Observable<any> = null;\n  private getfile;\n  private previousUrl: string;\n  private _result: BehaviorSubject<any> = new BehaviorSubject(null);\n  private result: Observable<any> = this._result.asObservable();\n  private _internalSubscription: Subscription = null;\n\n  constructor(\n    private _ref: ChangeDetectorRef,\n    private sanitizer: DomSanitizer\n  ) {}\n\n  ngOnDestroy(): void {\n    if (this._subscription) {\n      this._dispose();\n    }\n  }\n\n  transform(url: string, getfile): any {\n    this.getfile = getfile;\n    const obj = this.internalTransform(url);\n    return this.asyncTrasnform(obj);\n  }\n\n  private internalTransform(url: string): Observable<any> {\n    if (!url) {\n      return this.result;\n    }\n\n    if (this.previousUrl !== url) {\n      this.previousUrl = url;\n      this._internalSubscription = this.getfile(url).subscribe((m) => {\n        const sanitized = this.sanitizer.bypassSecurityTrustUrl(m);\n        this._result.next(sanitized);\n      });\n    }\n\n    return this.result;\n  }\n\n  private asyncTrasnform(obj: Observable<any>): any {\n    if (!this._obj) {\n      if (obj) {\n        this._subscribe(obj);\n      }\n      this._latestReturnedValue = this._latestValue;\n      return this._latestValue;\n    }\n    if (obj !== this._obj) {\n      this._dispose();\n      return this.asyncTrasnform(obj);\n    }\n    if (this._latestValue === this._latestReturnedValue) {\n      return this._latestReturnedValue;\n    }\n    this._latestReturnedValue = this._latestValue;\n    return WrappedValue.wrap(this._latestValue);\n  }\n\n  private _subscribe(obj: Observable<any>) {\n    const _this = this;\n    this._obj = obj;\n\n    this._subscription = obj.subscribe({\n      next: function (value) {\n        return _this._updateLatestValue(obj, value);\n      },\n      error: (e: any) => {\n        throw e;\n      }\n    });\n  }\n\n  private _dispose() {\n    if (this._subscription) {\n      this._subscription.unsubscribe();\n    }\n    if (this._internalSubscription) {\n      this._internalSubscription.unsubscribe();\n    }\n\n    this._internalSubscription = null;\n    this._latestValue = null;\n    this._latestReturnedValue = null;\n    this._subscription = null;\n    this._obj = null;\n  }\n\n  private _updateLatestValue(async: any, value: Object) {\n    if (async === this._obj) {\n      this._latestValue = value;\n      this._ref.markForCheck();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SecurePipe } from './components/file-upload/secure.pipe';\nimport { DataSources } from './form-entry/data-sources/data-sources';\n@NgModule({\n  declarations: [SecurePipe],\n  imports: [CommonModule],\n  exports: [SecurePipe],\n  providers: [DataSources]\n})\nexport class SharedModule {}\n","import {\n  Component,\n  OnInit,\n  Input,\n  forwardRef,\n  Renderer2,\n  ChangeDetectorRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { DataSource } from '../../form-entry/question-models/interfaces/data-source';\nimport { SecurePipe } from './secure.pipe';\n@Component({\n  selector: 'app-file-upload',\n  template: `<lib-file-uploader\n  [srcUrl]=\"pdfUrl\"\n  [formEntry]=\"formEntryMode\"\n  [(ngModel)]=\"fileUuid\"\n  (_onClear)=\"clearValue()\"\n  (uploadData)=\"onFileChange($event)\"\n>\n</lib-file-uploader>\n<div *ngIf=\"fileUuid\">\n  <img\n    *ngIf=\"!pdfUploaded\"\n    class=\"img-responsive\"\n    [src]=\"fileUuid | secure: this.dataSource.fetchFile\"\n    alt=\"\"\n  />\n</div>\n`,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FileUploadComponent),\n      multi: true\n    }\n  ],\n  styles: [\n    `\n      img {\n        margin-left: auto;\n        margin-right: auto;\n        display: block;\n      }\n    `\n  ]\n})\nexport class FileUploadComponent implements OnInit, ControlValueAccessor {\n  uploading = false;\n  fileUuid = null;\n  pdfUploaded = false;\n  formEntryMode = true;\n  pdfUrl: string;\n  private _dataSource: DataSource;\n  @Input()\n  public get dataSource(): DataSource {\n    return this._dataSource;\n  }\n  public set dataSource(v: DataSource) {\n    this._dataSource = v;\n  }\n\n  constructor(private renderer: Renderer2) {}\n\n  ngOnInit() {\n    if (this.fileUuid) {\n      this.checkFileType();\n    }\n  }\n  public onFileChange(fileList) {\n    for (const file of fileList) {\n      this.upload(file);\n    }\n  }\n  upload(data) {\n    if (this.dataSource) {\n      this.uploading = true;\n      this.dataSource.fileUpload(data).subscribe(\n        (result) => {\n          this.fileUuid = result.image;\n          this.checkFileType();\n          this.propagateChange(this.fileUuid);\n          this.uploading = false;\n        },\n        (error) => {\n          this.uploading = false;\n        }\n      );\n    }\n  }\n\n  // this is the initial value set to the component\n  public writeValue(value: any) {\n    if (value !== this.fileUuid) {\n      this.fileUuid = value;\n      this.checkFileType();\n    }\n  }\n  // registers 'fn' that will be fired when changes are made\n  // this is how we emit the changes back to the form\n  public registerOnChange(fn: any) {\n    this.propagateChange = fn;\n  }\n\n  // not used, used for touch input\n  public registerOnTouched() {}\n  // change events from the textarea\n  onChange(event) {\n    this.propagateChange(event.id);\n    // .....\n    // update the form\n    // this.propagateChange(this.data);\n  }\n\n  // the method set in registerOnChange, it is just\n  // a placeholder for a method that takes one parameter,\n  // we use it to emit changes back to the form\n  private propagateChange = (_: any) => {};\n\n  public clearValue() {\n    this.fileUuid = null;\n    this.pdfUploaded = false;\n    this.pdfUrl = null;\n    this.propagateChange(this.fileUuid);\n  }\n\n  public getPdfUrl(fileUuid: string) {\n    this.dataSource.fetchFile(fileUuid, 'pdf').subscribe((file) => {\n      this.pdfUploaded = true;\n      this.pdfUrl = file.changingThisBreaksApplicationSecurity;\n    });\n  }\n  public checkFileType() {\n    const re = /pdf/gi;\n    if (this.fileUuid.search(re) !== -1) {\n      this.getPdfUrl(this.fileUuid);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FormsModule } from '@angular/forms';\nimport { NgxFileUploaderModule } from 'ngx-file-uploader';\n\nimport { SharedModule } from '../../shared.module';\n// import { SelectModule } from 'ng2-select/ng2-select';\nimport { SelectModule } from '../../components/select/select.module';\nimport { FileUploadComponent } from './file-upload.component';\nimport { WebcamModule } from 'ngx-webcam';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SelectModule,\n    FormsModule,\n    SharedModule,\n    WebcamModule,\n    NgxFileUploaderModule\n  ],\n  exports: [FileUploadComponent],\n  declarations: [FileUploadComponent],\n  providers: []\n})\nexport class RemoteFileUploadModule {}\n","/**\n * date-picker.component\n */\n\nimport { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\nimport * as _ from 'lodash';\nimport { Moment } from 'moment/moment';\n\n// webpack1_\ndeclare let require: any;\n// const myDpStyles: string = require('./date-picker.component.css');\n// const myDpTpl: string = require('./date-picker.component.html');\n// webpack2_\n\n@Component({\n  selector: 'date-picker',\n  template: `<picker-modal (onOverlayClick)=\"cancelDatePicker()\">\n  <div class=\"picker-wrap\">\n    <div class=\"picker-box\">\n      <div class=\"picker-header\">\n        <div class=\"picker-header-nav\">\n          <span class=\"nav-prev\" (click)=\"prev()\"></span>\n        </div>\n        <div class=\"picker-header-content\">\n          <div class=\"content\">\n            <span (click)=\"showMonthSelection()\" class=\"month\">{{\n              calendarDate | moment: 'MMMM'\n            }}</span>\n            <span class=\"seperator\">|</span>\n            <span (click)=\"showYearSelection()\" class=\"year\">{{\n              calendarDate | moment: 'YYYY'\n            }}</span>\n          </div>\n        </div>\n        <div class=\"picker-header-nav\">\n          <span class=\"nav-next\" (click)=\"next()\"></span>\n        </div>\n      </div>\n      <div class=\"picker-calendar\">\n        <div\n          class=\"picker-calendar-row\"\n          *ngIf=\"!onDisplayMonths && !onDisplayYears\"\n        >\n          <span class=\"picker-weekday\" *ngFor=\"let day of dayNames\">{{\n            day\n          }}</span>\n        </div>\n        <div\n          class=\"picker-calendar-row\"\n          *ngIf=\"!onDisplayMonths && !onDisplayYears\"\n        >\n          <span\n            class=\"picker-day\"\n            (click)=\"selectDay(day)\"\n            [ngClass]=\"{\n              'out-focus': day.month() != calendarDate.month(),\n              today: day.isSame(today),\n              selected: day.isSame(selectedDate)\n            }\"\n            *ngFor=\"let day of calendarDays\"\n          >\n            {{ day | moment: 'D' }}\n          </span>\n        </div>\n        <div class=\"picker-calendar-row\" *ngIf=\"onDisplayMonths\">\n          <span\n            class=\"picker-month\"\n            *ngFor=\"let month of monthsShort\"\n            (click)=\"selectMonth(month)\"\n            [ngClass]=\"{\n              selected: month === currentMonth\n            }\"\n          >\n            {{ month }}\n          </span>\n        </div>\n        <div class=\"picker-calendar-row\" *ngIf=\"onDisplayYears\">\n          <span\n            class=\"picker-year\"\n            *ngFor=\"let year of displayYearRange\"\n            (click)=\"selectYear(year)\"\n            [ngClass]=\"{\n              selected: year === currentYear\n            }\"\n          >\n            {{ year }}\n          </span>\n        </div>\n      </div>\n      <div class=\"picker-footer\">\n        <div class=\"picker-action action-today\" (click)=\"selectToday()\">\n          <span class=\"text\">Today</span>\n        </div>\n        <div class=\"picker-action action-clear\" (click)=\"clearPickDate()\">\n          <span class=\"text\">Clear</span>\n        </div>\n        <div class=\"picker-action action-close\" (click)=\"cancelDatePicker()\">\n          <span class=\"text\">Close</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</picker-modal>\n`,\n  styles: [`*,::after,::before{box-sizing:border-box}.picker-wrap{width:95vw;max-width:666px}.picker-box{font-family:'Open Sans';min-width:400px!important;padding:.625rem 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.picker-footer,.picker-header{font-size:1.333rem;line-height:2.5rem;display:flex;height:2.5rem;width:100%}.picker-header-nav{position:relative;cursor:pointer;width:calc(100% / 8)}.picker-header-nav>*{position:absolute;top:50%;right:auto;bottom:auto;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.picker-header-nav .nav-next::before,.picker-header-nav .nav-prev::before{content:' ';border-top:.5em solid transparent;border-bottom:.5em solid transparent;border-right:.75em solid #000;width:0;height:0;display:block;margin:0 auto}.picker-header-nav .nav-next::before{border-right:0;border-left:.75em solid #000}.picker-header-content{width:calc(100% * 6 / 8);text-align:center}.picker-header-content .month{font-size:1.778rem;line-height:2.5rem;margin-right:.5rem;font-weight:700}.picker-header-content .year{font-style:italic;color:#999}.picker-calendar{width:100%}.picker-calendar .picker-calendar-row{display:flex;flex-wrap:wrap;width:100%;margin-bottom:.625rem}.picker-calendar .picker-weekday{font-weight:700;text-align:left;color:#999;width:calc(100% / 7)}.picker-calendar .picker-day,.picker-calendar .picker-month,.picker-calendar .picker-year{font-size:1.333rem;line-height:2.5rem;position:relative;height:2.5rem;text-align:center;cursor:pointer;width:calc(100% / 7)}.picker-calendar .picker-day:hover,.picker-calendar .picker-month:hover,.picker-calendar .picker-year:hover{background:#b1dcfb}.picker-calendar .out-focus{color:#ddd}.picker-calendar .out-focus:hover{color:#000}.picker-calendar .selected{background:#0089ec;color:#fff}.picker-calendar .selected:hover{background:#0089ec}.picker-calendar .today::before{content:' ';position:absolute;top:2px;right:2px;width:0;height:0;border-top:.5em solid #0059bc;border-left:.5em solid transparent}.picker-footer{cursor:pointer}.picker-footer .picker-action{text-align:center;width:calc(100% / 3)}.picker-footer .picker-action:hover{background-color:#b1dcfb}.picker-footer .picker-action .text{padding-left:.8rem}.picker-footer .action-clear::before,.picker-footer .action-close::before,.picker-footer .action-today::before{content:' ';position:relative;display:inline-block;height:0;width:0}.picker-footer .action-today::before{border-top:.66em solid #0059bc;border-left:.66em solid transparent}.picker-footer .action-clear::before{top:-.5rem;width:1rem;border-top:3px solid #e20}.picker-footer .action-close::before{width:1rem;height:1rem;background:linear-gradient(to bottom,transparent 35%,#777 35%,#777 65%,transparent 65%),linear-gradient(to right,transparent 35%,#777 35%,#777 65%,transparent 65%);-webkit-transform:rotate(45deg);transform:rotate(45deg)}`]\n})\nexport class DatePickerComponent implements OnInit {\n  public dayNames: Array<string>;\n\n  @Input() public initDate: any;\n  @Input() public locale = 'en';\n  @Input() public viewFormat = 'll';\n  @Input() public returnObject = 'js';\n  @Output() public onDatePickerCancel = new EventEmitter<boolean>();\n  @Output() public onSelectDate = new EventEmitter<any>();\n\n  public calendarDate: Moment;\n  public selectedDate: Moment;\n  public currentMonth: any;\n  public today: Moment;\n  public currentYear: number;\n  public onDisplayMonths = false;\n  public onDisplayYears = false;\n  public displayYearsIndex = 0;\n  public displayYearRange: Array<number>;\n  public fullYearRange: Array<any>;\n  public monthsShort: Array<string> = moment.monthsShort();\n  public calendarDays: Array<Moment>;\n\n  constructor() {}\n\n  public ngOnInit(): void {\n    this.initValue();\n    // default to current year range\n    _.each(this.fullYearRange, (v, i) => {\n      this.currentYear = this.calendarDate.clone().startOf('year').year();\n      if (v.indexOf(this.currentYear) !== -1) {\n        this.displayYearsIndex = i;\n      }\n    });\n    this.displayYearRange = this.fullYearRange[this.displayYearsIndex];\n    this.generateCalendar();\n  }\n\n  public prev(): void {\n    if (this.onDisplayYears) {\n      this.displayYearsIndex--;\n      if (this.displayYearsIndex < 0) {\n        this.displayYearsIndex = 0;\n      }\n      this.displayYearRange = this.fullYearRange[this.displayYearsIndex];\n    } else {\n      this.calendarDate = this.calendarDate.clone().subtract(1, 'M');\n    }\n    this.generateCalendar();\n  }\n\n  public showMonthSelection(): void {\n    this.onDisplayMonths = true;\n    this.onDisplayYears = false;\n  }\n\n  public showYearSelection(): void {\n    this.onDisplayYears = true;\n    this.onDisplayMonths = false;\n  }\n\n  public next(): void {\n    if (this.onDisplayYears) {\n      this.displayYearsIndex++;\n      if (this.displayYearsIndex >= this.fullYearRange.length) {\n        this.displayYearsIndex = this.fullYearRange.length - 1;\n      }\n      this.displayYearRange = this.fullYearRange[this.displayYearsIndex++];\n    } else {\n      this.calendarDate = this.calendarDate.clone().add(1, 'M');\n    }\n    this.generateCalendar();\n  }\n\n  public selectDay(day: Moment): void {\n    const daysDifference = day.diff(\n      this.calendarDate.clone().startOf('date'),\n      'days'\n    );\n    day = this.calendarDate.clone().add(daysDifference, 'd');\n    const selectedDay = this.parseToReturnObjectType(day);\n    this.onSelectDate.emit(selectedDay);\n    this.cancelDatePicker();\n    return;\n  }\n\n  public selectMonth(month: string) {\n    this.calendarDate = this.calendarDate.clone().month(month);\n    this.onDisplayMonths = false;\n    this.generateCalendar();\n  }\n\n  public selectYear(year: number) {\n    this.calendarDate = this.calendarDate.clone().year(year);\n    this.onDisplayYears = false;\n    this.generateCalendar();\n  }\n\n  public selectToday(): void {\n    const today = this.parseToReturnObjectType(moment());\n    this.onSelectDate.emit(today);\n    this.cancelDatePicker();\n    return;\n  }\n\n  public clearPickDate(): void {\n    this.onSelectDate.emit(null);\n    this.cancelDatePicker();\n    return;\n  }\n\n  public cancelDatePicker(): void {\n    this.onDatePickerCancel.emit(false);\n    return;\n  }\n\n  protected generateYears(): void {\n    const currentYear = moment().year();\n    const startYr = this.calendarDate.clone().subtract(100, 'y').year();\n    // const endYr = this.calendarDate.clone().add(10, 'y').year();\n    const years = [];\n    for (let year = startYr; year <= currentYear; year++) {\n      years.push(year);\n    }\n\n    this.fullYearRange = _.chunk(years, 14);\n  }\n\n  protected initValue() {\n    // set moment locale (default is en)\n    moment.locale(this.locale);\n    // set today value\n    this.today = moment().startOf('date');\n    this.currentMonth = this.monthsShort[moment().month()];\n    this.currentYear = moment().year();\n\n    // set week days name array\n    this.dayNames = moment.weekdaysShort(true);\n\n    // check if the input initDate has value\n    if (this.initDate) {\n      this.calendarDate =\n        this.returnObject === 'string'\n          ? moment(this.initDate, this.viewFormat)\n          : moment(this.initDate);\n      this.selectedDate = this.calendarDate.clone().startOf('date');\n    } else {\n      this.calendarDate = moment();\n    }\n    this.generateYears();\n  }\n\n  protected generateCalendar(): void {\n    this.calendarDays = [];\n    const start =\n      0 -\n      ((this.calendarDate.clone().startOf('month').day() +\n        (7 - moment.localeData().firstDayOfWeek())) %\n        7);\n    const end = 41 + start; // iterator ending point\n\n    for (let i = start; i <= end; i += 1) {\n      const day = this.calendarDate.clone().startOf('month').add(i, 'days');\n      this.calendarDays.push(day);\n    }\n  }\n\n  protected parseToReturnObjectType(day: Moment): any {\n    switch (this.returnObject) {\n      case 'js':\n        return day.toDate();\n\n      case 'string':\n        return day.format(this.viewFormat);\n\n      case 'moment':\n        return day;\n\n      case 'json':\n        return day.toJSON();\n\n      case 'array':\n        return day.toArray();\n\n      case 'iso':\n        return day.toISOString();\n\n      case 'object':\n        return day.toObject();\n\n      default:\n        return day;\n    }\n  }\n}\n","/**\n * time-picker.component\n */\n\nimport { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\nimport { Moment } from 'moment/moment';\n\n// webpack1_\ndeclare let require: any;\n// const myDpStyles: string = require('./time-picker.component.css');\n// const myDpTpl: string = require('./time-picker.component.html');\n// webpack2_\n\n@Component({\n  selector: 'time-picker',\n  template: `<picker-modal (onOverlayClick)=\"cancelTimePicker()\">\n  <div class=\"picker-wrap\">\n    <div class=\"picker-box\">\n      <div class=\"picker-header\">Time Picker</div>\n      <div class=\"picker-table\">\n        <ul class=\"picker-table-time\">\n          <li class=\"picker-table-number hour\">\n            <span class=\"arrow up\" (click)=\"increaseHour()\"></span>\n            {{ time | moment: hourFormat }}\n            <span class=\"arrow down\" (click)=\"decreaseHour()\"></span>\n          </li>\n          <li class=\"picker-table-separator\">:</li>\n          <li class=\"picker-table-number minute\">\n            <span class=\"arrow up\" (click)=\"increaseMinute()\"></span>\n            {{ time | moment: 'mm' }}\n            <span class=\"arrow down\" (click)=\"decreaseMinute()\"></span>\n          </li>\n          <li *ngIf=\"showSecond\" class=\"picker-table-separator\">:</li>\n          <li *ngIf=\"showSecond\" class=\"picker-table-number second\">\n            <span class=\"arrow up\" (click)=\"increaseSecond()\"></span>\n            {{ time | moment: 'ss' }}\n            <span class=\"arrow down\" (click)=\"decreaseSecond()\"></span>\n          </li>\n          <li *ngIf=\"use12Hour\" class=\"picker-table-meridiem meridiem\">\n            {{ time | moment: 'A' }}\n          </li>\n        </ul>\n      </div>\n      <div class=\"picker-footer\">\n        <div class=\"picker-action action-now\" (click)=\"selectNow()\">\n          <span class=\"text\">Now</span>\n        </div>\n        <div class=\"picker-action action-confirm\" (click)=\"selectTime()\">\n          <span class=\"text\">Confirm</span>\n        </div>\n        <div class=\"picker-action action-clear\" (click)=\"clearTime()\">\n          <span class=\"text\">Clear</span>\n        </div>\n        <div class=\"picker-action action-close\" (click)=\"cancelTimePicker()\">\n          <span class=\"text\">Close</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</picker-modal>\n`,\n  styles: [`*,::after,::before{box-sizing:border-box}.picker-wrap{width:95vw;max-width:40rem;font-family:'Open Sans'}.picker-box{width:100%;padding:.625rem 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.picker-footer,.picker-header{font-size:1.333rem;line-height:2.5rem;height:2.5rem;width:100%}.picker-header{text-align:center}.picker-table{width:100%;margin:2.5rem 0}.picker-table-time{font-size:2.37rem;line-height:2.5rem;list-style:none;margin:0;padding:0;display:flex;justify-content:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.picker-table-meridiem,.picker-table-number,.picker-table-separator{text-align:center}.picker-table-meridiem,.picker-table-number{position:relative;width:20%}.arrow{position:absolute;left:50%;border:solid #777;border-width:0 .2rem .2rem 0;display:inline-block;padding:.25rem;cursor:pointer}.arrow.up{top:-1rem;-webkit-transform:translateX(-50%) rotate(-135deg);transform:translateX(-50%) rotate(-135deg)}.arrow.down{bottom:-1rem;-webkit-transform:translateX(-50%) rotate(45deg);transform:translateX(-50%) rotate(45deg)}.arrow:hover{border-color:#1975d2}.picker-table-separator{width:calc(20% / 3)}.picker-footer{display:flex;justify-content:center;width:100%;cursor:pointer}.picker-footer .picker-action{width:25%;text-align:center}.picker-footer .picker-action:hover{background-color:#b1dcfb}.picker-footer .picker-action .text{padding-left:.8rem}.picker-footer .action-clear::before,.picker-footer .action-close::before,.picker-footer .action-confirm::before,.picker-footer .action-now::before{content:' ';position:relative;display:inline-block;height:0;width:0}.picker-footer .action-now::before{border-top:.66em solid #0059bc;border-left:.66em solid transparent}.picker-footer .action-confirm::before{width:1rem;height:1rem;border-radius:100%;background-color:#00b5ad}.picker-footer .action-clear::before{top:-.5rem;width:1rem;border-top:3px solid #e20}.picker-footer .action-close::before{width:1rem;height:1rem;background:linear-gradient(to bottom,transparent 35%,#777 35%,#777 65%,transparent 65%),linear-gradient(to right,transparent 35%,#777 35%,#777 65%,transparent 65%);-webkit-transform:rotate(45deg);transform:rotate(45deg)}`]\n})\nexport class TimePickerComponent implements OnInit {\n  @Input() initTime: any;\n  @Input() showSecond = true;\n  @Input() viewFormat = 'hh:mm A';\n  @Input() use12Hour = false;\n  @Input() returnObject = 'js';\n  @Output() onSelectTime = new EventEmitter<any>();\n  @Output() onTimePickerCancel = new EventEmitter<boolean>();\n  hourFormat = 'HH';\n  public time: Moment;\n\n  constructor() {}\n\n  ngOnInit(): void {\n    if (this.use12Hour) {\n      this.hourFormat = 'hh';\n    }\n    this.time = this.initTime\n      ? moment(this.initTime, this.viewFormat)\n      : moment();\n\n    // check if the input initDate has value\n    if (this.initTime) {\n      this.time =\n        this.returnObject === 'string'\n          ? moment(this.initTime, this.viewFormat)\n          : moment(this.initTime);\n    } else {\n      this.time = moment();\n    }\n  }\n\n  increaseHour(): void {\n    this.time = this.time.clone().add(1, 'h');\n  }\n\n  decreaseHour(): void {\n    this.time = this.time.clone().subtract(1, 'h');\n  }\n\n  increaseMinute() {\n    this.time = this.time.clone().add(1, 'm');\n  }\n\n  decreaseMinute() {\n    this.time = this.time.clone().subtract(1, 'm');\n  }\n\n  increaseSecond(): void {\n    this.time = this.time.clone().add(1, 's');\n  }\n\n  decreaseSecond(): void {\n    this.time = this.time.clone().subtract(1, 's');\n  }\n\n  selectTime(): void {\n    const selectTime = this.parseToReturnObjectType(this.time);\n    this.onSelectTime.emit(selectTime);\n    this.cancelTimePicker();\n    return;\n  }\n\n  selectNow(): void {\n    const selectTime = this.parseToReturnObjectType(moment());\n    this.onSelectTime.emit(selectTime);\n    this.cancelTimePicker();\n    return;\n  }\n\n  clearTime(): void {\n    this.onSelectTime.emit(null);\n    this.cancelTimePicker();\n    return;\n  }\n\n  cancelTimePicker(): void {\n    this.onTimePickerCancel.emit(false);\n    return;\n  }\n\n  protected parseToReturnObjectType(time: Moment): any {\n    switch (this.returnObject) {\n      case 'js':\n        return time.toDate();\n\n      case 'string':\n        return time.format(this.viewFormat);\n\n      case 'moment':\n        return time;\n\n      case 'json':\n        return time.toJSON();\n\n      case 'array':\n        return time.toArray();\n\n      case 'iso':\n        return time.toISOString();\n\n      case 'object':\n        return time.toObject();\n\n      default:\n        return time;\n    }\n  }\n}\n","/**\n * modal.component\n */\n\nimport {\n  Component,\n  Output,\n  OnInit,\n  EventEmitter,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\n// webpack1_\ndeclare let require: any;\n// const myDpStyles: string = require('./modal.component.css');\n// const myDpTpl: string = require('./modal.component.html');\n// webpack2_\n\n@Component({\n  selector: 'picker-modal',\n  template: `<section class=\"x-modal\">\n  <section class=\"modal-overlay\" (click)=\"closeModal()\"></section>\n  <section class=\"modal-main\" id=\"section-modal-main\">\n    <ng-content></ng-content>\n  </section>\n</section>\n`,\n  styles: [`:host{z-index:9999999999}*,::after,::before{box-sizing:border-box}.modal-main{position:absolute;left:19.6%;right:auto;top:auto;z-index:111;background-color:#fff;border:1px solid #d7dad7;border-radius:6px;-webkit-transform:translate(-50%,0);transform:translate(-50%,0);box-shadow:0 5px 15px rgba(0,0,0,.3)}`],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: []\n})\nexport class ModalComponent implements OnInit {\n  @Output() onOverlayClick = new EventEmitter<boolean>();\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  closeModal() {\n    this.onOverlayClick.emit(false);\n  }\n}\n","/**\n * moment.pipe\n */\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Moment } from 'moment/moment';\n\n@Pipe({ name: 'moment' })\nexport class MomentPipe implements PipeTransform {\n  transform(moment: Moment, format?: string): string {\n    return format ? moment.format(format) : moment.format('MMM DD, YYYY');\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  forwardRef,\n  EventEmitter,\n  Output\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport * as moment_ from 'moment';\n\nconst Moment = moment_;\n\n@Component({\n  selector: 'date-time-picker',\n  template: `<div class=\"row\">\n  <div *ngIf=\"!showTime\" class=\"col-xs-12 col-md-12\">\n    <input\n      *ngIf=\"!showWeeks\"\n      type=\"text\"\n      class=\"form-control\"\n      [value]=\"value | date: 'mediumDate'\"\n      (focus)=\"toggleDatePicker(true)\"\n      readonly\n      placeholder=\"Select Date\"\n    />\n    <div *ngIf=\"showWeeks\" class=\"input-group\">\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        class=\"form-control\"\n        [value]=\"value | date: 'mediumDate'\"\n        (focus)=\"toggleDatePicker(true)\"\n        readonly\n        placeholder=\"Select Date\"\n      />\n      <div class=\"input-group-btn\">\n        <button\n          type=\"button\"\n          class=\"btn btn-default dropdown-toggle\"\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n        >\n          Weeks <span class=\"caret\"></span>\n        </button>\n        <ul class=\"dropdown-menu up\">\n          <li (click)=\"weeksSelected(count)\" *ngFor=\"let count of weeks\">\n            <span> {{ count }} Weeks</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"showTime\" class=\"col-xs-8 col-md-8\">\n    <input\n      *ngIf=\"!showWeeks\"\n      type=\"text\"\n      class=\"form-control\"\n      [value]=\"value | date: 'mediumDate'\"\n      (focus)=\"toggleDatePicker(true)\"\n      readonly\n      placeholder=\"Select Date\"\n    />\n    <div *ngIf=\"showWeeks\" class=\"input-group\">\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        class=\"form-control\"\n        [value]=\"value | date: 'mediumDate'\"\n        (focus)=\"toggleDatePicker(true)\"\n        readonly\n        placeholder=\"Select Date\"\n      />\n      <div class=\"input-group-btn\">\n        <button\n          type=\"button\"\n          class=\"btn btn-default dropdown-toggle\"\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n        >\n          Weeks <span class=\"caret\"></span>\n        </button>\n        <ul class=\"dropdown-menu up\">\n          <li (click)=\"weeksSelected(count)\" *ngFor=\"let count of weeks\">\n            <span> {{ count }} Weeks</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"showTime\" class=\"col-xs-4 col-md-4\">\n    <input\n      type=\"text\"\n      class=\"form-control\"\n      [value]=\"value | date: 'shortTime'\"\n      (focus)=\"toggleTimePicker(true)\"\n      readonly\n      placeholder=\"Select Time\"\n    />\n  </div>\n</div>\n<date-picker\n  *ngIf=\"showDatePicker\"\n  [initDate]=\"value\"\n  (onSelectDate)=\"setDate($event)\"\n  (onDatePickerCancel)=\"toggleDatePicker($event)\"\n></date-picker>\n\n<time-picker\n  *ngIf=\"showTimePicker\"\n  [initTime]=\"value\"\n  [use12Hour]=\"true\"\n  (onSelectTime)=\"setTime($event)\"\n  (onTimePickerCancel)=\"toggleTimePicker($event)\"\n></time-picker>\n`,\n  styles: [`input[readonly]{background-color:#fff}.up{bottom:100%!important;top:auto!important}.glyphicon{top:1px}`],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => DateTimePickerComponent),\n      multi: true\n    }\n  ]\n})\nexport class DateTimePickerComponent implements OnInit, ControlValueAccessor {\n  @Input() modelValue: any;\n  @Input() showDate = true;\n  @Input() showTime = false;\n  @Input() showWeeks = false;\n  @Input() weeks: number[] = [2, 4, 6, 8, 12, 16, 24];\n  @Output() onDateChange = new EventEmitter<any>();\n  public showDatePicker = false;\n  public showTimePicker = false;\n  onChange: any = () => {};\n  onTouched: any = () => {};\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  weeksSelected(count) {\n    const now = new Date();\n    const nextDate = now.setDate(now.getDate() + count * 7);\n    this.value = Moment(nextDate).format();\n  }\n  setDate(date: any): void {\n    if (date && date !== '') {\n      this.value = Moment(date).format();\n    } else {\n      this.value = date;\n    }\n  }\n\n  setTime(time: any): void {\n    if (time && time !== '') {\n      this.value = Moment(time).format();\n    } else {\n      this.value = time;\n    }\n    return;\n  }\n\n  toggleDatePicker(status: boolean): void {\n    this.showDatePicker = status;\n    /*setTimeout(function() {\n        let _body = document.getElementById('content-wrapper').getBoundingClientRect(),\n          elem = document.getElementById('section-modal-main');\n        if (elem) {\n          let elemBox = elem.getBoundingClientRect();\n          if (elemBox.bottom > _body.bottom) {\n            elem.style.bottom = '36px';\n          }\n        }\n      }, 0);*/\n    return;\n  }\n\n  toggleTimePicker(status: boolean): void {\n    this.showTimePicker = status;\n    return;\n  }\n  get value() {\n    return this.modelValue;\n  }\n\n  set value(val) {\n    this.modelValue = val;\n    this.onDateChange.emit(val);\n    this.onChange(val);\n    this.onTouched();\n  }\n\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n\n  writeValue(value) {\n    if (value instanceof Date) {\n      this.value = Moment(value).format();\n    } else {\n      this.value = value;\n    }\n  }\n}\n","/**\n * date-time-picker.module\n */\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { DatePickerComponent } from './date-picker/date-picker.component';\nimport { TimePickerComponent } from './time-picker/time-picker.component';\nimport { ModalComponent } from './picker-modal/modal.component';\nimport { MomentPipe } from './pipes/moment.pipe';\nimport { DateTimePickerComponent } from './date-time-picker.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule],\n  declarations: [\n    DatePickerComponent,\n    TimePickerComponent,\n    ModalComponent,\n    MomentPipe,\n    DateTimePickerComponent\n  ],\n  exports: [\n    DatePickerComponent,\n    TimePickerComponent,\n    ModalComponent,\n    MomentPipe,\n    DateTimePickerComponent\n  ],\n  providers: []\n})\nexport class DateTimePickerModule {}\n","import { Moment } from 'moment/moment';\n\nimport {\n  Component,\n  OnInit,\n  Input,\n  forwardRef,\n  EventEmitter,\n  Output\n} from '@angular/core';\nimport {\n  ControlValueAccessor,\n  NG_VALUE_ACCESSOR,\n  FormControl\n} from '@angular/forms';\nimport { DateAdapter, MAT_DATE_FORMATS } from '@angular/material/core';\nimport { MomentDateAdapter } from '@angular/material-moment-adapter';\nimport * as moment_ from 'moment';\nconst moment = moment_;\n\nexport const MY_FORMATS = {\n  parse: {\n    dateInput: 'LL'\n  },\n  display: {\n    dateInput: 'LL',\n    monthYearLabel: 'MMM YYYY',\n    dateA11yLabel: 'LL',\n    monthYearA11yLabel: 'MMMM YYYY'\n  }\n};\n\n@Component({\n  selector: 'ngx-date-time-picker',\n  template: `<div>\n  <div class=\"row\">\n    <div [class]=\"getDatePickerCssClass()\">\n      <div class=\"input-group\">\n        <input\n          matInput\n          [matDatepicker]=\"picker\"\n          class=\"form-control\"\n          [value]=\"value\"\n          placeholder=\"Choose a date\"\n          (dateChange)=\"onDateSelect($event)\"\n          (click)=\"picker.open()\"\n          readonly\n        />\n        <mat-datepicker #picker disabled=\"false\"></mat-datepicker>\n        <mat-datepicker-toggle\n          matSuffix\n          [for]=\"picker\"\n          class=\"input-group-btn\"\n        ></mat-datepicker-toggle>\n      </div>\n    </div>\n    <div [class]=\"getWeekPickerCssClass()\" *ngIf=\"showWeeks\">\n      <mat-select\n        placeholder=\"Select Weeks\"\n        class=\"form-control\"\n        name=\"weeks\"\n        (selectionChange)=\"weekSelect($event)\"\n      >\n        <mat-option *ngFor=\"let count of weeks\" [value]=\"count\">\n          {{ count }} Weeks\n        </mat-option>\n      </mat-select>\n    </div>\n    <div [class]=\"getTimePickerCssClass()\" *ngIf=\"showTime\">\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        [value]=\"value | date: 'shortTime'\"\n        (focus)=\"toggleTimePicker(true)\"\n        readonly\n        placeholder=\"Select Time\"\n      />\n      <time-picker\n        *ngIf=\"showTimePicker\"\n        [initTime]=\"value\"\n        [use12Hour]=\"true\"\n        (onSelectTime)=\"onTimeSelect($event)\"\n        (onTimePickerCancel)=\"toggleTimePicker($event)\"\n      ></time-picker>\n    </div>\n  </div>\n</div>\n`,\n  styles: [`#time-section{display:inline-block}#ngx-atp-time-picker,#ngx-mat-form-field{width:100%}.up{bottom:100%!important;top:auto!important}.time-btn{margin-top:-20px}`],\n  providers: [\n    { provide: MAT_DATE_FORMATS, useValue: MY_FORMATS },\n    { provide: DateAdapter, useClass: MomentDateAdapter },\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NgxDateTimePickerComponent),\n      multi: true\n    }\n  ]\n})\nexport class NgxDateTimePickerComponent\n  implements OnInit, ControlValueAccessor {\n  // public date = new FormControl(moment());\n  public selectedTime = moment().format();\n  public selectedDate = moment().format();\n  public loadInitial = false;\n  public value;\n  public showTimePicker = false;\n  @Input() weeks: number[] = [0, 2, 4, 6, 8, 12, 16, 24];\n  @Input() modelValue: any;\n  @Input() showTime = false;\n  @Input() showWeeks = true;\n  @Output() onDateChange = new EventEmitter<any>();\n  public onChange: any = () => {};\n  public onTouched: any = () => {};\n  public ngOnInit() {}\n\n  public writeValue(value) {\n    this.value = value;\n  }\n\n  public registerOnChange(fn) {\n    this.onChange = fn;\n  }\n\n  public registerOnTouched(fn) {}\n\n  public onTimeSelect($event) {\n    const setDate = moment(this.selectedDate);\n    const setTime = $event;\n    this.setDateTime(setDate, setTime);\n  }\n\n  public onDateSelect($event) {\n    const setDate = moment($event.value);\n    const setTime = this.selectedTime;\n    const dateString = this.setDateTime(setDate, setTime);\n\n    const selectedDate = $event.value;\n    this.value = dateString;\n  }\n\n  public toggleTimePicker(status: boolean): void {\n    this.showTimePicker = status;\n    return;\n  }\n\n  public setCurrentTime() {\n    const setDate = moment(this.selectedDate);\n    const currentTime = moment().format('HH:mm:ss');\n    this.setDateTime(setDate, currentTime);\n  }\n\n  public weekSelect($event) {\n    const dateToUse = moment().format();\n    const nextWeekDate = moment(dateToUse).add($event.value, 'weeks');\n    const nextWeekTime = dateToUse;\n    this.setDateTime(nextWeekDate, nextWeekTime);\n  }\n\n  public selectionChange($event) {\n    console.log('Week selected', $event);\n  }\n\n  public getWeekPickerCssClass() {\n    if (this.showTime) {\n      return 'col-sm-2 form-group';\n    }\n    return 'col-sm-3 form-group';\n  }\n\n  public getDatePickerCssClass() {\n    if (this.showTime && this.showWeeks) {\n      return 'col-sm-5 form-group';\n    }\n\n    if (this.showWeeks === true) {\n      return 'col-sm-9 form-group';\n    }\n\n    if (this.showTime === true) {\n      return 'col-sm-8 form-group';\n    }\n    return 'col-sm-12 form-group';\n  }\n\n  public getTimePickerCssClass() {\n    if (this.showTime && this.showWeeks) {\n      return 'col-sm-5 form-group';\n    }\n\n    if (this.showWeeks === true) {\n      return 'col-sm-9 form-group';\n    }\n    return 'col-sm-4 form-group';\n  }\n\n  public setDateTime(setDate, setTime) {\n    const newDate = moment(setDate).format('DD-MM-YYYY');\n    let newTime;\n    if (this.showTime) {\n      newTime = moment(setTime).format('HH:mm:ss');\n    } else {\n      newTime = '00:00:00';\n    }\n    const newDateTime = moment(newDate + '' + newTime, 'DD-MM-YYYY HH:mm:ss');\n    const dateTimeString = moment(newDateTime).format();\n    this.selectedDate = dateTimeString;\n    this.selectedTime = dateTimeString;\n    this.value = dateTimeString;\n    this.onChange(this.value);\n\n    return dateTimeString;\n  }\n}\n","/**\n * date-time-picker.module\n */\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatNativeDateModule, MatInputModule } from '@angular/material';\nimport { NgxDateTimePickerComponent } from './ngx-date-time-picker.component';\n// import { AmazingTimePickerModule } from 'amazing-time-picker';\nimport { MatSelectModule } from '@angular/material/select';\nimport { DateTimePickerModule } from '../date-time-picker/date-time-picker.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatDatepickerModule,\n    MatFormFieldModule,\n    MatNativeDateModule,\n    MatInputModule,\n    DateTimePickerModule,\n    // AmazingTimePickerModule,\n    MatSelectModule\n  ],\n  declarations: [NgxDateTimePickerComponent],\n  exports: [\n    MatDatepickerModule,\n    MatFormFieldModule,\n    MatNativeDateModule,\n    MatInputModule,\n    NgxDateTimePickerComponent\n  ],\n  providers: []\n})\nexport class NgxDateTimePickerModule {}\n","import { SelectOption } from './interfaces/select-option';\nexport class Option {\n  label: string;\n  value: any;\n  constructor(options: SelectOption) {\n    this.label = options.label;\n    this.value = options.value;\n  }\n}\n","import { Component, Input, forwardRef, OnInit, OnChanges } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { Option } from '../form-entry/question-models/select-option';\n\nimport { DataSource } from '../form-entry/question-models/interfaces/data-source';\n\n@Component({\n  selector: 'afe-ng-select',\n  template: `<ng-select\n    (searchInputText)=\"getChangingText($event)\"\n    (ngModelChange)=\"onValueChange($event)\"\n    [options]=\"question_options\"\n    [multiple]=\"multiple\"\n  >\n  </ng-select> `,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AfeNgSelectComponent),\n      multi: true\n    }\n  ]\n})\nexport class AfeNgSelectComponent\n  implements ControlValueAccessor, OnInit, OnChanges {\n  subject: BehaviorSubject<Option[]>;\n  subjectOption: BehaviorSubject<Option>;\n  @Input() dataSource: DataSource;\n  @Input() multiple: boolean;\n  @Input() extras: any;\n  question_options: any = [];\n  selected_question_option: any;\n  errors: any = [];\n  propagateChange = (_: any) => {};\n\n  getChangingText(event) {\n    // console.log(event);\n    this.getData(event).subscribe((options) => {\n      this.question_options = options;\n    });\n  }\n\n  writeValue(obj: any): void {}\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {}\n\n  ngOnChanges(changes: any) {}\n\n  ngOnInit() {\n    if (this.extras) {\n      if (this.extras.originalValue) {\n        this.resolveSelectedOption(this.extras.originalValue).subscribe(\n          (option) => {\n            this.selected_question_option = option;\n          }\n        );\n      }\n    }\n  }\n\n  getData(searchText: string): Observable<Option[]> {\n    this.subject = new BehaviorSubject<Option[]>([]);\n\n    const OptionsObservable = this.dataSource.searchOptions(searchText);\n\n    OptionsObservable.subscribe(\n      (options) => {\n        // console.log('options', options);\n        const mappedOptions: Option[] = new Array<Option>();\n\n        for (let i = 0; i < options.length; i++) {\n          mappedOptions.push(new Option(options[i]));\n        }\n        this.subject.next(mappedOptions);\n      },\n      (error) => {\n        this.subject.error(error);\n      }\n    );\n\n    return this.subject.asObservable();\n  }\n\n  onValueChange(event) {}\n  resolveSelectedOption(value: any): Observable<Option> {\n    this.subjectOption = new BehaviorSubject<Option>(null);\n    const OptionObservable = this.dataSource.resolveSelectedValue(value);\n\n    OptionObservable.subscribe(\n      (option) => {\n        // console.log('option', option);\n        this.subjectOption.next(option);\n      },\n      (error) => {\n        this.subjectOption.error(error);\n      }\n    );\n\n    return this.subjectOption.asObservable();\n  }\n\n  resetOptions() {\n    this.subject.next(new Array<Option>());\n  }\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\n\n@Injectable()\nexport class FormSchemaCompiler {\n  constructor() {}\n\n  public compileFormSchema(\n    formSchema: Object,\n    referencedComponents: Array<any>\n  ): Object {\n    // get all referenced forms\n    const refForms: Object = this.getReferencedForms(\n      formSchema,\n      referencedComponents\n    );\n    if (_.isEmpty(refForms)) {\n      return formSchema;\n    }\n\n    // get all place-holders from the form schema\n    const placeHolders = this.getAllPlaceholderObjects(formSchema);\n    if (_.isEmpty(placeHolders)) {\n      return formSchema;\n    }\n\n    // replace all placeHolders\n    this.replaceAllPlaceholdersWithActualObjects(refForms, placeHolders);\n    return formSchema;\n  }\n\n  private findSchemaByName(\n    schemaArray: Array<any>,\n    nameOfSchema: string\n  ): Object {\n    if (_.isEmpty(schemaArray) || _.isEmpty(nameOfSchema)) {\n      return;\n    }\n    let foundSchema: any = {};\n    _.each(schemaArray, (schema: any) => {\n      if (schema.name === nameOfSchema) {\n        foundSchema = schema;\n      }\n    });\n    return foundSchema;\n  }\n\n  private getPageInSchemaByLabel(schema: any, pageLabel: string): Object {\n    if (_.isEmpty(schema) || _.isEmpty(pageLabel)) {\n      return;\n    }\n    let foundPage: Object = {};\n    _.each(schema.pages, (page) => {\n      if (page.label === pageLabel) {\n        foundPage = page;\n      }\n    });\n    return foundPage;\n  }\n\n  private getSectionInSchemaByPageLabelBySectionLabel(\n    schema: Object,\n    pageLabel: string,\n    sectionLabel: string\n  ): Object {\n    if (_.isEmpty(schema) || _.isEmpty(pageLabel) || _.isEmpty(sectionLabel)) {\n      return;\n    }\n    const foundPage: any = this.getPageInSchemaByLabel(schema, pageLabel);\n    if (_.isEmpty(foundPage)) {\n      return;\n    }\n    let foundSection: Object = {};\n    _.each(foundPage.sections, (section) => {\n      if (section.label === sectionLabel) {\n        foundSection = section;\n      }\n    });\n    return foundSection;\n  }\n\n  private getQuestionByIdInSchema(schema: any, questionId: string): Array<any> {\n    if (_.isEmpty(schema) || _.isEmpty(questionId)) {\n      return;\n    }\n    if (Array.isArray(schema)) {\n      let question: Array<any>;\n      for (let i = 0; i < schema.length; i++) {\n        if (!_.isEmpty(schema[i])) {\n          question = this.getQuestionByIdInSchema(schema[i], questionId);\n        }\n        if (!_.isEmpty(question)) {\n          break;\n        }\n      }\n      return question;\n    } else if (typeof schema === 'object') {\n      if (this.isQuestionObjectWithId(schema, questionId)) {\n        return schema;\n      } else if (this.isSchemaSubObjectExpandable(schema)) {\n        const toExpand = schema.pages || schema.sections || schema.questions;\n        return this.getQuestionByIdInSchema(toExpand, questionId);\n      } else {\n        return;\n      }\n    } else {\n      return;\n    }\n  }\n\n  private getQuestionsArrayByQuestionIdInSchema(\n    schema: any,\n    questionId: string\n  ): Array<any> {\n    if (_.isEmpty(schema) || _.isEmpty(questionId)) {\n      return;\n    }\n    return this.getQuestionsArrayByQuestionId(schema, schema, questionId);\n  }\n\n  private getQuestionsArrayByQuestionId(\n    parent: any,\n    object: any,\n    questionId: string\n  ): Array<any> {\n    if (Array.isArray(object)) {\n      let returnedValue: Array<any>;\n      for (let i = 0; i < object.length; i++) {\n        if (!_.isEmpty(object[i])) {\n          returnedValue = this.getQuestionsArrayByQuestionId(\n            object,\n            object[i],\n            questionId\n          );\n        }\n        if (!_.isEmpty(returnedValue)) {\n          break;\n        }\n      }\n\n      return returnedValue;\n    } else if (typeof object === 'object') {\n      if (this.isQuestionObjectWithId(object, questionId)) {\n        return parent;\n      } else if (this.isSchemaSubObjectExpandable(object)) {\n        const toExpand = object.pages || object.sections || object.questions;\n        return this.getQuestionsArrayByQuestionId(\n          toExpand,\n          toExpand,\n          questionId\n        );\n      } else {\n        return;\n      }\n    } else {\n      return;\n    }\n  }\n\n  // object is page or section or question\n  private isSchemaSubObjectExpandable(object: Object): Boolean {\n    if (typeof object === 'object') {\n      const objectKeys = Object.keys(object);\n      if (\n        _.includes(objectKeys, 'pages') ||\n        _.includes(objectKeys, 'sections') ||\n        _.includes(objectKeys, 'questions')\n      ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private isQuestionObjectWithId(object: Object, id: any): Boolean {\n    return object['id'] === id;\n  }\n\n  private getAllPlaceholderObjects(schema: Object): Array<any> {\n    const referencedObjects: Array<any> = [];\n    this.extractPlaceholderObjects(schema, referencedObjects);\n    return referencedObjects;\n  }\n\n  private extractPlaceholderObjects(\n    subSchema: any,\n    objectsArray: Array<Object>\n  ): void {\n    if (_.isEmpty(subSchema)) {\n      return;\n    }\n    if (Array.isArray(subSchema)) {\n      for (let i = 0; i < subSchema.length; i++) {\n        if (!_.isEmpty(subSchema[i])) {\n          this.extractPlaceholderObjects(subSchema[i], objectsArray);\n        }\n      }\n    } else if (typeof subSchema === 'object') {\n      if (!_.isEmpty(subSchema.reference)) {\n        objectsArray.push(subSchema);\n      } else if (this.isSchemaSubObjectExpandable(subSchema)) {\n        const toExpand =\n          subSchema.pages || subSchema.sections || subSchema.questions;\n        this.extractPlaceholderObjects(toExpand, objectsArray);\n      }\n    }\n  }\n\n  private fillPlaceholderObject(\n    placeHolderObject: Object,\n    referenceObject: Object\n  ): Object {\n    for (const member in referenceObject) {\n      if (_.isEmpty(placeHolderObject[member])) {\n        placeHolderObject[member] = referenceObject[member];\n      }\n    }\n    return placeHolderObject;\n  }\n\n  private replaceAllPlaceholdersWithActualObjects(\n    keyValReferencedForms: Object,\n    placeHoldersArray: Array<any>\n  ): Array<any> {\n    _.each(placeHoldersArray, (placeHolder) => {\n      const referencedObject: Object = this.getReferencedObject(\n        placeHolder.reference,\n        keyValReferencedForms\n      );\n\n      if (_.isEmpty(referencedObject)) {\n        console.error(\n          'Form compile: Error finding referenced object',\n          placeHolder.reference\n        );\n      } else {\n        placeHolder = this.fillPlaceholderObject(placeHolder, referencedObject);\n        placeHolder = this.removeExcludedQuestionsFromPlaceholder(placeHolder);\n        delete placeHolder['reference'];\n      }\n    });\n    return placeHoldersArray;\n  }\n\n  private removeObjectFromArray(array: Array<any>, object: Object): void {\n    const indexOfObject = array.indexOf(object);\n    if (indexOfObject === -1) {\n      return;\n    }\n\n    array.splice(indexOfObject, 1);\n  }\n\n  private removeExcludedQuestionsFromPlaceholder(placeHolder: any): Object {\n    if (Array.isArray(placeHolder.reference.excludeQuestions)) {\n      _.each(placeHolder.reference.excludeQuestions, (excludedQuestionId) => {\n        const questionsArray: Array<any> = this.getQuestionsArrayByQuestionIdInSchema(\n          placeHolder,\n          excludedQuestionId\n        );\n\n        if (!Array.isArray(questionsArray)) {\n          return;\n        }\n        const question = this.getQuestionByIdInSchema(\n          questionsArray,\n          excludedQuestionId\n        );\n\n        this.removeObjectFromArray(questionsArray, question);\n      });\n    }\n    return placeHolder;\n  }\n\n  private getReferencedObject(\n    referenceData: any,\n    keyValReferencedForms: Object\n  ): Object {\n    if (_.isEmpty(referenceData.form)) {\n      console.error(\n        'Form compile: reference missing form attribute',\n        referenceData\n      );\n      return;\n    }\n    if (_.isEmpty(keyValReferencedForms[referenceData.form])) {\n      console.error(\n        'Form compile: referenced form alias not found',\n        referenceData\n      );\n      return;\n    }\n    if (!_.isEmpty(referenceData.questionId)) {\n      return this.getQuestionByIdInSchema(\n        keyValReferencedForms[referenceData.form],\n        referenceData.questionId\n      );\n    }\n\n    if (!_.isEmpty(referenceData.page) && !_.isEmpty(referenceData.section)) {\n      return this.getSectionInSchemaByPageLabelBySectionLabel(\n        keyValReferencedForms[referenceData.form],\n        referenceData.page,\n        referenceData.section\n      );\n    }\n    if (!_.isEmpty(referenceData.page)) {\n      return this.getPageInSchemaByLabel(\n        keyValReferencedForms[referenceData.form],\n        referenceData.page\n      );\n    }\n    console.error(\n      'Form compile: Unsupported reference type',\n      referenceData.reference\n    );\n  }\n\n  private getReferencedForms(\n    formSchema: any,\n    formSchemasLookupArray: Array<any>\n  ): Object {\n    const referencedForms: Array<any> = formSchema.referencedForms;\n\n    if (_.isEmpty(referencedForms)) {\n      return;\n    }\n\n    const keyValReferencedForms: Object = {};\n\n    _.each(referencedForms, (reference: any) => {\n      keyValReferencedForms[reference.alias] = this.findSchemaByName(\n        formSchemasLookupArray,\n        reference.formName\n      );\n    });\n    return keyValReferencedForms;\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { TextQuestionOptions } from './interfaces/text-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class TextInputQuestion extends QuestionBase {\n  placeholder: string;\n  constructor(options: TextQuestionOptions) {\n    super(options);\n    this.placeholder = options.placeholder || '';\n    this.controlType = AfeControlType.AfeFormControl;\n  }\n}\n","import { TextInputQuestion } from './text-input-question';\nimport { TextAreaQuestionOptions } from './interfaces/text-area-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class TextAreaInputQuestion extends TextInputQuestion {\n  isExpanded: boolean;\n  rows: number;\n\n  constructor(options: TextAreaQuestionOptions) {\n    super(options);\n    this.placeholder = options.placeholder || '';\n    this.isExpanded = options.isExpanded || false;\n    this.rows = options.rows || 18;\n    this.renderingType = 'textarea';\n    this.controlType = AfeControlType.AfeFormControl;\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { SelectQuestionOptions } from './interfaces/select-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class SelectQuestion extends QuestionBase {\n  options: { key: string; value: string }[];\n  dataSource?: any;\n\n  constructor(options: SelectQuestionOptions) {\n    super(options);\n    this.renderingType = 'select';\n    this.options = options.options || [];\n    this.controlType = AfeControlType.AfeFormControl;\n    this.dataSource = options.dataSource || '';\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { UiSelectQuestionOptions } from './interfaces/ui-select-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class UiSelectQuestion extends QuestionBase {\n  options: { key: string; value: string }[];\n  searchFunction: Function;\n  resolveFunction: Function;\n  constructor(options: UiSelectQuestionOptions) {\n    super(options);\n    this.renderingType = 'ui-select';\n    this.options = options.options || [];\n    this.controlType = AfeControlType.AfeFormControl;\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { DateQuestionOptions } from './interfaces/date-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class DateQuestion extends QuestionBase {\n  showTime = true;\n  showWeeksAdder = false;\n  constructor(options: DateQuestionOptions) {\n    super(options);\n    this.renderingType = 'date';\n    this.controlType = AfeControlType.AfeFormControl;\n  }\n}\n","import { SelectQuestion } from './select-question';\nimport { MultiSelectQuestionOptions } from './interfaces/multi-select-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class MultiSelectQuestion extends SelectQuestion {\n  options: { key: string; value: string }[];\n\n  constructor(options: MultiSelectQuestionOptions) {\n    super(options);\n    this.renderingType = 'multi-select' || 'single-select';\n    this.options = options.options || [];\n    this.controlType = AfeControlType.AfeFormControl;\n  }\n}\n","import { QuestionBase } from '../question-base';\nimport { BaseOptions } from './base-options';\n\nexport abstract class NestedQuestion extends QuestionBase {\n  abstract questions: QuestionBase[];\n  constructor(options: BaseOptions) {\n    super(options);\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { GroupQuestionOptions } from './interfaces/group-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nimport { NestedQuestion } from './interfaces/nested-questions';\n\nexport class QuestionGroup extends NestedQuestion {\n  questions: QuestionBase[];\n  isExpanded = true;\n\n  constructor(options: GroupQuestionOptions) {\n    super(options);\n    this.renderingType = 'group';\n    this.questions = options.questions || [];\n    this.controlType = AfeControlType.AfeFormGroup;\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { RepeatingQuestionOptions } from './interfaces/repeating-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nimport { NestedQuestion } from './interfaces/nested-questions';\n\nexport class RepeatingQuestion extends NestedQuestion {\n  questions: QuestionBase[];\n\n  constructor(options: RepeatingQuestionOptions) {\n    super(options);\n    this.renderingType = 'repeating';\n    this.questions = options.questions || [];\n    this.controlType = AfeControlType.AfeFormArray;\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { CheckboxOptions } from './interfaces/checkbox-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class CheckBoxQuestion extends QuestionBase {\n  options: { key: string; value: string }[];\n\n  constructor(options: CheckboxOptions) {\n    super(options);\n    this.renderingType = 'checkbox' || 'radio';\n    this.options = options.options || [];\n    this.controlType = AfeControlType.AfeFormControl;\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { TimeQuestionOptions } from './interfaces/time-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class TimeQuestion extends QuestionBase {\n    constructor(options: TimeQuestionOptions) {\n        super(options);\n        this.renderingType = 'time';\n        this.controlType = AfeControlType.AfeFormControl;\n    }\n}\n","import { QuestionBase } from './question-base';\nimport { FileUploadQuestionOptions } from './interfaces/file-upload-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class FileUploadQuestion extends QuestionBase {\n  showTime = true;\n  showWeeksAdder = false;\n  dataSource?: any;\n  constructor(options: FileUploadQuestionOptions) {\n    super(options);\n    this.renderingType = 'file';\n    this.dataSource = options.dataSource;\n    this.controlType = AfeControlType.AfeFormControl;\n  }\n}\n","import { QuestionBase } from './question-base';\nimport { TestOrderQuestionOptions } from './interfaces/test-order-question-options';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nexport class TestOrderQuestion extends QuestionBase {\n  orderType: string;\n  selectableOrders: { concept: string; label: string }[];\n  orderSettingUuid: string;\n  rendering: string;\n  options: any[];\n  constructor(options: TestOrderQuestionOptions) {\n    super(options);\n    this.renderingType = 'select';\n    this.orderType = options.orderType;\n    this.selectableOrders = options.selectableOrders;\n    this.options = options.options;\n    this.orderSettingUuid = options.orderSettingUuid;\n    this.rendering = options.orderSettingUuid;\n    this.controlType = AfeControlType.AfeFormControl;\n  }\n}\n","import { ValidationModel } from './validation.model';\n\nexport class DateValidationModel extends ValidationModel {\n  allowFutureDates = false;\n\n  constructor(validations: any) {\n    super(validations);\n\n    this.allowFutureDates =\n      validations.allowFutureDates === 'true' ? true : false;\n  }\n}\n","import { ValidationModel } from './validation.model';\n\nexport class MaxValidationModel extends ValidationModel {\n  max: number;\n\n  constructor(validations: any) {\n    super(validations);\n    const max: any = validations.max;\n    this.max = +max;\n  }\n}\n","import { ValidationModel } from './validation.model';\n\nexport class MinValidationModel extends ValidationModel {\n  min: number;\n\n  constructor(validations: any) {\n    super(validations);\n    const min: any = validations.min;\n    this.min = +min;\n  }\n}\n","export class DecimalPointValidationModel {\n  type: string;\n  message: string;\n  decimalPlace = 0;\n  failsWhenExpression = '';\n\n  constructor(validations: any) {\n    this.type = 'js_expression';\n    this.decimalPlace = validations.decimalPlace;\n  }\n  setFailExpression(): void {\n    this.failsWhenExpression = `!isEmpty(myValue) && String(myValue).split('.')[1].length !== ${this.decimalPlace}`;\n  }\n  setMessage() {\n    this.message = `Value must be to ${this.decimalPlace} decimal places`;\n  }\n  setValuesAndExpressions() {\n    this.setMessage();\n    this.setFailExpression();\n  }\n}\n","import { Option } from '../question-models/select-option';\nimport { DataSource } from '../question-models/interfaces/data-source';\nimport { Observable, BehaviorSubject, of } from 'rxjs';\n\nexport class DummyDataSource implements DataSource {\n  options: Observable<Option[]>;\n  option: Observable<Option>;\n  returnErrorOnNext = false;\n\n  constructor() {}\n\n  resolveSelectedValue(value): Observable<Option> {\n    let selectOptions = this.sampleData();\n\n    selectOptions = selectOptions.map(function (obj) {\n      const option = new Option({\n        label: obj.label,\n        value: obj.concept\n      });\n      return option;\n    });\n\n    selectOptions = selectOptions.filter((option) => option.value === value);\n\n    const test: BehaviorSubject<any> = new BehaviorSubject<any>([]);\n    if (!this.returnErrorOnNext) {\n      test.next(selectOptions[0]);\n    } else {\n      test.error(new Error('Error loading Options'));\n    }\n\n    return test.asObservable();\n  }\n  fileUpload(url) {\n    return of({ image: '' });\n  }\n  fetchFile(url) {\n    return of({ image: '' });\n  }\n  searchOptions(searchText): Observable<Option[]> {\n    let selectOptions = this.sampleData();\n\n    selectOptions = selectOptions.map(function (obj) {\n      const option = new Option({\n        label: obj.label,\n        value: obj.concept\n      });\n      return option;\n    });\n\n    selectOptions = selectOptions.filter(\n      (option) => option.label.indexOf(searchText) !== -1\n    );\n\n    const test: BehaviorSubject<any> = new BehaviorSubject<any>([]);\n    if (!this.returnErrorOnNext) {\n      test.next(selectOptions);\n    } else {\n      test.error(new Error('Error loading Options'));\n    }\n\n    return test.asObservable();\n  }\n\n  sampleData(): any {\n    return [\n      {\n        concept: 'a899e0ac-1350-11df-a1f1-0026b9348838',\n        label: 'None'\n      },\n      {\n        concept: 'a8ad1276-1350-11df-a1f1-0026b9348838',\n        label: 'Breathlessness'\n      },\n      {\n        concept: 'a892e4b4-1350-11df-a1f1-0026b9348838',\n        label: 'Chest pain'\n      },\n      {\n        concept: 'a8afc8b8-1350-11df-a1f1-0026b9348838',\n        label: 'Cough = 2 weeks'\n      },\n      {\n        concept: 'd7adae14-c386-49cc-8f7c-765d8ceec566',\n        label: 'Fever for = 2 weeks'\n      },\n      {\n        concept: '3f57aafc-7162-41da-a51b-6a804cb6f5e8',\n        label: 'New exposure to household contact with TB'\n      },\n      {\n        concept: 'a89807f0-1350-11df-a1f1-0026b9348838',\n        label: 'Noticeable Weight loss'\n      },\n      {\n        concept: 'e1862fef-68ed-4df4-90dd-a00152f719aa',\n        label: 'Night sweats = 2 weeks'\n      },\n      {\n        concept: 'a8ad462e-1350-11df-a1f1-0026b9348838',\n        label: 'Abdomen'\n      },\n      {\n        concept: 'f218c60e-4b54-475a-a4fa-facab9216da8',\n        label: 'Groin'\n      },\n      {\n        concept: 'a8a774b0-1350-11df-a1f1-0026b9348838',\n        label: 'Joints'\n      },\n      {\n        concept: '4639388c-ee31-4dcf-abb4-ad71253493bb',\n        label: 'Neck Kw'\n      }\n    ];\n  }\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\n\n@Injectable()\nexport class HistoricalEncounterDataService {\n  dataSources: any = {};\n  constructor() {}\n\n  registerEncounters(name: string, encounters: any) {\n    const encStore: any = {\n      data: [],\n      getValue: (key: string, index = 0): any => {\n        const pathArray = key.split('.');\n        if (pathArray.length > 0) {\n          return this.getFirstValue(pathArray, encStore.data[index]);\n        }\n        return encStore.data[index][key];\n      },\n      getAllObjects: () => {\n        return encStore.data;\n      },\n      getSingleObject: (index = 0) => {\n        return encStore.data[index];\n      }\n    };\n\n    if (_.isArray(encounters)) {\n      const group: Array<any> = [];\n      _.each(encounters, (encounter) => {\n        group.push(this._transformEncounter(encounter));\n      });\n\n      // Sort them in reverse chronological order\n      encStore.data = _.sortBy(group, 'encounterDatetime').reverse();\n    } else {\n      // Assume a single openmrs rest encounter object.\n      encStore.data.push(this._transformEncounter(encounters));\n    }\n\n    this.putObject(name, encStore);\n  }\n\n  putObject(name, object): void {\n    this.dataSources[name] = object;\n  }\n\n  getObject(name: string): any {\n    return this.dataSources[name] || null;\n  }\n\n  getFirstValue(path: Array<string>, object: any): any {\n    const answers = [];\n\n    this.getAllValues(path, object, answers);\n\n    if (answers.length > 0) {\n      return {\n        value: answers[0],\n        valueDate: moment(object.encounterDatetime).format('ll')\n      };\n    }\n  }\n\n  getAllValues(path, object, answers) {\n    if (_.isNil(object)) {\n      return;\n    }\n\n    if (path.length <= 1) {\n      if (!_.isNil(object[path[0]])) {\n        answers.push(object[path[0]]);\n      }\n      return;\n    }\n\n    const newpath = path.splice(1);\n    const key = path[0];\n\n    if (_.isArray(object[key]) && object[key].length > 0) {\n      _.each(object[key], (childObject) => {\n        this.getAllValues(newpath.slice(0), childObject, answers);\n      });\n    } else {\n      this.getAllValues(newpath.slice(0), object[key], answers);\n    }\n  }\n\n  private _transformEncounter(encounter: any) {\n    if (_.isNil(encounter)) {\n      return;\n    }\n    // Transform encounter Level details to key value pairs.\n    const prevEncounter: any = {\n      encounterDatetime: encounter.encounterDatetime\n    };\n\n    if (encounter.location && encounter.location.uuid) {\n      prevEncounter.location = encounter.location.uuid;\n    }\n\n    if (encounter.patient && encounter.patient.uuid) {\n      prevEncounter.patient = encounter.patient.uuid;\n    }\n\n    if (encounter.form && encounter.form.uuid) {\n      prevEncounter.form = encounter.form.uuid;\n    }\n\n    if (encounter.encounterType && encounter.encounterType.uuid) {\n      prevEncounter.encounterType = encounter.encounterType.uuid;\n    }\n\n    if (encounter.provider) {\n      const provider = encounter.provider;\n      prevEncounter.provider = provider.uuid;\n    }\n\n    // Deal with obs.\n    if (encounter.obs) {\n      const processedObs: any = this._transformObs(encounter.obs);\n\n      // add in individual processed obs to prevEncounter\n      _.extend(prevEncounter, processedObs);\n    }\n\n    return prevEncounter;\n  }\n\n  private _transformObs(obs: any): any {\n    if (!obs) {\n      return null;\n    }\n\n    const obsRep: any = {};\n    if (_.isArray(obs)) {\n      _.each(obs, (singleObs) => {\n        this._augumentObs(obsRep, this._transformObs(singleObs));\n      });\n      return obsRep;\n    } else if (obs.groupMembers) {\n      const group: any = {};\n      _.each(obs.groupMembers, (member) => {\n        this._augumentObs(group, this._transformObs(member));\n      });\n\n      // Handle already existing data\n      if (obsRep[obs.concept.uuid] && _.isArray(obsRep[obs.concept.uuid])) {\n        obsRep[obs.concept.uuid].push(group);\n      } else {\n        obsRep[obs.concept.uuid] = [group];\n      }\n      return obsRep;\n    } else {\n      if (obs.value instanceof Object) {\n        obsRep[obs.concept.uuid] = obs.value.uuid;\n      } else {\n        obsRep[obs.concept.uuid] = obs.value;\n      }\n      return obsRep;\n    }\n  }\n\n  private _augumentObs(existing: any, toAdd: any): any {\n    for (const key in toAdd) {\n      if (_.has(existing, key)) {\n        // check if not an array yet\n        if (!_.isArray(existing[key])) {\n          const temp = existing[key];\n          existing[key] = [temp];\n        }\n\n        // Check whether the incoming is array (for group members)\n        if (_.isArray(toAdd[key])) {\n          Array.prototype.push.apply(existing[key], toAdd[key]);\n        } else {\n          existing[key].push(toAdd[key]);\n        }\n      } else {\n        existing[key] = toAdd[key];\n      }\n    }\n    return existing;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { HistoricalEncounterDataService } from '../services/historical-encounter-data.service';\nimport { JsExpressionHelper } from './js-expression-helper';\nimport {\n  Runnable,\n  ExpressionRunner\n} from '../expression-runner/expression-runner';\nimport { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\n\n@Injectable()\nexport class HistoricalHelperService {\n  constructor() {}\n\n  public evaluate(\n    expr: string,\n    dataSources: any,\n    additionalScopevalues: any\n  ): any {\n    const HD = new HistoricalEncounterDataService();\n    HD.registerEncounters('prevEnc', dataSources['rawPrevEnc']);\n    const deps: any = {\n      HD: HD\n    };\n\n    if (additionalScopevalues) {\n      for (const o in additionalScopevalues) {\n        if (additionalScopevalues[o]) {\n          deps[o] = additionalScopevalues[o];\n        }\n      }\n    }\n\n    const helper = new JsExpressionHelper();\n    const control: AfeFormControl = new AfeFormControl();\n    const runner: ExpressionRunner = new ExpressionRunner();\n    const runnable: Runnable = runner.getRunnable(\n      expr,\n      control,\n      helper.helperFunctions,\n      deps\n    );\n\n    return runnable.run();\n  }\n\n  public evaluatePrecondition(\n    expr: string,\n    dataSources: any,\n    historicalValue: any\n  ): any {\n    const additionalScope = {\n      histValue: historicalValue\n    };\n\n    return this.evaluate(expr, dataSources, additionalScope);\n  }\n}\n","import * as _ from 'lodash';\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\n\nimport { TextInputQuestion } from '../question-models/text-input-question';\nimport { TextAreaInputQuestion } from '../question-models/text-area-input-question';\nimport { SelectQuestion } from '../question-models/select-question';\nimport { UiSelectQuestion } from '../question-models/ui-select-question';\nimport { DateQuestion } from '../question-models/date-question';\nimport { TimeQuestion } from './../question-models/time-question';\nimport { MultiSelectQuestion } from '../question-models/multi-select-question';\nimport { QuestionGroup } from '../question-models/group-question';\nimport { RepeatingQuestion } from '../question-models/repeating-question';\nimport { QuestionBase } from '../question-models/question-base';\nimport { FileUploadQuestion } from '../question-models/file-upload-question';\nimport { TestOrderQuestion } from '../question-models/test-order-question';\nimport { AfeControlType } from '../../abstract-controls-extension/afe-control-type';\n\nimport { ValidationModel } from '../question-models/validation.model';\nimport { DateValidationModel } from '../question-models/date-validation.model';\nimport { MaxValidationModel } from '../question-models/max-validation.model';\nimport { MinValidationModel } from '../question-models/min-validation.model';\nimport { JsExpressionValidationModel } from '../question-models/js-expression-validation.model';\nimport { ConditionalValidationModel } from '../question-models/conditional-validation.model';\nimport { DecimalPointValidationModel } from '../question-models/decimal-point-validation.model';\nimport { DummyDataSource } from '../data-sources/dummy-data-source';\nimport { HistoricalHelperService } from '../helpers/historical-expression-helper-service';\nimport { Form } from './form';\nimport { CheckBoxQuestion } from '../question-models/models';\n\nexport class QuestionFactory {\n  dataSources: any = {};\n  historicalHelperService: HistoricalHelperService = new HistoricalHelperService();\n  constructor() {}\n\n  createQuestionModel(formSchema: any, form?: Form): QuestionBase {\n    if (form) {\n      const dataSources = form.dataSourcesContainer.dataSources;\n      this.dataSources = dataSources;\n    }\n    return this.toFormQuestionModel(formSchema);\n  }\n\n  toSelectQuestion(schemaQuestion: any): SelectQuestion {\n    const question = new SelectQuestion({ options: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.options = schemaQuestion.questionOptions.answers.map(function (\n      obj\n    ) {\n      return {\n        label: obj.label,\n        value: obj.concept\n      };\n    });\n\n    const options: any = question.options;\n    options.splice(0, 0, {\n      label: '',\n      value: ''\n    });\n\n    question.renderingType = schemaQuestion.questionOptions.rendering;\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toNumericQuestion(schemaQuestion: any): TextInputQuestion {\n    const question = new TextInputQuestion({\n      placeholder: '',\n      type: '',\n      key: ''\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'number';\n    question.placeholder = schemaQuestion.questionOptions.placeholder;\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.placeholder = schemaQuestion.questionOptions.placeholder || '';\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toNumberQuestion(schemaQuestion: any): TextInputQuestion {\n    const question = new TextInputQuestion({\n      placeholder: '',\n      type: '',\n      key: ''\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'number';\n    question.placeholder = schemaQuestion.questionOptions.placeholder || '';\n    question.extras = schemaQuestion;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    question.validators = this.addValidators(schemaQuestion);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toDecimalQuestion(schemaQuestion: any): TextInputQuestion {\n    const question = new TextInputQuestion({\n      placeholder: '',\n      type: '',\n      key: ''\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'decimal';\n    question.placeholder = schemaQuestion.questionOptions.placeholder || '';\n    question.extras = schemaQuestion;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    question.validators = this.addValidators(schemaQuestion);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toDateQuestion(schemaQuestion: any): DateQuestion {\n    if (schemaQuestion.type === 'encounterDatetime') {\n      return this.toEncounterDatetimeQuestion(schemaQuestion);\n    }\n    const question = new DateQuestion({ type: '', key: '' });\n    question.renderingType = 'date';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.showTime = schemaQuestion.questionOptions.showTime as boolean;\n    question.showWeeksAdder = schemaQuestion.questionOptions.weeksList\n      ? true\n      : false;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toTimeQuestion(schemaQuestion: any): TimeQuestion {\n    const question = new TimeQuestion({ type: '', key: '' });\n    question.renderingType = 'time';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toEncounterDatetimeQuestion(schemaQuestion: any): DateQuestion {\n    const question = new DateQuestion({ type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.renderingType = 'date';\n    question.key = schemaQuestion.id;\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.showWeeksAdder = schemaQuestion.questionOptions.weeksList\n      ? true\n      : false;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n    question.showTime = true;\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toCheckBoxQuestion(schemaQuestion: any): CheckBoxQuestion {\n    const question = new CheckBoxQuestion({ options: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.extras = schemaQuestion;\n    question.options = schemaQuestion.questionOptions.answers.map((obj) => {\n      return {\n        label: obj.label,\n        value: obj.concept\n      };\n    });\n    question.options.splice(0, 0);\n\n    question.renderingType = schemaQuestion.questionOptions.rendering;\n    const mappings: any = {\n      label: 'label',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toMultiCheckboxQuestion(schemaQuestion: any): MultiSelectQuestion {\n    const question = new MultiSelectQuestion({\n      renderType: '',\n      options: [],\n      type: '',\n      key: ''\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.options = schemaQuestion.questionOptions.answers.map(function (\n      obj\n    ) {\n      return {\n        label: obj.label,\n        value: obj.concept\n      };\n    });\n    question.validators = this.addValidators(schemaQuestion);\n    question.dataSource = new DummyDataSource();\n    question.extras = schemaQuestion;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toTextAreaQuestion(schemaQuestion: any): TextAreaInputQuestion {\n    const question = new TextAreaInputQuestion({\n      isExpanded: false,\n      rows: 18,\n      placeholder: '',\n      type: '',\n      key: ''\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.placeholder = schemaQuestion.questionOptions.placeholder;\n    question.isExpanded = schemaQuestion.isExpanded;\n    question.rows = schemaQuestion.questionOptions.rows;\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.placeholder = schemaQuestion.questionOptions.placeholder || '';\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toTextQuestion(schemaQuestion: any): TextInputQuestion {\n    const question = new TextInputQuestion({\n      placeholder: '',\n      type: '',\n      key: ''\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'text';\n    question.placeholder = schemaQuestion.questionOptions.placeholder;\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.placeholder = schemaQuestion.questionOptions.placeholder || '';\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toFileUploadQuestion(schemaQuestion: any): FileUploadQuestion {\n    const question = new FileUploadQuestion({ type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'file';\n    question.dataSource = 'file';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toDrugQuestion(schemaQuestion: any): SelectQuestion {\n    const question = new SelectQuestion({ options: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource = 'drug';\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toProblemQuestion(schemaQuestion: any): SelectQuestion {\n    const question = new SelectQuestion({ options: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource = 'problem';\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toConceptAnswerSelect(schemaQuestion: any): SelectQuestion {\n    const question = new SelectQuestion({ options: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource =\n      schemaQuestion.questionOptions.dataSource || 'conceptAnswers';\n    question.dataSourceOptions = {\n      concept: schemaQuestion.questionOptions.concept\n    };\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toRepeatingQuestion(schemaQuestion: any): RepeatingQuestion {\n    const question = new RepeatingQuestion({\n      questions: [],\n      type: '',\n      key: ''\n    });\n    question.label = schemaQuestion.label;\n    question.questions = this.getChildrenQuestionModels(\n      schemaQuestion.questions\n    );\n    question.key = schemaQuestion.id;\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n\n    if (schemaQuestion.type === 'testOrder') {\n      const testOrder = this.toTestOrderQuestion(schemaQuestion);\n      const orders = [];\n      orders.push(testOrder);\n      question.questions = orders;\n    }\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toGroupQuestion(schemaQuestion: any): QuestionGroup {\n    const question = new QuestionGroup({ questions: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.questions = this.getChildrenQuestionModels(\n      schemaQuestion.questions\n    );\n    question.key = schemaQuestion.id;\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toPageQuestion(schemaQuestion: any): QuestionGroup {\n    const question = new QuestionGroup({ questions: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.label;\n    question.renderingType = 'page';\n    question.controlType = AfeControlType.None;\n    question.questions = [];\n    schemaQuestion.sections.forEach((element) => {\n      question.questions.push(this.toSectionQuestion(element));\n    });\n    return question;\n  }\n\n  toFormQuestionModel(schemaQuestion: any): QuestionGroup {\n    const question = new QuestionGroup({ questions: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.label;\n    question.renderingType = 'form';\n    question.controlType = AfeControlType.AfeFormGroup;\n    question.extras = schemaQuestion;\n    question.questions = [];\n    schemaQuestion.pages.forEach((element) => {\n      question.questions.push(this.toPageQuestion(element));\n    });\n\n    return question;\n  }\n\n  toSectionQuestion(schemaQuestion: any): QuestionGroup {\n    const question = new QuestionGroup({ questions: [], type: '', key: '' });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.label;\n    question.renderingType = 'section';\n    question.controlType = AfeControlType.None;\n    question.isExpanded = schemaQuestion.isExpanded === 'true' ? true : false;\n    question.questions = this.getSchemaQuestions(schemaQuestion.questions);\n    return question;\n  }\n\n  toPersonAttributeQuestion(schemaQuestion: any): UiSelectQuestion {\n    const question = new UiSelectQuestion({\n      options: [],\n      type: '',\n      key: '',\n      searchFunction: function () {},\n      resolveFunction: function () {}\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource = 'personAttribute';\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toEncounterProviderQuestion(schemaQuestion: any): UiSelectQuestion {\n    const question = new UiSelectQuestion({\n      options: [],\n      type: '',\n      key: '',\n      searchFunction: function () {},\n      resolveFunction: function () {}\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource = 'provider';\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toFieldSetQuestion(schemaQuestion: any): QuestionGroup {\n    const toReturn = this.toGroupQuestion(schemaQuestion);\n    toReturn.renderingType = 'field-set';\n    return toReturn;\n  }\n\n  toEncounterLocationQuestion(schemaQuestion: any): UiSelectQuestion {\n    const question = new UiSelectQuestion({\n      options: [],\n      type: '',\n      key: '',\n      searchFunction: function () {},\n      resolveFunction: function () {}\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = schemaQuestion.type;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource = 'location';\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toAmrsLocationsQuestion(schemaQuestion: any): UiSelectQuestion {\n    const question = new UiSelectQuestion({\n      options: [],\n      type: '',\n      key: '',\n      searchFunction: function () {},\n      resolveFunction: function () {}\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = schemaQuestion.type;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource = 'amrsLocations';\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toSiblingLocationsQuestion(schemaQuestion: any): UiSelectQuestion {\n    const question = new UiSelectQuestion({\n      options: [],\n      type: '',\n      key: '',\n      searchFunction: function () {},\n      resolveFunction: function () {}\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = schemaQuestion.type;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource = 'siblingLocations';\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toNonAmrsLocationsQuestion(schemaQuestion: any): UiSelectQuestion {\n    const question = new UiSelectQuestion({\n      options: [],\n      type: '',\n      key: '',\n      searchFunction: function () {},\n      resolveFunction: function () {}\n    });\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.renderingType = schemaQuestion.type;\n    question.renderingType = 'remote-select';\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.dataSource = 'nonAmrsLocations';\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n\n    this.copyProperties(mappings, schemaQuestion, question);\n    this.addDisableOrHideProperty(schemaQuestion, question);\n    this.addAlertProperty(schemaQuestion, question);\n    this.addHistoricalExpressions(schemaQuestion, question);\n    this.addCalculatorProperty(schemaQuestion, question);\n    return question;\n  }\n\n  toTestOrderQuestion(schemaQuestion: any): TestOrderQuestion {\n    const question = new TestOrderQuestion({\n      type: '',\n      key: '',\n      orderType: '',\n      selectableOrders: [],\n      orderSettingUuid: '',\n      label: '',\n      rendering: ''\n    });\n\n    question.label = schemaQuestion.label;\n    question.key = schemaQuestion.id;\n    question.validators = this.addValidators(schemaQuestion);\n    question.extras = schemaQuestion;\n    question.options = schemaQuestion.questionOptions.selectableOrders.map(\n      function (obj) {\n        return {\n          label: obj.label,\n          value: obj.concept\n        };\n      }\n    );\n\n    const mappings: any = {\n      label: 'label',\n      required: 'required',\n      id: 'key'\n    };\n    this.copyProperties(mappings, schemaQuestion, question);\n    return question;\n  }\n\n  getSchemaQuestions(schema: any): any {\n    const listQuestions = new Array();\n    this.getQuestions(schema, listQuestions);\n    return listQuestions;\n  }\n\n  getQuestions(schema: any, foundArray: any): any {\n    if (!Array.isArray(foundArray)) {\n      foundArray = [];\n    }\n    if (Array.isArray(schema)) {\n      for (const property in schema) {\n        if (schema.hasOwnProperty(property)) {\n          this.getQuestions(schema[property], foundArray);\n        }\n      }\n    }\n\n    if (schema && !Array.isArray(schema) && typeof schema === 'object') {\n      if (schema.questionOptions) {\n        if (\n          schema.questionOptions.rendering === 'group' ||\n          schema.questionOptions.rendering === 'repeating'\n        ) {\n          // schema.questions = this.getGroupMembers(schema.questions);\n          foundArray.push(\n            this.toModel(schema, schema.questionOptions.rendering)\n          );\n        } else if (schema.questionOptions.rendering === 'field-set') {\n        } else {\n          foundArray.push(\n            this.toModel(schema, schema.questionOptions.rendering)\n          );\n        }\n      } else {\n        for (const o in schema) {\n          if (schema.hasOwnProperty(o)) {\n            this.getQuestions(schema[o], foundArray);\n          }\n        }\n      }\n    }\n  }\n\n  getChildrenQuestionModels(schema: any): any {\n    const children = [];\n    this.getQuestions(schema, children);\n    return children;\n  }\n\n  toModel(schema: any, renderType: string): any {\n    if (renderType === 'ui-select-extended') {\n      renderType = schema.type;\n    }\n    if (!schema.id) {\n      schema['id'] = this.generateId(10);\n    }\n\n    if (\n      schema.questionOptions &&\n      (schema.questionOptions.showDate === true ||\n        schema.questionOptions.showDate === 'true')\n    ) {\n      schema = this.convertOldVersionComplexObsQuestionToNewVersion(schema);\n      renderType = 'field-set';\n    }\n\n    switch (renderType) {\n      case 'select':\n        return this.toSelectQuestion(schema);\n      case 'single-select':\n        return this.toSelectQuestion(schema);\n      case 'multi-select':\n        return this.toSelectQuestion(schema);\n      case 'numeric':\n        return this.toNumericQuestion(schema);\n      case 'number':\n        return this.toNumberQuestion(schema);\n      case 'decimal':\n        return this.toDecimalQuestion(schema);\n      case 'encounterDatetime':\n        return this.toEncounterDatetimeQuestion(schema);\n      case 'date':\n        return this.toDateQuestion(schema);\n      case 'time':\n        return this.toTimeQuestion(schema);\n      case 'multiCheckbox':\n        return this.toMultiCheckboxQuestion(schema);\n      case 'drug':\n        return this.toDrugQuestion(schema);\n      case 'problem':\n        return this.toProblemQuestion(schema);\n      case 'group':\n        return this.toGroupQuestion(schema);\n      case 'field-set':\n        return this.toFieldSetQuestion(schema);\n      case 'repeating':\n        return this.toRepeatingQuestion(schema);\n      case 'personAttribute':\n        return this.toPersonAttributeQuestion(schema);\n      case 'text':\n        return this.toTextQuestion(schema);\n      case 'textarea':\n        return this.toTextAreaQuestion(schema);\n      case 'select-concept-answers':\n        return this.toConceptAnswerSelect(schema);\n      case 'encounterLocation':\n        return this.toEncounterLocationQuestion(schema);\n      case 'amrsLocations':\n        return this.toAmrsLocationsQuestion(schema);\n      case 'nonAmrsLocations':\n        return this.toNonAmrsLocationsQuestion(schema);\n      case 'siblingLocations':\n        return this.toSiblingLocationsQuestion(schema);\n      case 'encounterDatetime':\n        return this.toEncounterDatetimeQuestion(schema);\n      case 'encounterProvider':\n        return this.toEncounterProviderQuestion(schema);\n      case 'radio':\n        return this.toCheckBoxQuestion(schema);\n      case 'checkbox':\n        return this.toCheckBoxQuestion(schema);\n      case 'encounterProvider':\n        return this.toEncounterProviderQuestion(schema);\n      case 'file':\n        return this.toFileUploadQuestion(schema);\n      default:\n        console.warn('New Schema Question Type found.........' + renderType);\n        return this.toTextQuestion(schema);\n    }\n  }\n\n  convertOldVersionComplexObsQuestionToNewVersion(schemaQuestion: any) {\n    const converted: any = {};\n    converted.type = 'complex-obs';\n    converted.label = schemaQuestion.label;\n    converted.id = 'complex_' + schemaQuestion.id;\n    converted.questionOptions = {};\n    converted.questionOptions.concept = schemaQuestion.questionOptions.concept;\n    converted.questionOptions.rendering = 'field-set';\n    converted.questions = [];\n    converted.validators = [];\n\n    const mainField: any = JSON.parse(JSON.stringify(schemaQuestion));\n    mainField.type = 'complex-obs-child';\n    delete mainField.questionOptions.showDate;\n    delete mainField.questionOptions.shownDateOptions;\n    mainField.questionOptions.obsField = 'value';\n\n    const dateField: any = {};\n    dateField.type = 'complex-obs-child';\n    dateField.label = 'Date of ' + mainField.label;\n    dateField.id = 'date_' + mainField.id;\n    dateField.questionOptions = {};\n    dateField.questionOptions.concept = schemaQuestion.questionOptions.concept;\n    dateField.questionOptions.rendering = 'date';\n    dateField.questionOptions.obsField = 'obsDatetime';\n    const dateOptions: any = (Object as any).assign(\n      {},\n      schemaQuestion.questionOptions.shownDateOptions\n    );\n    dateField.validators = dateOptions.validators;\n    dateField.hide = dateOptions.hide;\n\n    converted.questions.push(mainField);\n    converted.questions.push(dateField);\n\n    return converted;\n  }\n\n  copyProperties(mappings: any, source: any, destination: QuestionBase) {\n    for (const property in source) {\n      if (\n        mappings.hasOwnProperty(property) &&\n        destination.hasOwnProperty(mappings[property])\n      ) {\n        destination[mappings[property]] = source[property];\n      }\n    }\n  }\n\n  addValidators(schemaQuestion: any): Array<ValidationModel> {\n    const validators: Array<ValidationModel> = [];\n\n    if (schemaQuestion.validators) {\n      // TODO - add more validator types\n      _.forEach(schemaQuestion.validators, (validator: any) => {\n        switch (validator.type) {\n          case 'date':\n            validators.push(new DateValidationModel(validator));\n            break;\n          case 'js_expression':\n            validators.push(new JsExpressionValidationModel(validator));\n            break;\n          case 'decimal':\n            const decimalModel = new DecimalPointValidationModel(validator);\n            decimalModel.setValuesAndExpressions();\n            validators.push(decimalModel);\n            break;\n          case 'conditionalAnswered':\n            validators.push(new ConditionalValidationModel(validator));\n            break;\n          default:\n            validators.push(new ValidationModel(validator));\n            break;\n        }\n      });\n    }\n\n    const questionOptions = schemaQuestion.questionOptions;\n    const renderingType = questionOptions ? questionOptions.rendering : '';\n    if (renderingType === 'number' || renderingType === 'decimal') {\n      if (questionOptions.max && questionOptions.min) {\n        validators.push(\n          new MaxValidationModel({\n            type: 'max',\n            max: questionOptions.max\n          })\n        );\n        validators.push(\n          new MinValidationModel({\n            type: 'min',\n            min: questionOptions.min\n          })\n        );\n      }\n    }\n\n    // add conditional required validators\n    if (typeof schemaQuestion.required === 'object') {\n      const required: any = schemaQuestion.required;\n\n      if (required.type === 'conditionalRequired') {\n        validators.push(\n          new ConditionalValidationModel({\n            referenceQuestionId: required.referenceQuestionId,\n            referenceQuestionAnswers: required.referenceQuestionAnswers,\n            type: required.type,\n            message: required.message\n          })\n        );\n      }\n    }\n\n    return validators;\n  }\n\n  addHistoricalExpressions(schemaQuestion: any, question: QuestionBase): any {\n    if (\n      schemaQuestion.historicalExpression &&\n      schemaQuestion.historicalExpression.length > 0\n    ) {\n      question.setHistoricalValue(true);\n      if (schemaQuestion.showHistoricalEncounterDate !== undefined) {\n        question.showHistoricalEncounterDate(\n          schemaQuestion.showHistoricalEncounterDate === 'true'\n        );\n      } else {\n        question.showHistoricalEncounterDate();\n      }\n      const origValue = this.historicalHelperService.evaluate(\n        schemaQuestion.historicalExpression,\n        this.dataSources,\n        undefined\n      );\n      question.historicalDataValue = origValue;\n      // console.info('historical value', origValue);\n      // console.info('historical data question :::', question);\n      // console.info('schema data question :::', schemaQuestion);\n\n      if (schemaQuestion.historicalPrepopulateCondition && origValue) {\n        const toPopulate = this.historicalHelperService.evaluatePrecondition(\n          schemaQuestion.historicalPrepopulateCondition,\n          this.dataSources,\n          origValue\n        );\n\n        if (toPopulate) {\n          question.defaultValue = origValue.value;\n        }\n        return; // don't try to evaluate the other option\n      }\n\n      if (schemaQuestion.historicalPrepopulate && origValue) {\n        // sample schema options for this branch\n        // \"historicalPrepopulate\":true,\n        // \"allowedHistoricalValueAgeInDays\": 40000,\n        const valDate = moment(origValue.valueDate);\n        const differenceInDays = moment().diff(valDate, 'days');\n        if (Number.isInteger(schemaQuestion.allowedHistoricalValueAgeInDays)) {\n          if (\n            differenceInDays <= schemaQuestion.allowedHistoricalValueAgeInDays\n          ) {\n            question.defaultValue = origValue.value;\n          }\n        } else {\n          question.defaultValue = origValue.value;\n        }\n      }\n    }\n  }\n\n  addCalculatorProperty(schemaQuestion: any, question: QuestionBase): any {\n    if (\n      schemaQuestion.questionOptions &&\n      typeof schemaQuestion.questionOptions.calculate === 'object'\n    ) {\n      question.calculateExpression =\n        schemaQuestion.questionOptions.calculate.calculateExpression;\n    }\n  }\n\n  addAlertProperty(schemaQuestion: any, question: QuestionBase): any {\n    if (schemaQuestion.alert) {\n      question.alert = schemaQuestion.alert;\n    }\n    // if (typeof schemaQuestion.message === 'object') {\n    //   if (schemaQuestion.message.alertWhenExpression) {\n    //     question.message = schemaQuestion.message.alertWhenExpression;\n    //   }\n    // }\n  }\n\n  addDisableOrHideProperty(schemaQuestion: any, question: QuestionBase): any {\n    if (!!schemaQuestion.disable) {\n      question.disable = schemaQuestion.disable;\n    }\n\n    if (typeof schemaQuestion.disable === 'object') {\n      question.disable = schemaQuestion.disable.disableWhenExpression;\n    }\n\n    if (!!schemaQuestion.hide) {\n      question.hide = schemaQuestion.hide;\n    }\n    if (typeof schemaQuestion.hide === 'object') {\n      if (schemaQuestion.hide.hideWhenExpression) {\n        question.hide = schemaQuestion.hide.hideWhenExpression;\n      }\n    }\n  }\n  private generateId(x) {\n    let s = '_';\n    while (s.length < x && x > 0) {\n      const r = Math.random();\n      s +=\n        r < 0.1\n          ? Math.floor(r * 100)\n          : String.fromCharCode(Math.floor(r * 26) + (r > 0.5 ? 97 : 65));\n    }\n    return '_' + s;\n  }\n}\n","import * as _ from 'lodash';\n\nimport { FormFactory } from './form.factory';\nimport { QuestionFactory } from './question.factory';\nimport { DataSources } from '../data-sources/data-sources';\nimport { NodeBase, GroupNode, LeafNode, ArrayNode } from './form-node';\nimport { QuestionBase } from '../question-models/question-base';\nimport { AfeFormControl } from '../../abstract-controls-extension/afe-form-control';\nimport { AfeFormArray } from '../../abstract-controls-extension/afe-form-array';\n\nexport class Form {\n  public rootNode: GroupNode;\n  public valueProcessingInfo: any = {};\n  public existingOrders: any = {};\n  private _dataSourcesContainer: DataSources;\n  private _showErrors = false;\n  constructor(\n    public schema: any,\n    public formFactory: FormFactory,\n    public questionFactory: QuestionFactory\n  ) {\n    this._dataSourcesContainer = new DataSources();\n  }\n\n  get dataSourcesContainer(): DataSources {\n    return this._dataSourcesContainer;\n  }\n\n  searchNodeByPath(node: GroupNode, path, found: Array<NodeBase>) {\n    const children: NodeBase = node.children;\n\n    for (const key in children) {\n      if (children.hasOwnProperty(key)) {\n        const child: NodeBase = children[key];\n\n        if (child instanceof GroupNode) {\n          if (path === child.path) {\n            found.push(child);\n            return found;\n          }\n\n          this.searchNodeByPath(child, path, found);\n        } else if (child instanceof LeafNode) {\n          if (path === child.path) {\n            found.push(child);\n            return found;\n          }\n        } else if (child instanceof ArrayNode) {\n          if (path === child.path) {\n            found.push(child);\n            return found;\n          }\n\n          const aChild: ArrayNode = child as ArrayNode;\n\n          aChild.children.forEach((aChildNode) => {\n            this.searchNodeByPath(aChildNode, path, found);\n          });\n        }\n      }\n    }\n\n    return found;\n  }\n\n  searchNodeByQuestionId(\n    questionId: string,\n    questionType?: string\n  ): Array<NodeBase> {\n    const found = [];\n    if (questionType) {\n      this.searchNodeByQuestionType(this.rootNode, questionType, found);\n    } else {\n      this.findNodesByQuestionId(this.rootNode, questionId, found);\n    }\n    return found;\n  }\n\n  searchNodeByQuestionType(\n    rootNode: any,\n    questionType: string,\n    found: Array<NodeBase>\n  ) {\n    if (rootNode instanceof GroupNode) {\n      const nodeAsGroup = rootNode as GroupNode;\n      // tslint:disable-next-line:forin\n      for (const o in nodeAsGroup.children) {\n        this.searchNodeByQuestionType(\n          nodeAsGroup.children[o],\n          questionType,\n          found\n        );\n      }\n    }\n\n    if (rootNode instanceof ArrayNode) {\n      const nodeAsArray = rootNode as ArrayNode;\n\n      nodeAsArray.children.forEach((node) => {\n        this.searchNodeByQuestionType(node, questionType, found);\n      });\n    }\n\n    if (rootNode instanceof LeafNode) {\n      const questionBase: QuestionBase = rootNode.question;\n\n      if (\n        questionBase.extras &&\n        questionBase.extras.type &&\n        questionBase.extras.type === questionType\n      ) {\n        found.push(rootNode);\n      }\n    }\n  }\n\n  private findNodesByQuestionId(\n    rootNode: NodeBase,\n    questionId: string,\n    results: Array<NodeBase>\n  ) {\n    if (rootNode.question.key === questionId) {\n      results.push(rootNode);\n    }\n\n    if (rootNode instanceof GroupNode) {\n      const nodeAsGroup = rootNode as GroupNode;\n      // tslint:disable-next-line:forin\n      for (const o in nodeAsGroup.children) {\n        this.findNodesByQuestionId(\n          nodeAsGroup.children[o],\n          questionId,\n          results\n        );\n      }\n    }\n\n    if (rootNode instanceof ArrayNode) {\n      const nodeAsArray = rootNode as ArrayNode;\n\n      nodeAsArray.children.forEach((node) => {\n        this.findNodesByQuestionId(node, questionId, results);\n      });\n    }\n  }\n\n  get valid() {\n    return this.rootNode.control.valid;\n  }\n\n  set showErrors(show: boolean) {\n    this._showErrors = show;\n  }\n\n  get showErrors() {\n    return this._showErrors;\n  }\n\n  markInvalidControls(node: GroupNode, invalidControlNodes?: any) {\n    const children: NodeBase = node.children;\n\n    for (const key in children) {\n      if (children.hasOwnProperty(key)) {\n        const child: NodeBase = children[key];\n\n        if (child instanceof GroupNode) {\n          this.markInvalidControls(child, invalidControlNodes);\n        } else if (child instanceof LeafNode) {\n          const questionBase: QuestionBase = (child as LeafNode).question;\n\n          if (questionBase.key && questionBase.key.length > 0) {\n            const c: AfeFormControl | AfeFormArray = child.control as\n              | AfeFormControl\n              | AfeFormArray;\n\n            if (!c.valid && !c.disabled) {\n              if (invalidControlNodes) {\n                invalidControlNodes.push(child);\n              }\n\n              c.markAsTouched();\n            }\n          }\n        } else if (child instanceof ArrayNode) {\n          const arrayNode: ArrayNode = child as ArrayNode;\n\n          if (\n            arrayNode &&\n            arrayNode.children &&\n            arrayNode.children.length > 0\n          ) {\n            _.forEach(arrayNode.children, (groupNode: any) => {\n              this.markInvalidControls(groupNode, invalidControlNodes);\n            });\n          }\n        }\n      }\n    }\n\n    return invalidControlNodes;\n  }\n\n  updateHiddenDisabledStateForAllControls() {\n    this._updateHiddenDisabledStateForAllControls(this.rootNode);\n  }\n\n  updateAlertsForAllControls() {\n    this._updateAlertsForAllControls(this.rootNode);\n  }\n\n  private _updateAlertsForAllControls(rootNode: NodeBase) {\n    if (rootNode.control) {\n      if ((rootNode.control as any).updateAlert) {\n        (rootNode.control as any).updateAlert();\n      }\n    }\n\n    if (rootNode instanceof GroupNode) {\n      const nodeAsGroup = rootNode as GroupNode;\n      // tslint:disable-next-line:forin\n      for (const o in nodeAsGroup.children) {\n        this._updateAlertsForAllControls(nodeAsGroup.children[o]);\n      }\n    }\n\n    if (rootNode instanceof ArrayNode) {\n      const nodeAsArray = rootNode as ArrayNode;\n\n      nodeAsArray.children.forEach((node) => {\n        this._updateAlertsForAllControls(node);\n      });\n    }\n  }\n  private _updateHiddenDisabledStateForAllControls(rootNode: NodeBase) {\n    if (rootNode.control) {\n      if ((rootNode.control as any).updateDisabledState) {\n        (rootNode.control as any).updateDisabledState();\n      }\n\n      if ((rootNode.control as any).updateHiddenState) {\n        (rootNode.control as any).updateHiddenState();\n      }\n    }\n\n    if (rootNode instanceof GroupNode) {\n      const nodeAsGroup = rootNode as GroupNode;\n      // tslint:disable-next-line:forin\n      for (const o in nodeAsGroup.children) {\n        this._updateHiddenDisabledStateForAllControls(nodeAsGroup.children[o]);\n      }\n    }\n\n    if (rootNode instanceof ArrayNode) {\n      const nodeAsArray = rootNode as ArrayNode;\n\n      nodeAsArray.children.forEach((node) => {\n        this._updateHiddenDisabledStateForAllControls(node);\n      });\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n// import { AbstractControl } from '@angular/forms';\n\nimport { LeafNode, GroupNode, ArrayNode, NodeBase } from './form-node';\nimport {\n  QuestionBase,\n  NestedQuestion,\n  RepeatingQuestion,\n  QuestionGroup\n} from '../question-models/models';\nimport { FormControlService } from './form-control.service';\nimport { QuestionFactory } from './question.factory';\nimport {\n  AfeFormGroup,\n  AfeControlType,\n  AfeFormArray\n} from '../../abstract-controls-extension';\nimport { ControlRelationsFactory } from './control-relations.factory';\nimport { Validations } from '../validators/validations';\n\nimport { Form } from './form';\n\n@Injectable()\nexport class FormFactory {\n  public hd: any = {\n    getValue: () => {\n      return 20;\n    }\n  };\n\n  constructor(\n    public controlService: FormControlService,\n    public questionFactroy: QuestionFactory,\n    public controlRelationsFactory: ControlRelationsFactory\n  ) {}\n\n  createForm(schema: any, dataSource?: any): Form {\n    const form: Form = new Form(schema, this, this.questionFactroy);\n    if (dataSource) {\n      for (const key in dataSource) {\n        if (dataSource.hasOwnProperty(key)) {\n          form.dataSourcesContainer.registerDataSource(\n            key,\n            dataSource[key],\n            false\n          );\n        }\n      }\n    }\n    const question = this.questionFactroy.createQuestionModel(schema, form);\n    form.rootNode = this.createNode(question, null, null, form) as GroupNode;\n\n    this.buildRelations(form.rootNode);\n    form.updateHiddenDisabledStateForAllControls();\n    form.updateAlertsForAllControls();\n    return form;\n  }\n\n  buildRelations(rootNode: GroupNode) {\n    Validations.JSExpressionValidatorsEnabled = false;\n    this.controlRelationsFactory.buildRelations(rootNode);\n\n    // enable js expression validations\n    Validations.JSExpressionValidatorsEnabled = true;\n  }\n\n  createNode(\n    question: QuestionBase | NestedQuestion,\n    parentNode?: GroupNode,\n    parentControl?: AfeFormGroup,\n    form?: Form\n  ): NodeBase {\n    let node: NodeBase = null;\n    if (question instanceof NestedQuestion) {\n      if (question instanceof RepeatingQuestion) {\n        node = this.createArrayNode(question, parentNode, parentControl, form);\n      } else {\n        node = this.createGroupNode(question, parentNode, parentControl, form);\n      }\n    } else {\n      node = this.createLeafNode(question, parentNode, parentControl, form);\n    }\n    return node;\n  }\n\n  createLeafNode(\n    question: QuestionBase,\n    parentNode: GroupNode,\n    parentControl?: AfeFormGroup,\n    form?: Form\n  ): LeafNode {\n    const controlModel = this.controlService.generateControlModel(\n      question,\n      parentControl,\n      false,\n      form\n    );\n    return new LeafNode(\n      question,\n      controlModel,\n      null,\n      form,\n      parentNode ? parentNode.path : undefined\n    );\n  }\n\n  createGroupNode(\n    question: NestedQuestion,\n    parentNode?: GroupNode,\n    parentControl?: AfeFormGroup,\n    form?: Form\n  ): GroupNode {\n    const controlModel = this.controlService.generateControlModel(\n      question,\n      parentControl,\n      false,\n      form\n    ) as AfeFormGroup;\n    const groupNode = new GroupNode(\n      question,\n      controlModel,\n      null,\n      form,\n      parentNode ? parentNode.path : undefined\n    );\n    this.createNodeChildren(\n      question,\n      groupNode,\n      controlModel || parentControl,\n      form\n    );\n    return groupNode;\n  }\n\n  createArrayNode(\n    question: NestedQuestion,\n    parentNode?: GroupNode,\n    parentControl?: AfeFormGroup,\n    form?: Form\n  ): ArrayNode {\n    const controlModel = this.controlService.generateControlModel(\n      question,\n      parentControl,\n      false,\n      form\n    ) as AfeFormGroup;\n    const arrayNode = new ArrayNode(\n      question,\n      controlModel,\n      parentControl,\n      this,\n      form,\n      parentNode ? parentNode.path : undefined\n    );\n    arrayNode.createChildFunc = this.createArrayNodeChild;\n    arrayNode.removeChildFunc = this.removeArrayNodeChild;\n\n    arrayNode.addChildNodeCreatedListener((node: GroupNode) => {\n      Validations.JSExpressionValidatorsEnabled = false;\n      this.controlRelationsFactory.buildArrayNodeRelations(node);\n      Validations.JSExpressionValidatorsEnabled = true;\n    });\n    return arrayNode;\n  }\n\n  createNodeChildren(\n    question: NestedQuestion,\n    node: GroupNode,\n    parentControl?: AfeFormGroup,\n    form?: Form\n  ): any {\n    question.questions.forEach((element) => {\n      const child = this.createNode(element, node, parentControl, form);\n      node.setChild(element.key, child);\n    });\n    return node.children;\n  }\n\n  createArrayNodeChild(\n    question: RepeatingQuestion,\n    node: ArrayNode,\n    factory?: FormFactory\n  ): GroupNode {\n    if (factory === null || factory === undefined) {\n      factory = this;\n    }\n    const groupQuestion: QuestionGroup = new QuestionGroup({\n      key: node.path + '.' + node.children.length + '',\n      type: 'group',\n      extras: question.extras,\n      label: '',\n      questions: question.questions\n    });\n\n    if (question.controlType === AfeControlType.None) {\n      groupQuestion.controlType = question.controlType;\n    }\n\n    const group = factory.createGroupNode(groupQuestion, null, null, node.form);\n    node.children.push(group);\n\n    if (node.control instanceof AfeFormArray) {\n      const nodeControl = node.control as AfeFormArray;\n      nodeControl.setControl(nodeControl.controls.length, group.control);\n    }\n\n    return group;\n  }\n\n  removeArrayNodeChild(index: number, node: ArrayNode) {\n    const nodeToRemove = node.children[index];\n\n    node.children.splice(index, 1);\n    if (node.control !== null || node.control !== undefined) {\n      if (node.control instanceof AfeFormArray) {\n        const control = node.control as AfeFormArray;\n        const controlIndexToRemove = control.controls.indexOf(\n          nodeToRemove.control\n        );\n        if (controlIndexToRemove >= 0) {\n          control.removeAt(controlIndexToRemove);\n        }\n      }\n    }\n  }\n}\n","import * as _ from 'lodash';\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\n\nimport {\n  NodeBase,\n  ArrayNode,\n  GroupNode,\n  LeafNode\n} from '../form-factory/form-node';\n\nexport class ObsAdapterHelper {\n  constructor() {}\n\n  findObsAnswerToQuestion(node: NodeBase, obsArray: Array<any>): Array<any> {\n    const found = [];\n\n    if (!this.isObsNode(node)) {\n      return found;\n    }\n\n    if (\n      node instanceof LeafNode ||\n      (node instanceof GroupNode && node.question.extras.type === 'complex-obs')\n    ) {\n      _.each(obsArray, (item) => {\n        if (\n          item.concept &&\n          item.concept.uuid === node.question.extras.questionOptions.concept\n        ) {\n          found.push(item);\n        }\n      });\n\n      return found;\n    }\n\n    // At this point the node is either a group or a repeating node\n\n    const childQuestionsUuids = this.getChildQuestionsConceptUuids(node);\n    if (childQuestionsUuids.length > 0) {\n      _.each(obsArray, (obs) => {\n        if (\n          obs.concept &&\n          obs.concept.uuid === node.question.extras.questionOptions.concept &&\n          Array.isArray(obs.groupMembers) &&\n          this.isSubsetOf(\n            childQuestionsUuids,\n            this.getGroupMembersConceptUuids(obs)\n          )\n        ) {\n          found.push(obs);\n        }\n      });\n    }\n\n    return found;\n  }\n\n  getChildQuestionsConceptUuids(node: NodeBase): Array<string> {\n    const found = [];\n\n    if (node.question.extras && node.question.extras.questions) {\n      _.each(node.question.extras.questions, (question) => {\n        if (question.questionOptions && question.questionOptions.concept) {\n          found.push(question.questionOptions.concept);\n        }\n      });\n    }\n\n    return found;\n  }\n\n  getGroupMembersConceptUuids(obsWithGroupMembers): Array<string> {\n    const found = [];\n\n    if (Array.isArray(obsWithGroupMembers.groupMembers)) {\n      _.each(obsWithGroupMembers.groupMembers, (member) => {\n        found.push(member.concept.uuid);\n      });\n    }\n\n    return found;\n  }\n\n  isObsNode(node: NodeBase): boolean {\n    return (\n      node.question.extras &&\n      (node.question.extras.type === 'obs' ||\n        node.question.extras.type === 'obsGroup' ||\n        node.question.extras.type === 'complex-obs' ||\n        node.question.extras.type === 'complex-obs-child')\n    );\n  }\n\n  isSubsetOf(supersetArray: Array<any>, subsetArray: Array<any>): boolean {\n    if (subsetArray.length === 0 && supersetArray.length === 0) {\n      return true;\n    }\n    return subsetArray.every((element): boolean => {\n      return supersetArray.indexOf(element) >= 0;\n    });\n  }\n\n  setSimpleObsNodeValue(node: NodeBase, obs: Array<any>) {\n    if (node && obs.length > 0) {\n      const obsToUse = obs[0];\n\n      // set initial value\n      node.initialValue = obsToUse;\n\n      if (!this.isEmpty(obsToUse.value) && obsToUse.value.uuid) {\n        // answer to the obs is a concept, use uuid value\n        this.setNodeFormControlValue(node, obsToUse.value.uuid);\n      } else if (!this.isEmpty(obsToUse.value)) {\n        this.setNodeFormControlValue(node, obsToUse.value);\n      }\n    }\n  }\n\n  setMultiselectObsNodeValue(node: NodeBase, obs: Array<any>) {\n    if (node && obs.length > 0) {\n      node.initialValue = obs;\n\n      const obsUuids = [];\n      for (const m of obs) {\n        obsUuids.push(m.value.uuid);\n      }\n\n      this.setNodeFormControlValue(node, obsUuids);\n    }\n  }\n\n  setComplexObsNodeValue(node: NodeBase, obs: Array<any>) {\n    if (node && obs.length > 0) {\n      let valueField: LeafNode; // essential memmber\n      let dateField: LeafNode; // other member to be manipulated by user\n\n      const nodeAsGroup = node as GroupNode;\n      // tslint:disable-next-line:forin\n      for (const o in nodeAsGroup.children) {\n        if (\n          (nodeAsGroup.children[o] as LeafNode).question.extras.questionOptions\n            .obsField === 'value'\n        ) {\n          valueField = nodeAsGroup.children[o];\n        }\n\n        if (\n          (nodeAsGroup.children[o] as LeafNode).question.extras.questionOptions\n            .obsField === 'obsDatetime'\n        ) {\n          dateField = nodeAsGroup.children[o];\n        }\n      }\n\n      // set the obs value here\n      this.setNodeValue(valueField, obs);\n      node.initialValue = valueField.initialValue;\n\n      // set the date value here\n      dateField.initialValue = valueField.initialValue;\n      this.setNodeFormControlValue(\n        dateField,\n        valueField.initialValue.obsDatetime\n      );\n    }\n  }\n\n  setGroupObsNodeValue(node: NodeBase, obs: Array<any>) {\n    if (node && obs.length > 0) {\n      const groupNode = node as GroupNode;\n      groupNode.initialValue = obs[0];\n      // tslint:disable-next-line:forin\n      for (const o in groupNode.children) {\n        this.setNodeValue(groupNode.children[o], obs[0].groupMembers);\n      }\n    }\n  }\n\n  setRepeatingGroupObsNodeValue(node: NodeBase, obs: Array<any>) {\n    if (node && obs.length > 0) {\n      const arrayNode = node as ArrayNode;\n      arrayNode.initialValue = obs;\n\n      for (let i = 0; i < obs.length; i++) {\n        const createdNode = arrayNode.createChildNode();\n        this.setGroupObsNodeValue(createdNode, [obs[i]]);\n      }\n    }\n  }\n\n  setNodeValue(node: NodeBase, obs: Array<any>) {\n    switch (this.getObsNodeType(node)) {\n      case 'unknown':\n        if (node instanceof GroupNode) {\n          const groupNode = node as GroupNode;\n          // tslint:disable-next-line:forin\n          for (const o in groupNode.children) {\n            this.setNodeValue(groupNode.children[o], obs);\n          }\n          break;\n        }\n        if (node instanceof ArrayNode) {\n          const arrayNode = node as ArrayNode;\n          for (let i = 0; i < arrayNode.children.length; i++) {\n            this.setNodeValue(arrayNode.children[i], obs);\n          }\n          break;\n        }\n        break;\n      case 'simple':\n        // search asnwering obs at this point\n        const answeringObs = this.findObsAnswerToQuestion(node, obs);\n\n        // set answer here\n        this.setSimpleObsNodeValue(node, answeringObs);\n        break;\n\n      case 'multiselect':\n        // search asnwering obs at this point\n        const multiselectObs = this.findObsAnswerToQuestion(node, obs);\n\n        // set answer here\n        this.setMultiselectObsNodeValue(node, multiselectObs);\n        break;\n\n      case 'complex':\n        // search asnwering obs at this point\n        const complexObs = this.findObsAnswerToQuestion(node, obs);\n\n        // set answer here\n        this.setComplexObsNodeValue(node, complexObs);\n        break;\n\n      case 'group':\n        const groupObs = this.findObsAnswerToQuestion(node, obs);\n\n        if (groupObs.length > 0) {\n          this.setGroupObsNodeValue(node, groupObs);\n        }\n\n        break;\n      case 'repeatingGroup':\n        const repeatingGroupObs = this.findObsAnswerToQuestion(node, obs);\n\n        if (repeatingGroupObs.length > 0) {\n          this.setRepeatingGroupObsNodeValue(node, repeatingGroupObs);\n        }\n\n        break;\n      default:\n        console.error('Unknown obs node', node);\n        break;\n    }\n  }\n\n  setNodeFormControlValue(node: NodeBase, value) {\n    node.control.setValue(value);\n    // TODO: Determine if we need this call\n    // node.control.updateValueAndValidity();\n\n    // TODO: Remove this hack and put it in appropriate place\n    if (\n      node.question.enableHistoricalValue &&\n      node.initialValue !== undefined\n    ) {\n      node.question.setHistoricalValue(false);\n    }\n  }\n\n  getObsNodeType(node: NodeBase): string {\n    if (this.isObsNode(node)) {\n      if (\n        node instanceof LeafNode &&\n        (node.question.extras.questionOptions.rendering === 'multiCheckbox' ||\n          node.question.extras.questionOptions.rendering === 'checkbox' ||\n          node.question.extras.questionOptions.rendering === 'multi-select')\n      ) {\n        return 'multiselect';\n      }\n\n      if (node instanceof LeafNode) {\n        return 'simple';\n      }\n\n      if (\n        node instanceof GroupNode &&\n        node.question.extras.type === 'complex-obs'\n      ) {\n        return 'complex';\n      }\n\n      if (\n        node instanceof ArrayNode &&\n        node.question.extras.type === 'obsGroup' &&\n        node.question.extras.questionOptions.rendering === 'repeating'\n      ) {\n        return 'repeatingGroup';\n      }\n\n      if (\n        node instanceof GroupNode &&\n        node.question.extras.type === 'obsGroup'\n      ) {\n        return 'group';\n      }\n\n      return 'unknownObs';\n    }\n    return 'unknown';\n  }\n\n  // PAYLOAD GENERATION FUNCTIONS\n  getSimpleObsPayload(node: NodeBase): any {\n    // check for empty values first\n    if (this.isEmpty(node.control.value)) {\n      if (node.initialValue) {\n        // Handle case for existing voided obs\n        return {\n          uuid: node.initialValue.uuid,\n          voided: true\n        };\n      }\n      return null;\n    }\n\n    // check for exisiting, unchanged values\n    if (node.initialValue && !this.simpleNodeValueChanged(node)) {\n      return null;\n    }\n\n    // all numbers, text, concepts answers are handled in the same way\n    // no need for further formatting in this case\n    const obs: any = {\n      concept: node.question.extras.questionOptions.concept,\n      value: node.control.value\n    };\n\n    // handle date fields\n    if (node.question.extras.questionOptions.rendering === 'date') {\n      obs.value = this.toOpenMrsDateTimeString(node.control.value);\n    }\n\n    if (node.initialValue) {\n      // for existing cases, delete concept property, and add uuid\n      delete obs.concept;\n      obs.uuid = node.initialValue.uuid;\n    }\n\n    return obs;\n  }\n\n  getComplexObsPayload(node: NodeBase) {\n    let valueField: LeafNode; // essential memmber\n    let dateField: LeafNode; // other member to be manipulated by user\n\n    const nodeAsGroup = node as GroupNode;\n    // tslint:disable-next-line:forin\n    for (const o in nodeAsGroup.children) {\n      if (\n        (nodeAsGroup.children[o] as LeafNode).question.extras.questionOptions\n          .obsField === 'value'\n      ) {\n        valueField = nodeAsGroup.children[o];\n      }\n\n      if (\n        (nodeAsGroup.children[o] as LeafNode).question.extras.questionOptions\n          .obsField === 'obsDatetime'\n      ) {\n        dateField = nodeAsGroup.children[o];\n      }\n    }\n\n    const valuePayload = this.getObsNodePayload(valueField);\n    console.log('valuePayload', valuePayload);\n\n    // set obs datetime for the generated payload\n    if (valuePayload.length > 0) {\n      valuePayload[0].obsDatetime = this.toOpenMrsDateTimeString(\n        dateField.control.value\n      );\n      return valuePayload[0];\n    } else if (valuePayload.length === 0 && node.initialValue) {\n      // determine if date changed\n      if (\n        !this.areDatesEqual(\n          node.initialValue.obsDatetime,\n          dateField.control.value\n        )\n      ) {\n        const payload: any = {\n          uuid: node.initialValue.uuid\n        };\n        payload.obsDatetime = this.toOpenMrsDateTimeString(\n          dateField.control.value\n        );\n        return payload;\n      }\n    }\n    return null;\n  }\n\n  getMultiselectObsPayload(node: NodeBase): Array<any> {\n    const payload: Array<any> = [];\n\n    const existingUuids = [];\n\n    // add voided obs i.e. deleted options\n    if (Array.isArray(node.initialValue)) {\n      _.each(node.initialValue, (item) => {\n        existingUuids.push(item.value.uuid);\n        if (Array.isArray(node.control.value)) {\n          if (node.control.value.indexOf(item.value.uuid) < 0) {\n            payload.push({\n              uuid: item.uuid,\n              voided: true\n            });\n          }\n        } else {\n          // every value was deleted\n          payload.push({\n            uuid: item.uuid,\n            voided: true\n          });\n        }\n      });\n    }\n\n    // add new obs i.e they didn't exisit originally\n    if (Array.isArray(node.control.value)) {\n      _.each(node.control.value, (item) => {\n        if (existingUuids.indexOf(item) < 0) {\n          payload.push({\n            concept: node.question.extras.questionOptions.concept,\n            value: item\n          });\n        }\n      });\n    }\n\n    return payload;\n  }\n\n  getGroupPayload(node: NodeBase) {\n    const nodeAsGroup: GroupNode = node as GroupNode;\n\n    let childrenPayload = [];\n    _.each(nodeAsGroup.children, (child) => {\n      const payload = this.getObsNodePayload(child);\n      if (payload.length > 0) {\n        childrenPayload = childrenPayload.concat(payload);\n      }\n    });\n\n    if (childrenPayload.length === 0) {\n      return null;\n    }\n\n    const groupPayload: any = {\n      groupMembers: childrenPayload\n    };\n\n    if (nodeAsGroup.initialValue) {\n      groupPayload.uuid = nodeAsGroup.initialValue.uuid;\n    } else {\n      groupPayload.concept =\n        nodeAsGroup.question.extras.questionOptions.concept;\n    }\n\n    return groupPayload;\n  }\n\n  getRepeatingGroupPayload(node: NodeBase) {\n    const nodeAsArray: ArrayNode = node as ArrayNode;\n\n    let childrenPayload = [];\n\n    const groupsUuidsAfterEditting = [];\n    _.each(nodeAsArray.children, (child) => {\n      const payload = this.getObsNodePayload(child);\n      if (payload.length > 0) {\n        childrenPayload = childrenPayload.concat(payload);\n      }\n      if (child.initialValue && child.initialValue.uuid) {\n        groupsUuidsAfterEditting.push(child.initialValue.uuid);\n      }\n    });\n\n    // void deleted groups\n    // console.log('groupsUuidsAfterEditting', groupsUuidsAfterEditting);\n    if (nodeAsArray.initialValue && Array.isArray(nodeAsArray.initialValue)) {\n      _.each(nodeAsArray.initialValue, (obs) => {\n        if (groupsUuidsAfterEditting.indexOf(obs.uuid) < 0) {\n          const voidedGroup = {\n            uuid: obs.uuid,\n            voided: true\n          };\n          childrenPayload.push(voidedGroup);\n        }\n      });\n    }\n\n    if (childrenPayload.length <= 0) {\n      return null;\n    }\n    return childrenPayload;\n  }\n\n  getObsNodePayload(node: NodeBase): Array<any> {\n    let payload = [];\n\n    switch (this.getObsNodeType(node)) {\n      case 'unknown':\n        if (node instanceof GroupNode) {\n          const groupNode = node as GroupNode;\n          // tslint:disable-next-line:forin\n          for (const o in groupNode.children) {\n            const groupNodePayoad = this.getObsNodePayload(\n              groupNode.children[o]\n            );\n            if (Array.isArray(groupNodePayoad) && groupNodePayoad.length > 0) {\n              payload = payload.concat(groupNodePayoad);\n            }\n          }\n          break;\n        }\n        if (node instanceof ArrayNode) {\n          const arrayNode = node as ArrayNode;\n          for (let i = 0; i < arrayNode.children.length; i++) {\n            const arrayNodePayload = this.getObsNodePayload(\n              arrayNode.children[i]\n            );\n            if (\n              Array.isArray(arrayNodePayload) &&\n              arrayNodePayload.length > 0\n            ) {\n              payload = payload.concat(arrayNodePayload);\n            }\n          }\n          break;\n        }\n        break;\n      case 'simple':\n        const simpleObs = this.getSimpleObsPayload(node);\n        if (simpleObs !== null) {\n          payload.push(simpleObs);\n        }\n        break;\n\n      case 'multiselect':\n        const multiselectObs = this.getMultiselectObsPayload(node);\n\n        if (Array.isArray(multiselectObs) && multiselectObs.length > 0) {\n          payload = payload.concat(multiselectObs);\n        }\n        break;\n\n      case 'complex':\n        const complexObs = this.getComplexObsPayload(node);\n        if (complexObs !== null) {\n          payload.push(complexObs);\n        }\n        break;\n\n      case 'group':\n        const groupedObs = this.getGroupPayload(node);\n        if (groupedObs && groupedObs !== null) {\n          payload.push(groupedObs);\n        }\n        break;\n      case 'repeatingGroup':\n        const repeatingGroupedObs = this.getRepeatingGroupPayload(node);\n        if (\n          Array.isArray(repeatingGroupedObs) &&\n          repeatingGroupedObs.length > 0\n        ) {\n          payload = payload.concat(repeatingGroupedObs);\n        }\n        break;\n      default:\n        break;\n    }\n\n    return payload;\n  }\n\n  simpleNodeValueChanged(node: NodeBase): boolean {\n    if (node.initialValue) {\n      if (node.initialValue.value && node.initialValue.value.uuid) {\n        // question whose answer is a concept\n        return node.control.value !== node.initialValue.value.uuid;\n      }\n\n      if (node.question.extras.questionOptions.rendering === 'date') {\n        return !this.areDatesEqual(node.control.value, node.initialValue.value);\n      }\n      return node.control.value !== node.initialValue.value;\n    }\n    return false;\n  }\n\n  areDatesEqual(date1, date2) {\n    return moment(date1).isSame(date2);\n  }\n\n  isEmpty(value): boolean {\n    if (\n      value === '' ||\n      value === null ||\n      value === undefined\n      // || value === [] ||\n      // value === {}\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  toOpenMrsDateTimeString(datetime: string): string {\n    if (this.isEmpty(datetime)) {\n      return undefined;\n    } else {\n      // transform value to memoent value to avoid error\n      const formattedVal = moment(datetime).format();\n      const val = formattedVal.substring(0, 19).replace('T', ' ');\n      return this.isEmpty(val) ? undefined : val;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport 'rxjs';\n\nimport * as _ from 'lodash';\n\nimport { LeafNode, GroupNode } from '../form-factory/form-node';\nimport { Form } from '../form-factory/form';\nimport { ValueAdapter } from './value.adapter';\nimport { ObsAdapterHelper } from './obs-adapter-helper';\n\n@Injectable()\nexport class ObsValueAdapter implements ValueAdapter {\n  constructor(private helper: ObsAdapterHelper) {}\n\n  generateFormPayload(form: Form) {\n    return this.helper.getObsNodePayload(form.rootNode);\n    // TODO: Get rid of the section below when the helper is stable.\n    // // Traverse  to get all nodes\n    // let pages = this.traverse(form.rootNode);\n    // // Extract actual question nodes\n    // let questionNodes = this.getQuestionNodes(pages);\n    // // Get obs Payload\n    // return this.getObsPayload(questionNodes);\n  }\n\n  populateForm(form: Form, payload) {\n    this.helper.setNodeValue(form.rootNode, payload);\n\n    // TODO: Get rid of the section below when the helper is stable.\n    // // Traverse  to get all nodes\n    // let pages = this.traverse(form.rootNode);\n    // // Extract actual question nodes\n    // let questionNodes = this.getQuestionNodes(pages);\n    // // Extract set obs\n    // this.setValues(questionNodes, payload);\n  }\n\n  // TODO: Get rid of all the functions below as they will not be needed\n  // once the helper is stable\n\n  setValues(nodes, payload?, forcegroup?) {\n    if (nodes) {\n      for (const node of nodes) {\n        if (node instanceof LeafNode) {\n          this.setObsValue(node, payload);\n          if (\n            node.question.enableHistoricalValue &&\n            node.initialValue !== undefined\n          ) {\n            node.question.setHistoricalValue(false);\n          }\n        } else if (\n          (node.question &&\n            node.question.extras &&\n            node.question.renderingType === 'group') ||\n          forcegroup\n        ) {\n          const groupObs = _.find(payload, (o: any) => {\n            return (\n              o.concept.uuid === node.question.extras.questionOptions.concept &&\n              o.groupMembers\n            );\n          });\n          if (groupObs) {\n            if (node.node) {\n              node.node['initialValue'] = groupObs;\n            }\n\n            this.setValues(node.groupMembers, groupObs.groupMembers);\n          }\n          if (forcegroup && node.payload) {\n            this.setValues(node.groupMembers, node.payload.groupMembers);\n          }\n        } else if (\n          node instanceof GroupNode &&\n          node.question.extras.type === 'complex-obs'\n        ) {\n          this.setComplexObsValue(node, payload);\n        } else if (\n          node.question &&\n          node.question.extras &&\n          node.question.renderingType === 'repeating' &&\n          !forcegroup\n        ) {\n          this.setRepeatingGroupValues(node, payload);\n          node.node.control.updateValueAndValidity();\n        } else {\n          throw new Error('not implemented');\n        }\n      }\n    }\n  }\n\n  setObsValue(node, payload) {\n    if (\n      (node.question &&\n        node.question.extras &&\n        (node.question.extras.type === 'obs' ||\n          (node.question.extras.type === 'complex-obs-child' &&\n            node.question.extras.questionOptions.obsField === 'value')) &&\n        node.question.extras.questionOptions.rendering !== 'multiCheckbox') ||\n      node.question.extras.questionOptions.rendering !== 'checkbox' ||\n      node.question.extras.questionOptions.rendering !== 'multi-select'\n    ) {\n      const obs = _.find(payload, (o: any) => {\n        return o.concept.uuid === node.question.extras.questionOptions.concept;\n      });\n      if (obs) {\n        if (obs.value instanceof Object) {\n          node.control.setValue(obs.value.uuid);\n          node.control.updateValueAndValidity();\n        } else {\n          node.control.setValue(obs.value);\n          node.control.updateValueAndValidity();\n        }\n        node['initialValue'] = { obsUuid: obs.uuid, value: obs.value };\n      }\n    } else {\n      const multiObs = _.filter(payload, (o: any) => {\n        return o.concept.uuid === node.question.extras.questionOptions.concept;\n      });\n      if (multiObs && multiObs.length > 0) {\n        node.control.setValue(this.getMultiselectValues(multiObs));\n        node.control.updateValueAndValidity();\n        node['initialValue'] = multiObs;\n      }\n    }\n  }\n\n  setComplexObsValue(node, payload) {\n    let valueField: any;\n    let dateField: any;\n\n    // tslint:disable-next-line:forin\n    for (const o in node.children) {\n      if (\n        (node.children[o] as LeafNode).question.extras.questionOptions\n          .obsField === 'value'\n      ) {\n        valueField = node.children[o];\n      }\n\n      if (\n        (node.children[o] as LeafNode).question.extras.questionOptions\n          .obsField === 'obsDatetime'\n      ) {\n        dateField = node.children[o];\n      }\n    }\n    // set the usual obs value\n    this.setObsValue(valueField, payload);\n\n    // set the obs date\n    const obs = _.find(payload, (o: any) => {\n      return o.concept.uuid === node.question.extras.questionOptions.concept;\n    });\n\n    if (obs) {\n      dateField['initialValue'] = { obsUuid: obs.uuid, value: obs.obsDatetime };\n      (dateField as LeafNode).control.setValue(obs.obsDatetime);\n      (dateField as LeafNode).control.updateValueAndValidity();\n    }\n  }\n\n  getMultiselectValues(multiObs) {\n    const values = [];\n    for (const m of multiObs) {\n      values.push(m.value.uuid);\n    }\n    return values;\n  }\n\n  setRepeatingGroupValues(node, payload) {\n    const groupRepeatingObs = _.filter(payload, (o: any) => {\n      const found =\n        o.concept.uuid === node.question.extras.questionOptions.concept;\n      let intersect = false;\n      if (found && o.groupMembers) {\n        const obs = o.groupMembers.map((a) => {\n          return a.concept.uuid;\n        });\n\n        const schemaQuestions = node.question.questions.map((a) => {\n          return a.extras.questionOptions.concept;\n        });\n\n        intersect = _.intersection(obs, schemaQuestions).length > 0;\n      }\n      return found && intersect;\n    });\n    if (groupRepeatingObs.length > 0) {\n      node.node['initialValue'] = groupRepeatingObs;\n      for (let i = 0; i < groupRepeatingObs.length; i++) {\n        node.node.createChildNode();\n      }\n    }\n    const groups = [];\n    let index = 0;\n    for (const child of node.node.children) {\n      const children = Object.keys(child.children).map(function (key) {\n        return child.children[key];\n      });\n      const groupPayload = groupRepeatingObs[index];\n      groups.push({\n        question: node.question,\n        groupMembers: children,\n        payload: groupPayload\n      });\n      index++;\n    }\n    this.setValues(groups, groupRepeatingObs, true);\n  }\n\n  getQuestionNodes(pages) {\n    const merged = [];\n    const arrays = [];\n    for (const page of pages) {\n      for (const section of page.page) {\n        arrays.push(section.section);\n      }\n    }\n    return merged.concat.apply([], arrays);\n  }\n\n  repeatingGroup(nodes) {\n    const toReturn = [];\n    for (const node of nodes) {\n      toReturn.push({\n        question: node.question,\n        groupMembers: this.traverse(node)\n      });\n    }\n    return toReturn;\n  }\n\n  processGroup(obs, obsPayload) {\n    if (\n      obs.question &&\n      obs.question.extras &&\n      obs.question.extras.questionOptions.rendering === 'group'\n    ) {\n      const members = _.filter(\n        this.getObsPayload(obs.groupMembers),\n        (o: any) => {\n          return o.value !== '';\n        }\n      );\n\n      const mappedMembers = members.map((a) => {\n        return a.voided;\n      });\n      if (members.length > 0 && mappedMembers.every(Boolean)) {\n        obsPayload.push({\n          uuid: obs.node.initialValue.uuid,\n          voided: true\n        });\n      } else if (members.length > 0) {\n        if (obs.node.initialValue) {\n          obsPayload.push({\n            uuid: obs.node.initialValue.uuid,\n            groupMembers: members\n          });\n        } else {\n          obsPayload.push({\n            concept: obs.question.extras.questionOptions.concept,\n            groupMembers: members\n          });\n        }\n      }\n    }\n  }\n\n  mapInitialGroup(group) {\n    let current = {};\n    for (const member of group.groupMembers) {\n      let value: any = '';\n      if (member.value instanceof Object) {\n        value = member.value.uuid;\n      } else if (member.value) {\n        value = member.value;\n      } else if (member.groupMembers && member.groupMembers.length > 0) {\n        current = this.mapInitialGroup(group);\n      }\n      current[member.concept.uuid + ':' + value] = value;\n    }\n    return current;\n  }\n\n  mapModelGroup(node, value) {\n    const current = {};\n    for (const key in value) {\n      if (value.hasOwnProperty(key)) {\n        const groupQuestion: any = _.find(node.question.questions, {\n          key: key\n        });\n        const modelValue = value[key];\n        if (modelValue instanceof Object) {\n        } else if (modelValue !== '') {\n          current[\n            groupQuestion.extras.questionOptions.concept + ':' + modelValue\n          ] = modelValue;\n        }\n      }\n    }\n    return current;\n  }\n\n  processRepeatingGroups(node, obsPayload) {\n    const initialValues = [];\n    if (node.node.initialValue) {\n      for (const group of node.node.initialValue) {\n        initialValues.push({\n          uuid: group.uuid,\n          value: this.mapInitialGroup(group)\n        });\n      }\n    }\n    const repeatingModel = [];\n    for (const value of node.node.control.value) {\n      repeatingModel.push({ value: this.mapModelGroup(node, value) });\n    }\n    const deleted = this.leftOuterJoinArrays(initialValues, repeatingModel);\n    const newObs = this.leftOuterJoinArrays(repeatingModel, initialValues);\n    const groupConcept = node.question.extras.questionOptions.concept;\n    let newObsPayload = [];\n    if (deleted.length > 0) {\n      const deletedObs = this.createGroupDeletedObs(deleted);\n      for (const d of deletedObs) {\n        obsPayload.push(d);\n      }\n      if (newObs.length > 0) {\n        newObsPayload = this.createGroupNewObs(newObs, groupConcept);\n      }\n    } else {\n      newObsPayload = this.createGroupNewObs(newObs, groupConcept);\n    }\n\n    if (newObsPayload.length > 0) {\n      for (const p of newObsPayload) {\n        obsPayload.push(p);\n      }\n    }\n  }\n\n  leftOuterJoinArrays(first, second) {\n    const unique = first.filter(function (obj) {\n      return !second.some(function (obj2) {\n        return _.isEqual(obj.value, obj2.value);\n      });\n    });\n    return unique;\n  }\n\n  createGroupNewObs(payload, groupConcept) {\n    const newPayload = [];\n    for (const obs of payload) {\n      const groupPayload = [];\n      /* tslint:disable */\n      for (let key in obs.value) {\n        let concept = key.split(':')[0];\n        let value = key.split(':')[1];\n        groupPayload.push({ concept: concept, value: value });\n      }\n      newPayload.push({ concept: groupConcept, groupMembers: groupPayload });\n      /* tslint:enable */\n    }\n    return newPayload;\n  }\n\n  createGroupDeletedObs(payload) {\n    const deletedObs = [];\n    for (const d of payload) {\n      deletedObs.push({ uuid: d.uuid, voided: true });\n    }\n    return deletedObs;\n  }\n\n  getExactTime(datetime: string) {\n    return datetime.substring(0, 19).replace('T', ' ');\n  }\n\n  processObs(obs, obsPayload) {\n    if (obs.control && obs.question.extras) {\n      const obsValue = {\n        concept: obs.question.extras.questionOptions.concept,\n        value:\n          obs.question.extras.questionOptions.rendering === 'date' &&\n          !this.isEmpty(obs.control.value)\n            ? this.getExactTime(obs.control.value)\n            : obs.control.value\n      };\n\n      if (\n        obs.question.extras.questionOptions.rendering === 'multiCheckbox' ||\n        obs.question.extras.questionOptions.rendering === 'checkbox' ||\n        obs.question.extras.questionOptions.rendering === 'multi-select'\n      ) {\n        const multis = this.processMultiSelect(\n          obs.question.extras.questionOptions.concept,\n          obs.control.value\n        );\n        if (obs.initialValue) {\n          const mappedInitial = obs.initialValue.map((a) => {\n            return {\n              uuid: a.uuid,\n              value: { concept: a.concept.uuid, value: a.value.uuid }\n            };\n          });\n          const mappedCurrent = multis.map((a) => {\n            return { value: a };\n          });\n          const deletedObs = this.leftOuterJoinArrays(\n            mappedInitial,\n            mappedCurrent\n          );\n          const newObs = this.leftOuterJoinArrays(mappedCurrent, mappedInitial);\n          this.processDeletedMultiSelectObs(deletedObs, obsPayload);\n          this.processNewMultiSelectObs(newObs, obsPayload);\n        } else {\n          this.processNewMultiSelectObs(multis, obsPayload);\n        }\n      } else {\n        if (obs.initialValue && obs.initialValue.value && obsValue) {\n          this.updateOrVoidObs(obsValue, obs.initialValue, obsPayload);\n        } else if (obsValue.value !== '' && obsValue.value !== null) {\n          obsPayload.push(obsValue);\n        }\n      }\n    }\n  }\n\n  processComplexObs(node, obsPayload) {\n    let valueField: any;\n    let dateField: any;\n\n    // tslint:disable-next-line:forin\n    for (const o in node.children) {\n      if (\n        (node.children[o] as LeafNode).question.extras.questionOptions\n          .obsField === 'value'\n      ) {\n        valueField = node.children[o];\n      }\n\n      if (\n        (node.children[o] as LeafNode).question.extras.questionOptions\n          .obsField === 'obsDatetime'\n      ) {\n        dateField = node.children[o];\n      }\n    }\n\n    if (valueField) {\n      // process obs as usual\n      this.processObs(valueField, obsPayload);\n\n      // obtain the last inserted obs and set the obsDatetime\n      const createdPayload =\n        obsPayload.length > 0 ? obsPayload[obsPayload.length - 1] : undefined;\n      if (\n        createdPayload &&\n        ((createdPayload.concept &&\n          createdPayload.concept ===\n            node.question.extras.questionOptions.concept) ||\n          (valueField.initialValue &&\n            createdPayload.uuid === valueField.initialValue.obsUuid))\n      ) {\n        if (\n          dateField.initialValue &&\n          dateField.control.value !== dateField.initialValue.value\n        ) {\n          createdPayload.obsDatetime = dateField.control.value;\n        }\n      }\n    }\n  }\n\n  processDeletedMultiSelectObs(values, obsPayload) {\n    for (const value of values) {\n      obsPayload.push({ uuid: value.uuid, voided: true });\n    }\n  }\n\n  processNewMultiSelectObs(values, obsPayload) {\n    for (const multi of values) {\n      if (multi.value instanceof Object) {\n        obsPayload.push(multi.value);\n      } else {\n        obsPayload.push(multi);\n      }\n    }\n  }\n\n  updateOrVoidObs(obsValue, initialValue, obsPayload) {\n    if (this.isEmpty(obsValue.value) && initialValue.value) {\n      obsPayload.push({ uuid: initialValue.obsUuid, voided: true });\n    } else if (!this.isEmpty(obsValue.value) && initialValue.value) {\n      obsPayload.push({ uuid: initialValue.obsUuid, value: obsValue.value });\n    }\n  }\n\n  isEmpty(value): boolean {\n    if (\n      value === '' ||\n      value === null ||\n      value === undefined\n      // || value === [] ||\n      // value === {}\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  traverse(o, type?) {\n    const questions = [];\n    if (o.children) {\n      if (o.children instanceof Array) {\n        const returned = this.repeatingGroup(o.children);\n        return returned;\n      }\n      if (o.children instanceof Object) {\n        for (const key in o.children) {\n          if (o.children.hasOwnProperty(key)) {\n            switch (o.children[key].question.renderingType) {\n              case 'page':\n                const page = this.traverse(o.children[key]);\n                questions.push({\n                  page: page,\n                  label: o.children[key].question.label\n                });\n                break;\n              case 'section':\n                const section = this.traverse(o.children[key]);\n                questions.push({\n                  section: section,\n                  node: o.children[key],\n                  label: o.children[key].question.label\n                });\n                break;\n              case 'group':\n                const qs = this.traverse(o.children[key]);\n                questions.push({\n                  node: o.children[key],\n                  question: o.children[key].question,\n                  groupMembers: qs\n                });\n                break;\n              case 'repeating':\n                const rep = this.repeatingGroup(o.children[key].children);\n                questions.push({\n                  node: o.children[key],\n                  question: o.children[key].question,\n                  groupMembers: rep\n                });\n                break;\n              default:\n                questions.push(o.children[key]);\n                break;\n            }\n          }\n        }\n      }\n    }\n    return questions;\n  }\n\n  processMultiSelect(concept, values) {\n    const multiSelectObs = [];\n    if (values && values !== null) {\n      for (const value of values) {\n        const obs = {\n          concept: concept,\n          value: value\n        };\n        multiSelectObs.push(obs);\n      }\n    }\n    return multiSelectObs;\n  }\n\n  isObs(node) {\n    return (\n      node.question.extras.type === 'obs' ||\n      node.question.extras.type === 'obsGroup' ||\n      node.question.extras.type === 'complex-obs'\n    );\n  }\n\n  getObsPayload(nodes) {\n    const obsPayload = [];\n    for (const node of nodes) {\n      if (this.isObs(node)) {\n        if (\n          (node.groupMembers,\n          node.question.extras.questionOptions.rendering === 'group')\n        ) {\n          this.processGroup(node, obsPayload);\n        } else if (\n          (node.groupMembers,\n          node.question.extras.questionOptions.rendering === 'repeating')\n        ) {\n          this.processRepeatingGroups(node, obsPayload);\n        } else if (\n          node instanceof GroupNode &&\n          (node as GroupNode).question.extras.type === 'complex-obs'\n        ) {\n          this.processComplexObs(node, obsPayload);\n        } else {\n          this.processObs(node, obsPayload);\n        }\n      }\n    }\n    return obsPayload;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Form } from '../form-factory/form';\nimport { ValueAdapter } from './value.adapter';\nimport * as _ from 'lodash';\n@Injectable()\nexport class OrderValueAdapter implements ValueAdapter {\n  formOrderNodes = [];\n  private provider = '';\n\n  generateFormPayload(form: Form) {\n    this.formOrderNodes = [];\n    this._setOrderProvider(form);\n    this._findTestOrderQuestionNodes(form.rootNode);\n    return this._createOrdersPayload(this.formOrderNodes, form);\n  }\n\n  populateForm(form: Form, payload) {\n    form.existingOrders = payload;\n    this.formOrderNodes = [];\n    this._findTestOrderQuestionNodes(form.rootNode);\n    const existingOrders = this._getExistingOrders(form);\n    this._setOrderValues(this.formOrderNodes, existingOrders);\n  }\n\n  private _setOrderProvider(form: Form) {\n    if (form.valueProcessingInfo.providerUuid) {\n      this.provider = form.valueProcessingInfo.providerUuid;\n    }\n  }\n\n  private _createOrdersPayload(orderNodes, form: Form) {\n    const payload = [];\n    const selectedOrders = [];\n    let deletedOrders = [];\n    const existingOrders = this._getExistingOrders(form);\n    for (const orderNode of orderNodes) {\n      const orderNodeValues = orderNode.control.value;\n      const orders = [];\n      if (existingOrders) {\n        existingOrders.map(function (obj) {\n          orders[obj.concept] = obj.concept;\n        });\n      }\n\n      for (const order in orderNodeValues) {\n        if (orderNodeValues.hasOwnProperty(order)) {\n          const orderValue = orderNodeValues[order][orderNode.question.key];\n\n          const payloadOrder = this._createPayloadOrder(\n            orderValue,\n            orderNode.question.extras\n          );\n\n          if (\n            orders[orderValue] !== orderValue &&\n            payloadOrder.concept !== ''\n          ) {\n            payload.push(payloadOrder);\n          }\n          selectedOrders[orderValue] = orderValue;\n          if (payloadOrder.orderNumber === '') {\n            delete payloadOrder.orderNumber;\n          }\n          if (payloadOrder.uuid === '') {\n            delete payloadOrder.uuid;\n          }\n        }\n      }\n    }\n\n    deletedOrders = this._getDeletedOrders(selectedOrders, existingOrders);\n    return this._addDeletedOrdersToPayload(deletedOrders, payload);\n  }\n\n  private _getExistingOrders(form: Form) {\n    if (form.existingOrders && form.existingOrders.orders) {\n      let existingOrders = form.existingOrders.orders.map((o) => {\n        return {\n          concept: o.concept.uuid,\n          orderNumber: o.orderNumber,\n          orderUuid: o.uuid,\n          voided: o.voided,\n          dateVoided: o.auditInfo.dateVoided\n        };\n      });\n\n      return (existingOrders = _.filter(existingOrders, (order: any) => {\n        if (order.voided === true || order.dateVoided) {\n          return false;\n        } else {\n          return true;\n        }\n      }));\n    } else {\n      return;\n    }\n  }\n\n  private _setOrderValues(node, existingOrders) {\n    this._findTestOrderQuestionNodes(node);\n\n    const orderNodes = this.formOrderNodes;\n    for (const orderNode of orderNodes) {\n      this._setOrderNodeValues(orderNode, existingOrders);\n    }\n  }\n\n  private _addDeletedOrdersToPayload(deletedOrders, payload): any {\n    for (const order in deletedOrders) {\n      if (deletedOrders.hasOwnProperty(order)) {\n        payload.push({ uuid: deletedOrders[order], voided: true });\n      }\n    }\n    return payload;\n  }\n\n  private _createPayloadOrder(orderConcept, quesitonExtras): any {\n    const order = {\n      concept: '',\n      type: '',\n      orderer: '',\n      careSetting: ''\n    };\n    order.concept = orderConcept;\n    order.type = quesitonExtras.questionOptions.orderType;\n    order.orderer = this.provider;\n    order.careSetting = quesitonExtras.questionOptions.orderSettingUuid;\n\n    // delete orderer if provider not provided\n    if (order.orderer === '') {\n      delete order.orderer;\n    }\n\n    return order;\n  }\n\n  private _getDeletedOrders(selectedOrders, existingOrders): any {\n    const deleteOrders = [];\n    if (selectedOrders) {\n      for (const order in existingOrders) {\n        if (existingOrders.hasOwnProperty(order)) {\n          const existingOrderConcept = existingOrders[order].concept;\n          const selectedOrder = selectedOrders[existingOrderConcept];\n          if (selectedOrder !== existingOrderConcept) {\n            deleteOrders.push(existingOrders[order].orderUuid);\n          }\n        }\n      }\n    }\n    // console.log('Deleted Orders ', deleteOrders);\n    return deleteOrders;\n  }\n\n  private _setOrderNodeValues(node, orders) {\n    let index = 0;\n    node['initialValue'] = orders;\n    for (const order of orders) {\n      node.createChildNode();\n      const value = {};\n      value[node.question.key] = order.concept;\n      const childNode = node.children[index];\n      childNode.control.setValue(value);\n      childNode['initialValue'] = value;\n      childNode['orderNumber'] = order.orderNumber;\n      // console.log('Set Value', node.children[index].control.value, node, childNode);\n      index++;\n    }\n  }\n\n  private _findTestOrderQuestionNodes(formNode) {\n    if (formNode.children) {\n      if (formNode.children instanceof Object) {\n        for (const key in formNode.children) {\n          if (formNode.children.hasOwnProperty(key)) {\n            switch (formNode.children[key].question.renderingType) {\n              case 'page':\n                this._findTestOrderQuestionNodes(formNode.children[key]);\n                break;\n              case 'section':\n                this._findTestOrderQuestionNodes(formNode.children[key]);\n                break;\n              case 'group':\n                this._findTestOrderQuestionNodes(formNode.children[key]);\n\n                break;\n              case 'repeating':\n                if (formNode.children) {\n                  // tslint:disable-next-line:forin\n                  for (const node in formNode.children) {\n                    const question = formNode.children[node].question;\n                    if (\n                      question.extras &&\n                      question.extras.type === 'testOrder'\n                    ) {\n                      this.formOrderNodes.push(formNode.children[node]);\n                    }\n                  }\n                }\n                break;\n              default:\n                break;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { NodeBase, GroupNode, ArrayNode } from '../form-factory/form-node';\nimport { Form } from '../form-factory/form';\n\nimport { ValueAdapter } from './value.adapter';\nimport { ObsValueAdapter } from './obs.adapter';\nimport { OrderValueAdapter } from './order.adapter';\n\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\n\n@Injectable()\nexport class EncounterAdapter implements ValueAdapter {\n  constructor(\n    public ordersAdapter: OrderValueAdapter,\n    public obsAdapter: ObsValueAdapter\n  ) {}\n\n  populateForm(form: Form, payload) {\n    this.populateNode(form.rootNode, payload);\n\n    if (Array.isArray(payload.orders)) {\n      this.ordersAdapter.populateForm(form, payload);\n    }\n    if (Array.isArray(payload.obs)) {\n      this.obsAdapter.populateForm(form, payload.obs);\n    }\n  }\n\n  populateNode(rootNode: NodeBase, payload) {\n    if (payload === undefined || payload === null) {\n      throw new Error('Expected payload');\n    }\n\n    const nodes = this.getEncounterNodes(rootNode);\n\n    nodes.forEach((node) => {\n      switch (node.question.extras.type) {\n        case 'encounterDatetime':\n          if (payload['encounterDatetime']) {\n            // console.log('date', payload['encounterDatetime']);\n            node.control.setValue(\n              moment(payload['encounterDatetime']).toDate()\n            );\n            node.initialValue = moment(payload['encounterDatetime']).toDate();\n          }\n          break;\n        case 'encounterProvider':\n          if (\n            Array.isArray(payload['encounterProviders']) &&\n            payload['encounterProviders'].length > 0\n          ) {\n            const firstProvider: any =\n              payload['encounterProviders'][0].provider;\n            if (firstProvider && firstProvider.uuid) {\n              // Very weird work around for an issue with setting the value\n              node.control.setValue(firstProvider.uuid);\n              setTimeout(() => {\n                node.control.setValue(firstProvider.uuid);\n              });\n              node.initialValue = firstProvider.uuid;\n            }\n          }\n          break;\n        case 'encounterLocation':\n          if (payload['location'] && payload['location'].uuid) {\n            node.control.setValue(payload['location'].uuid);\n            node.initialValue = payload['location'].uuid;\n          }\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  generateFormPayload(form: Form) {\n    const payload = this.generateNodePayload(form.rootNode);\n\n    this.setNonFilledPayloadMembers(form, payload);\n\n    payload['obs'] = this.obsAdapter.generateFormPayload(form) || [];\n\n    payload['orders'] = this.ordersAdapter.generateFormPayload(form) || [];\n\n    return payload;\n  }\n\n  generateNodePayload(rootNode: NodeBase) {\n    const nodes = this.getEncounterNodes(rootNode);\n    const payload = {};\n\n    nodes.forEach((node) => {\n      if (\n        node.control.value !== null &&\n        node.control.value !== undefined &&\n        node.control.value !== ''\n      ) {\n        switch (node.question.extras.type) {\n          case 'encounterDatetime':\n            const dateValue = moment(node.control.value).utcOffset(\n              rootNode.form.valueProcessingInfo.utcOffset || '+0300'\n            );\n            payload['encounterDatetime'] = dateValue.format(\n              'YYYY-MM-DD HH:mm:ss'\n            );\n            break;\n          case 'encounterProvider':\n            if (node.control.value && node.control.value !== '') {\n              const providers = [];\n              providers.push({\n                provider: node.control.value,\n                encounterRole: 'a0b03050-c99b-11e0-9572-0800200c9a66' // unknown provider role in the encounter as default\n              });\n              payload['encounterProviders'] = providers;\n            }\n            break;\n          case 'encounterLocation':\n            payload['location'] = node.control.value;\n            break;\n          default:\n            break;\n        }\n      }\n    });\n\n    return payload;\n  }\n\n  getEncounterNodes(rootNode: NodeBase): Array<NodeBase> {\n    const results: Array<NodeBase> = [];\n    this._getEncounterNodes(rootNode, results);\n    return results;\n  }\n\n  setNonFilledPayloadMembers(form: Form, payload) {\n    if (form.valueProcessingInfo.patientUuid) {\n      this.setPayloadPatientUuid(payload, form.valueProcessingInfo.patientUuid);\n    }\n\n    if (form.valueProcessingInfo.visitUuid) {\n      this.setPayloadVisitUuid(payload, form.valueProcessingInfo.visitUuid);\n    }\n\n    if (form.valueProcessingInfo.encounterTypeUuid) {\n      this.setPayloadEncounterTypeUuid(\n        payload,\n        form.valueProcessingInfo.encounterTypeUuid\n      );\n    }\n\n    if (form.valueProcessingInfo.formUuid) {\n      this.setPayloadFormUuid(payload, form.valueProcessingInfo.formUuid);\n    }\n\n    if (form.valueProcessingInfo.encounterUuid) {\n      this.setPayloadEncounterUuid(\n        payload,\n        form.valueProcessingInfo.encounterUuid\n      );\n    }\n  }\n\n  setPayloadPatientUuid(payload, patientUuid: string) {\n    payload['patient'] = patientUuid;\n  }\n\n  setPayloadVisitUuid(payload, visitUuid: string) {\n    payload['visit'] = visitUuid;\n  }\n\n  setPayloadEncounterTypeUuid(payload, encounterTypeUuid: string) {\n    payload['encounterType'] = encounterTypeUuid;\n  }\n\n  setPayloadFormUuid(payload, formUuid: string) {\n    payload['form'] = formUuid;\n  }\n\n  setPayloadEncounterUuid(payload, encounterUuid: string) {\n    payload['uuid'] = encounterUuid;\n  }\n\n  private _getEncounterNodes(rootNode: NodeBase, array: Array<NodeBase>) {\n    if (this._isEncounterNode(rootNode)) {\n      array.push(rootNode);\n    }\n\n    if (rootNode instanceof GroupNode) {\n      const node = rootNode as GroupNode;\n      // tslint:disable-next-line:forin\n      for (const o in node.children) {\n        if (node.children[o] instanceof NodeBase) {\n          this._getEncounterNodes(node.children[o], array);\n        }\n      }\n    }\n\n    if (rootNode instanceof ArrayNode) {\n      const node = rootNode as ArrayNode;\n      node.children.forEach((child) => {\n        this._getEncounterNodes(child, array);\n      });\n    }\n  }\n\n  private _isEncounterNode(node: NodeBase): boolean {\n    if (\n      node.question.extras &&\n      (node.question.extras.type === 'encounterDatetime' ||\n        node.question.extras.type === 'encounterProvider' ||\n        node.question.extras.type === 'encounterLocation')\n    ) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { NodeBase, GroupNode, ArrayNode } from '../form-factory/form-node';\nimport { Form } from '../form-factory/form';\nimport { ValueAdapter } from './value.adapter';\n\n@Injectable()\nexport class PersonAttribuAdapter implements ValueAdapter {\n  constructor() {}\n\n  generateFormPayload(form: Form) {\n    return this.generateNodePayload(form.rootNode);\n  }\n\n  generateNodePayload(rootNode: NodeBase) {\n    const nodes = this.getPersonAttributeNodes(rootNode);\n    const payload = [];\n    nodes.forEach((node) => {\n      if (\n        node.control.value !== null &&\n        node.control.value !== undefined &&\n        node.control.value !== '' &&\n        node.initialValue !== node.control.value\n      ) {\n        if (node.question.extras.questionOptions.isSimpleValue === true) {\n          payload.push({\n            attributeType: node.question.extras.questionOptions.attributeType,\n            value: node.control.value\n          });\n        } else {\n          payload.push({\n            attributeType: node.question.extras.questionOptions.attributeType,\n            hydratedObject: node.control.value\n          });\n        }\n      }\n    });\n    return payload;\n  }\n\n  populateForm(form: Form, payload) {\n    this.populateNode(form.rootNode, payload);\n  }\n\n  populateNode(rootNode: NodeBase, payload) {\n    if (!Array.isArray(payload)) {\n      throw new Error('Expected an array of attributes');\n    }\n\n    const nodes = this.getPersonAttributeNodes(rootNode);\n\n    nodes.forEach((node) => {\n      payload.forEach((element) => {\n        if (\n          element.attributeType.uuid ===\n          node.question.extras.questionOptions.attributeType\n        ) {\n          if (element.value.uuid) {\n            node.control.setValue(element.value.uuid);\n            node.initialValue = element.value.uuid;\n          } else {\n            node.control.setValue(element.value);\n            node.initialValue = element.value;\n          }\n        }\n      });\n    });\n  }\n\n  getPersonAttributeNodes(rootNode: NodeBase): Array<NodeBase> {\n    const results: Array<NodeBase> = [];\n    this._getPersonAttributesNodes(rootNode, results);\n    return results;\n  }\n\n  private _getPersonAttributesNodes(\n    rootNode: NodeBase,\n    array: Array<NodeBase>\n  ) {\n    if (\n      rootNode.question.extras &&\n      (rootNode.question.extras.type === 'personAttribute' ||\n        rootNode.question.extras.type === 'amrsLocations' ||\n        rootNode.question.extras.type === 'nonAmrsLocations' ||\n        rootNode.question.extras.type === 'siblingLocations')\n    ) {\n      array.push(rootNode);\n    }\n\n    if (rootNode instanceof GroupNode) {\n      const node = rootNode as GroupNode;\n      // tslint:disable-next-line:forin\n      for (const o in node.children) {\n        if (node.children[o] instanceof NodeBase) {\n          this._getPersonAttributesNodes(node.children[o], array);\n        }\n      }\n    }\n\n    if (rootNode instanceof ArrayNode) {\n      const node = rootNode as ArrayNode;\n      node.children.forEach((child) => {\n        this._getPersonAttributesNodes(child, array);\n      });\n    }\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  forwardRef,\n  ViewChild,\n  Output,\n  EventEmitter,\n  Renderer2\n} from '@angular/core';\nimport { SelectComponent } from '../../components/select/select.component';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { DataSource } from '../../form-entry/question-models/interfaces/data-source';\nimport * as _ from 'lodash';\n@Component({\n  selector: 'remote-select',\n  template: `<div>\n  <ng-select\n    [id]=\"componentID\"\n    [noFilter]=\"0\"\n    (selected)=\"selected($event)\"\n    (deselected)=\"removed($event)\"\n    [options]=\"items\"\n    [allowClear]=\"true\"\n    [placeholder]=\"placeholder\"\n    [notFoundMsg]=\"notFoundMsg\"\n    (typed)=\"typed($event)\"\n    tabindex=\"0\"\n  >\n  </ng-select>\n  <div *ngIf=\"loading\">resolving....</div>\n</div>\n`,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => RemoteSelectComponent),\n      multi: true\n    }\n  ]\n})\nexport class RemoteSelectComponent implements OnInit, ControlValueAccessor {\n  // @Input() dataSource: DataSource;\n  @Input() placeholder = 'Search...';\n  @Input() componentID: string;\n  items = [];\n  value = [];\n  loading = false;\n  searchText = '';\n  notFoundMsg = 'match no found';\n  @Output() done: EventEmitter<any> = new EventEmitter<any>();\n\n  characters = [];\n  @ViewChild(SelectComponent) private selectC: SelectComponent;\n\n  private _dataSource: DataSource;\n  @Input()\n  public get dataSource(): DataSource {\n    return this._dataSource;\n  }\n  public set dataSource(v: DataSource) {\n    this._dataSource = v;\n    if (this._dataSource && this._dataSource.dataFromSourceChanged) {\n      this.subscribeToDataSourceDataChanges();\n    }\n  }\n\n  constructor(private renderer: Renderer2) {}\n\n  ngOnInit() {}\n\n  subscribeToDataSourceDataChanges() {\n    this._dataSource.dataFromSourceChanged.subscribe((results) => {\n      if (results.length > 0) {\n        this.items = results;\n        this.notFoundMsg = '';\n        // console.log('updating items', results, this.selectC.value);\n        this.restoreSelectedValue(this.selectC.value, results);\n      } else {\n        this.notFoundMsg = 'Not found';\n        this.items = [];\n      }\n    });\n  }\n\n  public typed(value: any): void {\n    this.search(value);\n  }\n  search(value: string) {\n    if (this.dataSource) {\n      this.searchText = value;\n      this.notFoundMsg = 'Loading.........';\n      this.dataSource.searchOptions(value).subscribe(\n        (result) => {\n          if (result.length > 0) {\n            const existing = _.map(this.value, _.clone);\n            const concat = existing.concat(result);\n            this.items = _.uniqBy(concat, 'value');\n          }\n          this.notFoundMsg = '';\n        },\n        (error) => {\n          this.notFoundMsg = 'Errored';\n        }\n      );\n    }\n  }\n\n  restoreSelectedValue(value, results) {\n    let found = false;\n    _.each(results, (item) => {\n      if (item.value === value) {\n        setTimeout(() => {\n          this.selectC.select(value);\n          this.selectC.value = value;\n        });\n        found = true;\n      }\n    });\n    if (!found) {\n      // console.log('not found after loading items', value, results);\n      setTimeout(() => {\n        this.selectC.select('');\n        this.selectC.value = '';\n      });\n    }\n  }\n\n  canSearch(searchText: string) {\n    return (\n      (searchText.length - this.searchText.length >= 2 ||\n        (searchText.length - this.searchText.length <= 2 &&\n          searchText !== '')) &&\n      this.loading === false\n    );\n  }\n\n  // this is the initial value set to the component\n  public writeValue(value: any) {\n    if (value && value !== '') {\n      if (this.dataSource) {\n        this.loading = true;\n        this.dataSource.resolveSelectedValue(value).subscribe(\n          (result: any) => {\n            this.items = [result];\n            setTimeout(() => {\n              this.selectC.select(result.value);\n              this.selectC.value = result.value;\n            });\n            this.loading = false;\n          },\n          (error) => {\n            this.loading = false;\n          }\n        );\n      }\n    }\n  }\n  // registers 'fn' that will be fired when changes are made\n  // this is how we emit the changes back to the form\n  public registerOnChange(fn: any) {\n    this.propagateChange = fn;\n  }\n\n  // not used, used for touch input\n  public registerOnTouched() {}\n  // change events from the textarea\n  onChange(event) {\n    this.propagateChange(event.id);\n    // .....\n    // update the form\n    // this.propagateChange(this.data);\n  }\n  removed(event) {\n    console.log('Removed');\n    this.propagateChange('');\n  }\n  selected(event) {\n    this.propagateChange(event.value);\n  }\n\n  // the method set in registerOnChange, it is just\n  // a placeholder for a method that takes one parameter,\n  // we use it to emit changes back to the form\n  private propagateChange = (change: any) => {};\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FormsModule } from '@angular/forms';\n// import { SelectModule } from 'ng2-select/ng2-select';\nimport { SelectModule } from '../../components/select/select.module';\nimport { RemoteSelectComponent } from './remote-select.component';\n\n@NgModule({\n  imports: [CommonModule, SelectModule, FormsModule],\n  exports: [RemoteSelectComponent],\n  declarations: [RemoteSelectComponent],\n  providers: []\n})\nexport class RemoteSelectModule {}\n","import { Component, OnInit, OnChanges, Input } from '@angular/core';\n\nimport { LeafNode } from '../../form-entry/form-factory/form-node';\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\n\ninterface DailyScheduled {\n  date: string;\n  count: {\n    scheduled: number;\n  };\n}\ninterface WeeeklyScheduleReport {\n  reports: {\n    attended: any;\n    hasNotReturned: any;\n    scheduled: any;\n  };\n  results: DailyScheduled[];\n  totals: {\n    attended: number;\n    hasNotReturned: number;\n    scheduled: number;\n  };\n}\ninterface DayCount {\n  date: string;\n  count: number;\n}\n\n@Component({\n  selector: 'appointments-overview',\n  template: `<div *ngIf=\"showAppointments\" class=\"appointments\">\n  <p *ngIf=\"loadingAppointments\">\n    <span *ngIf=\"!appointmentsLoaded && errorLoadingAppointments\"\n      >Error checking appointments</span\n    >\n    <span *ngIf=\"loadingAppointments\"\n      ><span class=\"fa fa-spinner fa-spin\"></span>Checking appointments...</span\n    >\n  </p>\n  <div *ngIf=\"appointmentsLoaded && !errorLoadingAppointments\">\n    <table\n      *ngIf=\"appointments.length > 0\"\n      class=\"table table-stripped table-bordered\"\n    >\n      <thead>\n        <tr>\n          <th\n            *ngFor=\"let appointment of appointments\"\n            [ngClass]=\"{ active: appointment.date === today }\"\n          >\n            <span>{{ appointment.date }}</span>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td\n            *ngFor=\"let appointment of appointments\"\n            [ngClass]=\"{ active: appointment.date === today }\"\n          >\n            <span\n              ><strong\n                ><em>{{ appointment.count }}</em></strong\n              ></span\n            >\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n`,\n  styles: [`.appointments{margin-top:12px;font-size:12px;color:#999}.appointments p{padding-top:12px}.appointments th{border-bottom:0!important;color:#333}.appointments td span,.appointments th span{display:block}.appointments td.active,.appointments th.active{background-color:#3c8dbc;color:#fff!important;padding:0}.appointments td.active span,.appointments th.active span{padding:4px}.appointments span.fa{display:inline-block;margin-right:7px}`]\n})\nexport class AppointmentsOverviewComponent implements OnInit, OnChanges {\n  @Input() node: LeafNode;\n  showAppointments = false;\n  loadingAppointments = false;\n  errorLoadingAppointments = false;\n  appointmentsLoaded = false;\n  appointments: Array<any> = [];\n  today = '';\n  constructor() {}\n\n  ngOnInit() {}\n\n  ngOnChanges() {\n    this.node.control.valueChanges.subscribe((v) => {\n      this.resetProperties();\n      const node = this.node;\n      if (\n        node.question.extras.questionOptions.concept &&\n        (node.question.extras.questionOptions.concept ===\n          'a8a666ba-1350-11df-a1f1-0026b9348838' ||\n          node.question.extras.questionOptions.concept ===\n            'a89d2398-1350-11df-a1f1-0026b9348838')\n      ) {\n        // console.log('what change is here', this.showAppointments);\n        if (!this.showAppointments) {\n          this.loadingAppointments = true;\n          this.showAppointments = true;\n          let dataSource;\n          if (node.form && node.form.dataSourcesContainer.dataSources) {\n            dataSource =\n              node.form.dataSourcesContainer.dataSources\n                .monthlyScheduleResourceService;\n          }\n          const locationUuid =\n            node.form.dataSourcesContainer.dataSources.userLocation.uuid;\n          if (dataSource && locationUuid) {\n            const startDate = moment(v)\n              .startOf('week')\n              .add(1, 'day')\n              .format('YYYY-MM-DD');\n            const endDate = moment(v)\n              .endOf('week')\n              .subtract(1, 'day')\n              .format('YYYY-MM-DD');\n            this.today = moment(v).format('DD-MM-YYYY');\n            dataSource\n              .getMonthlySchedule({\n                startDate: startDate,\n                endDate: endDate,\n                limit: 5,\n                locationUuids: locationUuid,\n                department: 'HIV',\n                groupBy: 'groupByPerson,groupByAttendedDate,groupByRtcDate'\n              })\n              .subscribe(\n                (data: WeeeklyScheduleReport) => {\n                  const _data: DayCount[] = [];\n                  const weeklyMap = new Map();\n                  // create the weeks schedule with zero appointments\n                  for (let i = 0; i < 5; i++) {\n                    const scheduleDate = moment(v)\n                      .startOf('week')\n                      .add(i, 'day')\n                      .format('YYYY-MM-DD');\n                    const scheduledObj: DailyScheduled = {\n                      date: scheduleDate,\n                      count: {\n                        scheduled: 0\n                      }\n                    };\n                    weeklyMap.set(scheduleDate, scheduledObj);\n                  }\n\n                  const results: DailyScheduled[] = data.results || [];\n                  // replace placeholder schedules with actual schedules in the map obj\n                  results.forEach((scheduled: DailyScheduled) => {\n                    weeklyMap.set(scheduled.date, scheduled);\n                  });\n                  // retrieve scheduled obj from map to data array\n                  weeklyMap.forEach((value: DailyScheduled, key: string) => {\n                    const dayCount: DayCount = {\n                      date: key,\n                      count: value.count.scheduled || 0\n                    };\n                    _data.push(dayCount);\n                  });\n                  this.appointmentsLoaded = true;\n                  this.loadingAppointments = false;\n\n                  this.appointments = _data;\n                },\n                (error: any) => {\n                  this.loadingAppointments = false;\n                  this.errorLoadingAppointments = true;\n                  this.showAppointments = false;\n                  console.error(error);\n                }\n              );\n          } else {\n            this.showAppointments = false;\n            this.errorLoadingAppointments = true;\n          }\n        }\n      }\n    });\n  }\n\n  resetProperties() {\n    this.loadingAppointments = false;\n    this.appointmentsLoaded = false;\n    this.errorLoadingAppointments = false;\n    this.showAppointments = false;\n    this.appointments = [];\n    this.today = '';\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  GroupNode,\n  LeafNode,\n  ArrayNode,\n  NodeBase\n} from '../form-entry/form-factory/form-node';\nimport * as _ from 'lodash';\nimport { DataSource } from '../form-entry/question-models/interfaces/data-source';\nimport { Observable } from 'rxjs';\nimport { SelectOption } from '../form-entry/question-models/interfaces/select-option';\nconst comma = ', ';\nconst newLine = '\\n';\n\n@Injectable()\nexport class EncounterViewerService implements DataSource {\n  constructor() {}\n  public resolveSelectedValue(value: any): Observable<SelectOption> {\n    return;\n  }\n  public searchOptions(searchText: any): Observable<SelectOption[]> {\n    return;\n  }\n  public fileUpload(data: any): Observable<any> {\n    return;\n  }\n  public fetchFile(url: any): Observable<any> {\n    return;\n  }\n\n  public resolveSelectedValueFromSchema(\n    answerUuid: string,\n    schema: any\n  ): string {\n    let label;\n    if (schema.pages) {\n      _.forEach(schema.pages, (page) => {\n        const l = this.resolveSelectedValueFromSchema(answerUuid, page);\n        if (l) {\n          label = l;\n        }\n      });\n    }\n\n    if (schema.sections) {\n      _.forEach(schema.sections, (section) => {\n        const l = this.resolveSelectedValueFromSchema(answerUuid, section);\n        if (l) {\n          label = l;\n        }\n      });\n    }\n\n    if (schema.questions) {\n      _.forEach(schema.questions, (question) => {\n        if (question.questions) {\n          const l = this.resolveSelectedValueFromSchema(answerUuid, question);\n          if (l) {\n            label = l;\n          }\n        } else {\n          if (question.questionOptions.answers) {\n            _.forEach(question.questionOptions.answers, (answer) => {\n              if (answer.concept === answerUuid) {\n                label = answer.label;\n              }\n            });\n          } else if (question.questionOptions.selectableOrders) {\n            _.forEach(question.questionOptions.selectableOrders, (order) => {\n              if (order.concept === answerUuid) {\n                label = order.label;\n              }\n            });\n          }\n        }\n      });\n    }\n    return label;\n  }\n\n  public hasAnswer(node: NodeBase) {\n    let answered = false;\n    if (node.initialValue) {\n      answered = true;\n    }\n    return answered;\n  }\n\n  public questionsAnswered(node: any, answered?: boolean[]) {\n    const $answered = answered || [];\n    if (node.question.renderingType === 'page') {\n      _.forEach(node.children, (childNode: any) => {\n        this.questionsAnswered(childNode, $answered);\n      });\n    } else if (node.question.renderingType === 'section') {\n      _.forEach(node.children, (childNode) => {\n        if (childNode.question.renderingType === 'group') {\n          _.forEach(childNode.children, (child) => {\n            const ans = this.questionsAnswered(child, $answered);\n            if (ans) {\n              $answered.push(ans);\n            }\n          });\n        } else if (this.hasAnswer(childNode)) {\n          $answered.push(true);\n        }\n      });\n    } else {\n      return this.hasAnswer(node);\n    }\n\n    if ($answered.length > 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  public isDate(val: any) {\n    if (Date.parse(val)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  public convertTime(unixTimestamp: number) {\n    const a = new Date(unixTimestamp);\n    const months = [\n      'Jan',\n      'Feb',\n      'Mar',\n      'Apr',\n      'May',\n      'Jun',\n      'Jul',\n      'Aug',\n      'Sep',\n      'Oct',\n      'Nov',\n      'Dec'\n    ];\n    const year = a.getFullYear();\n    const month = months[a.getMonth()];\n    const date = a.getDate();\n    const hour = a.getHours();\n    const min = a.getMinutes();\n    const sec = a.getSeconds();\n    const suffix = hour < 12 ? 'AM' : 'PM';\n    let time;\n    if (hour === 0 && min === 0) {\n      time = date + ' ' + month + ' ' + year;\n    } else {\n      time =\n        date +\n        ' ' +\n        month +\n        ' ' +\n        year +\n        ' ' +\n        hour +\n        ':' +\n        min +\n        suffix +\n        ' (EAT)';\n    }\n    return time;\n  }\n}\n","import { Component, OnInit, Input, Inject } from '@angular/core';\nimport {\n  NodeBase,\n  GroupNode,\n  LeafNode\n} from '../../form-entry/form-factory/form-node';\nimport { QuestionBase } from '../../form-entry/question-models/question-base';\nimport * as _ from 'lodash';\n\nimport { AfeFormGroup } from '../../abstract-controls-extension/afe-form-group';\nimport { DataSources } from '../../form-entry/data-sources/data-sources';\nimport { DataSource } from '../../form-entry/question-models/interfaces/data-source';\n\nimport { EncounterViewerService } from '../encounter-viewer.service';\n\n@Component({\n  selector: 'encounter-viewer',\n  template: `<div class=\"viewer\">\n  <div *ngIf=\"rootNode.question.renderingType === 'form'\" class=\"form\">\n    <div *ngFor=\"let question of rootNode.question.questions; let i = index\">\n      <div *ngIf=\"questionsAnswered(rootNode.children[question.key])\">\n        <div [attr.id]=\"'page' + i\" class=\"panel panel-default\">\n          <p class=\"page-label panel-heading text-primary\">\n            {{ question.label }}\n          </p>\n          <div class=\"panel-body\">\n            <encounter-viewer\n              [node]=\"rootNode.children[question.key]\"\n              [schema]=\"_schema\"\n              [parentComponent]=\"this\"\n              [parentGroup]=\"rootNode.control\"\n            ></encounter-viewer>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"rootNode.question.renderingType === 'page'\" class=\"page\">\n    <encounter-viewer\n      *ngFor=\"let question of rootNode.question.questions\"\n      [parentComponent]=\"this\"\n      [node]=\"rootNode.children[question.key]\"\n      [schema]=\"_schema\"\n      [parentGroup]=\"parentGroup\"\n    ></encounter-viewer>\n  </div>\n\n  <div\n    *ngIf=\"\n      rootNode.question.renderingType === 'section' &&\n      questionsAnswered(rootNode)\n    \"\n    class=\"section\"\n  >\n    <div class=\"panel panel-primary\">\n      <p class=\"panel-heading section-label\">{{ rootNode.question.label }}</p>\n    </div>\n    <div *ngFor=\"let question of rootNode.question.questions\">\n      <encounter-viewer\n        [node]=\"rootNode.children[question.key]\"\n        [parentComponent]=\"this\"\n        [schema]=\"_schema\"\n        [parentGroup]=\"parentGroup\"\n      ></encounter-viewer>\n    </div>\n  </div>\n\n  <!--Leaf Controls-->\n  <div style=\"margin-left: 10px\">\n    <form *ngIf=\"rootNode.question.controlType === 0\" [formGroup]=\"parentGroup\">\n      <div *ngIf=\"rootNode.control.value\">\n        <div class=\"question-answer\">\n          <label\n            *ngIf=\"rootNode.question.label\"\n            [attr.for]=\"rootNode.question.key\"\n            style=\"font-weight: 400\"\n          >\n            {{ rootNode.question.label }}\n          </label>\n          <span *ngIf=\"checkForColon(rootNode.question.label)\">:</span>\n          <div\n            [ngSwitch]=\"rootNode.question.renderingType\"\n            style=\"display: inline-block; font-weight: bold\"\n          >\n            <div *ngSwitchCase=\"'file'\">\n              <file-preview\n                [formControlName]=\"rootNode.question.key\"\n                [id]=\"rootNode.question.key + 'id'\"\n                [dataSource]=\"fileDataSource\"\n              ></file-preview>\n            </div>\n            <div *ngSwitchCase=\"'remote-select'\">\n              <remote-answer\n                [formControlName]=\"rootNode.question.key\"\n                [id]=\"rootNode.question.key + 'id'\"\n                [dataSource]=\"remoteDataSource\"\n              ></remote-answer>\n            </div>\n            <div *ngSwitchDefault style=\"display: inline-block\">\n              <question-control\n                [schema]=\"_schema\"\n                [value]=\"rootNode.control.value\"\n                [dataSource]=\"customDataSource\"\n              ></question-control>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <!--Array Controls-->\n  <div\n    *ngIf=\"rootNode.question.controlType === 1 && questionsAnswered(rootNode)\"\n  >\n    <div [ngSwitch]=\"rootNode.question.renderingType\">\n      <div *ngSwitchCase=\"'repeating'\">\n        <div [ngSwitch]=\"rootNode.question.extras.type\">\n          <div *ngSwitchCase=\"'testOrder'\">\n            <label>{{ rootNode.question.label }}:</label>\n            <div *ngFor=\"let child of rootNode.children; let i = index\">\n              <encounter-viewer\n                *ngFor=\"let question of child.question.questions\"\n                [parentComponent]=\"this\"\n                [node]=\"child.children[question.key]\"\n                [parentGroup]=\"child.control\"\n                [schema]=\"_schema\"\n              ></encounter-viewer>\n            </div>\n          </div>\n\n          <div *ngSwitchCase=\"'obsGroup'\">\n            <div *ngFor=\"let child of rootNode.children; let i = index\">\n              <encounter-viewer\n                *ngFor=\"let question of child.question.questions\"\n                [parentComponent]=\"this\"\n                [node]=\"child.children[question.key]\"\n                [parentGroup]=\"child.control\"\n                [schema]=\"_schema\"\n              ></encounter-viewer>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"rootNode.question.controlType === 2\">\n    <!--GROUP-->\n    <div [ngSwitch]=\"rootNode.question.renderingType\">\n      <div *ngSwitchCase=\"'group'\">\n        <encounter-viewer\n          *ngFor=\"let question of rootNode.question.questions\"\n          [parentComponent]=\"this\"\n          [node]=\"rootNode.children[question.key]\"\n          [parentGroup]=\"rootNode.control\"\n          [schema]=\"_schema\"\n        ></encounter-viewer>\n      </div>\n      <div *ngSwitchCase=\"'field-set'\">\n        <encounter-viewer\n          *ngFor=\"let question of rootNode.question.questions\"\n          [parentComponent]=\"this\"\n          [node]=\"rootNode.children[question.key]\"\n          [parentGroup]=\"rootNode.control\"\n          [schema]=\"_schema\"\n        ></encounter-viewer>\n      </div>\n    </div>\n  </div>\n</div>\n`,\n  styles: [`.page-label{font-size:20px;font-weight:700}.section-label{font-size:18px;font-weight:500}.panel-primary{border:none!important}.question-answer{font-size:16px}.panel{margin-bottom:5px}div.section{margin-bottom:15px!important}.line-breaker{white-space:pre-line}hr{margin:10px}`]\n})\nexport class EncounterViewerComponent implements OnInit {\n  public rootNode: NodeBase;\n  public enc: any;\n  public fileDataSource: DataSource;\n  public remoteDataSource: DataSource;\n  public customDataSource: DataSource;\n  public _schema;\n  @Input() public parentGroup: AfeFormGroup;\n  @Input() public parentComponent: EncounterViewerComponent;\n  @Input() set node(rootNode: NodeBase) {\n    this.rootNode = rootNode;\n  }\n\n  @Input() public set schema(schema: any) {\n    this._schema = schema;\n  }\n\n  @Input() public set encounter(enc: any) {\n    this.enc = enc;\n  }\n  @Input() set form(form: any) {\n    this.rootNode = form.rootNode;\n    this._schema = form.schema;\n    console.log(this.getQuestionNodes(this.traverse(this.rootNode)));\n  }\n\n  constructor(\n    private encounterViewerService: EncounterViewerService,\n    private dataSources: DataSources\n  ) {}\n\n  getQuestionNodes(pages) {\n    const merged = [];\n    const arrays = [];\n    for (const page of pages) {\n      arrays.push(page.page);\n    }\n    return merged.concat.apply([], arrays);\n  }\n  public ngOnInit() {\n    if (this.rootNode) {\n    }\n    if (\n      this.rootNode &&\n      this.rootNode.question.extras &&\n      this.rootNode.question.renderingType === 'file'\n    ) {\n      this.fileDataSource = this.dataSources.dataSources[\n        this.rootNode.question.dataSource\n      ];\n    } else if (\n      this.rootNode &&\n      this.rootNode.question.extras &&\n      this.rootNode.question.renderingType === 'remote-select'\n    ) {\n      this.remoteDataSource = this.dataSources.dataSources[\n        this.rootNode.question.dataSource\n      ];\n    } else {\n      this.customDataSource = this.encounterViewerService;\n    }\n  }\n\n  public questionsAnswered(node: any) {\n    const $answered = this.encounterViewerService.questionsAnswered(node);\n    return $answered;\n  }\n\n  public questionAnswered(node: NodeBase) {\n    const answered = this.encounterViewerService.hasAnswer(node);\n    return answered;\n  }\n\n  public checkForColon(questionLabel: string) {\n    if (questionLabel.indexOf(':') === -1) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  traverse(o, type?) {\n    const questions = [];\n    if (o.children) {\n      if (o.children instanceof Array) {\n        const returned = this.repeatingGroup(o.children);\n        return returned;\n      }\n      if (o.children instanceof Object) {\n        for (const key in o.children) {\n          if (o.children.hasOwnProperty(key)) {\n            switch (o.children[key].question.renderingType) {\n              case 'page':\n                const page = this.traverse(o.children[key]);\n                questions.push({ page: page });\n                break;\n              case 'section':\n                const section = this.traverse(o.children[key]);\n                questions.push({ section: section });\n                break;\n              case 'group':\n                const qs = this.traverse(o.children[key]);\n                questions.push({\n                  node: o.children[key],\n                  question: o.children[key].question,\n                  groupMembers: qs\n                });\n                break;\n              case 'repeating':\n                const rep = this.repeatingGroup(o.children[key].children);\n                questions.push({\n                  node: o.children[key],\n                  question: o.children[key].question,\n                  groupMembers: rep\n                });\n                break;\n              default:\n                questions.push(o.children[key]);\n                break;\n            }\n          }\n        }\n      } else {\n        console.log('Console.log', o);\n      }\n    }\n    return questions;\n  }\n\n  repeatingGroup(nodes) {\n    const toReturn = [];\n    for (const node of nodes) {\n      toReturn.push({\n        question: node.question,\n        groupMembers: this.traverse(node)\n      });\n    }\n    return toReturn;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Form } from '../form-entry/form-factory/form';\nimport { ObsValueAdapter } from '../form-entry/value-adapters/obs.adapter';\nimport { EncounterViewerService } from './encounter-viewer.service';\nimport { DataSources } from '../form-entry/data-sources/data-sources';\nimport { DataSource } from '../form-entry/question-models/interfaces/data-source';\n\nimport { combineLatest, BehaviorSubject } from 'rxjs';\nimport { Observable } from 'rxjs/Observable';\n\nimport * as moment_ from 'moment';\nimport * as _ from 'lodash';\nimport * as pdfMake from 'pdfmake/build/pdfmake.js';\nimport 'pdfmake/build/vfs_fonts.js';\nimport * as pdfFonts from 'pdfmake/build/vfs_fonts';\n\nconst moment = moment_;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EncounterPdfViewerService {\n  private remoteDataSource: DataSource;\n  public error: boolean;\n  public errorMessage: string;\n  public showLoader: boolean;\n  public subscribedAnswers: any = {\n    questions: {\n      stack: []\n    },\n    answers: []\n  };\n\n  constructor(\n    private encounterViewerService: EncounterViewerService,\n    private obsValueAdapter: ObsValueAdapter,\n    private dataSources: DataSources\n  ) {}\n\n  getPages(\n    pages: any,\n    form: Form,\n    remoteSelectsOnly?: boolean,\n    remoteAns?: any\n  ): any[] {\n    const content = [];\n    let remoteQuestions = [];\n\n    for (const page of pages) {\n      if (remoteSelectsOnly) {\n        remoteQuestions = remoteQuestions.concat(\n          this.getSections(page.page, form, false, remoteAns)\n        );\n      } else {\n        for (const question of form.rootNode.question.questions) {\n          if (\n            page.label ===\n              form.rootNode.children[question.key].question.label &&\n            this.encounterViewerService.questionsAnswered(\n              form.rootNode.children[question.key]\n            )\n          ) {\n            content.push({\n              style: 'tableExample',\n              table: {\n                widths: ['*'],\n                headerRows: 1,\n                keepWithHeaderRows: 1,\n                body: [\n                  [{ text: page.label, style: 'tableHeader' }],\n                  [\n                    {\n                      style: 'tableExample',\n                      table: {\n                        widths: ['*'],\n                        body: this.getSections(page.page, form, true, remoteAns)\n                      },\n                      layout: 'noBorders',\n                      margin: [5, 0, 0, 0]\n                    }\n                  ]\n                ]\n              },\n              layout: {\n                hLineWidth: function (i, node) {\n                  return i === 0 || i === node.table.body.length ? 0.5 : 0.5;\n                },\n                vLineWidth: function (i, node) {\n                  return i === 0 || i === node.table.widths.length ? 0.5 : 0.5;\n                },\n                hLineColor: function (i, node) {\n                  return i === 0 || i === node.table.body.length\n                    ? '#ddd'\n                    : '#ddd';\n                },\n                vLineColor: function (i, node) {\n                  return i === 0 || i === node.table.body.length\n                    ? '#ddd'\n                    : '#ddd';\n                }\n              }\n            });\n          }\n        }\n      }\n    }\n    return remoteSelectsOnly ? remoteQuestions : content;\n  }\n\n  getSections(sections: any, form: Form, resolve: any, remoteAns: any): any[] {\n    const content = [];\n    const answeredSections = [];\n    let questions: Array<Observable<any>> = [];\n\n    sections.map((s) => {\n      if (this.encounterViewerService.questionsAnswered(s.node)) {\n        answeredSections.push(s);\n      }\n    });\n\n    for (const section of answeredSections) {\n      questions = questions.concat(this.getRemoteSectionData(section.section));\n    }\n\n    if (resolve && remoteAns) {\n      for (const section of answeredSections) {\n        content.push([\n          {\n            table: {\n              widths: ['*'],\n              body: [\n                [{ text: section.label, style: 'tableSubheader' }],\n                [this.getSectionData(section.section, remoteAns, form)]\n              ]\n            },\n            layout: 'noBorders'\n          }\n        ]);\n      }\n      return content;\n    } else {\n      return questions;\n    }\n  }\n\n  private appendResolvedAnswer(\n    resolvedAnswer: any,\n    questions: any,\n    node?: any\n  ) {\n    if (resolvedAnswer) {\n      questions.stack.push({\n        text: [\n          `${node ? node.question.label : 'Question label'}${\n            node ? (node.question.label.indexOf(':') > 1 ? '' : ':') : ''\n          } `,\n          { text: `${resolvedAnswer}`, bold: true }\n        ],\n        style: 'answers'\n      });\n    }\n  }\n\n  // get remote selects only\n  getRemoteSectionData(section: any): any {\n    const questions: Array<Observable<any>> = [];\n    this.subscribedAnswers.questions.stack = [];\n\n    for (const node of section) {\n      if (node.question.renderingType === 'remote-select') {\n        this.remoteDataSource = this.dataSources.dataSources[\n          node.question.dataSource\n        ];\n        if (node.control.value !== '') {\n          if (this.remoteDataSource) {\n            questions.push(\n              this.remoteDataSource.resolveSelectedValue(node.control.value)\n            );\n          }\n        }\n      }\n    }\n    return questions;\n  }\n\n  // merge remote selects\n  getSectionData(section: any, remoteAns: any[], form: Form): any {\n    const questions = {\n      stack: []\n    };\n\n    let resolvedAnswer = '';\n\n    for (const node of section) {\n      switch (node.question.renderingType) {\n        case 'group':\n          if (node.groupMembers) {\n            questions.stack.push(\n              this.getSectionData(node.groupMembers, remoteAns, form)\n            );\n          }\n          break;\n\n        case 'field-set':\n          if (node.children) {\n            const groupMembers = [];\n            const result = Object.keys(node.children).map(\n              (key) => node.children[key]\n            );\n\n            if (result) {\n              groupMembers.push(result);\n              questions.stack.push(\n                this.getSectionData(groupMembers[0], remoteAns, form)\n              );\n            }\n          }\n          break;\n\n        case 'repeating':\n          if (node.groupMembers) {\n            questions.stack.push(\n              this.getSectionData(node.groupMembers, remoteAns, form)\n            );\n          }\n          break;\n\n        case 'remote-select':\n          this.remoteDataSource = this.dataSources.dataSources[\n            node.question.dataSource\n          ];\n          for (const ans of remoteAns) {\n            if (ans.value === node.control.value) {\n              this.appendResolvedAnswer(ans.label, questions, node);\n            }\n          }\n          break;\n\n        default:\n          const answer = node.control.value;\n          if (answer) {\n            resolvedAnswer = this.resolveValue(answer, form);\n            this.appendResolvedAnswer(resolvedAnswer, questions, node);\n          }\n      }\n    }\n\n    return questions;\n  }\n\n  resolveValue(answer: any, form: Form, arrayElement?: boolean): any {\n    if (answer !== '') {\n      if (this.isUuid(answer)) {\n        const val = this.encounterViewerService.resolveSelectedValueFromSchema(\n          answer,\n          form.schema\n        );\n        if (!arrayElement) {\n          if (val) {\n            return val.toUpperCase();\n          } else {\n            return answer;\n          }\n        } else {\n          return val;\n        }\n      } else if (_.isArray(answer)) {\n        const arr = [];\n        _.forEach(answer, (elem) => {\n          arr.push(this.resolveValue(elem, form, true));\n        });\n        return arr.toString();\n      } else if (this.isDate(answer)) {\n        if (!arrayElement) {\n          return this.encounterViewerService.convertTime(answer);\n        } else {\n          return this.encounterViewerService.convertTime(answer);\n        }\n      } else if (typeof answer === 'object') {\n        const values = [];\n        const result = Object.keys(answer).map((key) => [key, answer[key]]);\n\n        values.push(result);\n        return values;\n      } else {\n        return answer;\n      }\n    }\n  }\n\n  generatePdfDefinition(form: Form): any {\n    const docDefinition$ = new BehaviorSubject<any>({});\n    const remoteSelects = this.getPages(\n      this.obsValueAdapter.traverse(form.rootNode),\n      form,\n      true\n    );\n\n    combineLatest(remoteSelects).subscribe((remoteAns) => {\n      if (remoteAns) {\n        const docDefinition = {\n          pageSize: 'A4',\n          content: this.getPages(\n            this.obsValueAdapter.traverse(form.rootNode),\n            form,\n            false,\n            remoteAns\n          ),\n          styles: {\n            answers: {\n              fontSize: 8\n            },\n            banner: {\n              fontSize: 9,\n              bold: true,\n              margin: [50, 15, 30, 0]\n            },\n            bannerItem: {\n              margin: [2, 2, 2, 2]\n            },\n            bannerLabel: {\n              color: '#2f4f4f'\n            },\n            confidential: {\n              color: 'red',\n              fontSize: 8,\n              bold: true,\n              margin: [60, 0, 0, 0]\n            },\n            footer: {\n              alignment: 'center',\n              fontSize: 8,\n              bold: true\n            },\n            header: {\n              fontSize: 9,\n              bold: true,\n              margin: [5, 5, 5, 5]\n            },\n            pageNumber: {\n              color: '#2f4f4f',\n              fontSize: 6\n            },\n            tableExample: {\n              fontSize: 10,\n              margin: [5, 0, 0, 5]\n            },\n            tableHeader: {\n              fillColor: '#f5f5f5',\n              width: ['100%'],\n              borderColor: '#333',\n              fontSize: 9,\n              bold: true,\n              margin: [5, 0, 5, 0]\n            },\n            tableSubheader: {\n              fillColor: '#337ab7',\n              width: ['100%'],\n              fontSize: 9,\n              color: 'white',\n              margin: [5, 0, 5, 0]\n            },\n            timestamp: {\n              bold: true,\n              color: '#2f4f4f'\n            }\n          },\n          defaultStyle: {\n            fontSize: 7\n          }\n        };\n        docDefinition$.next(docDefinition);\n      }\n    });\n\n    return docDefinition$;\n  }\n\n  displayPdf(form) {\n    const pdf = pdfMake;\n    let patient;\n    pdf.vfs = pdfMake.vfs;\n\n    if (form.dataSourcesContainer.dataSources._dataSources) {\n      patient =\n        form.dataSourcesContainer.dataSources._dataSources['patientInfo'];\n    }\n\n    this.generatePdfDefinition(form).subscribe(\n      (docDefinition) => {\n        if (!_.isEmpty(docDefinition)) {\n          if (typeof patient !== 'undefined') {\n            const banner = [];\n\n            if (patient.name) {\n              banner.push({\n                text: [\n                  { text: 'Name: ', style: 'bannerLabel' },\n                  { text: `${this.titleize(patient.name)}` }\n                ],\n                style: 'bannerItem'\n              });\n            }\n\n            if (patient.nid) {\n              banner.push({\n                text: [\n                  { text: 'ID: ', style: 'bannerLabel' },\n                  { text: `${patient.nid}` }\n                ],\n                style: 'bannerItem'\n              });\n            }\n\n            if (patient.birthdate) {\n              banner.push({\n                text: [\n                  { text: 'DOB: ', style: 'bannerLabel' },\n                  {\n                    text: `${moment(patient.birthdate).format('l')} (${\n                      patient.age\n                    } yo)`\n                  }\n                ],\n                style: 'bannerItem'\n              });\n            }\n\n            if (patient.mui) {\n              banner.push({\n                text: [\n                  { text: 'MUI: ', style: 'bannerLabel' },\n                  { text: `${patient.mui}` }\n                ],\n                style: 'bannerItem'\n              });\n            }\n\n            if (patient.mhn) {\n              banner.push({\n                text: [\n                  { text: 'MTRH No: ', style: 'bannerLabel' },\n                  { text: `${patient.mhn}` }\n                ],\n                style: 'bannerItem'\n              });\n            }\n\n            docDefinition.header = {\n              style: 'banner',\n              table: {\n                body: [banner]\n              },\n              layout: 'noBorders'\n            };\n          }\n\n          docDefinition.footer = (currentPage, pageCount) => {\n            return {\n              style: 'footer',\n              widths: ['*', 'auto'],\n              table: {\n                body: [\n                  [\n                    {\n                      text:\n                        'Note: Confidentiality is one of the core duties of all medical practitioners. ' +\n                        \"Patients' personal health information should be kept private.\",\n                      style: 'confidential'\n                    },\n                    ''\n                  ],\n                  [\n                    {\n                      text: `Generated on ${new Date().toUTCString()}`,\n                      style: 'timestamp'\n                    },\n                    {\n                      text: `${currentPage.toString()} of ${pageCount}`,\n                      style: 'pageNumber'\n                    }\n                  ]\n                ]\n              },\n              layout: 'noBorders'\n            };\n          };\n\n          const win = window.open('', '_blank');\n          pdf.createPdf(docDefinition).open({}, win);\n        }\n      },\n      (error) => {\n        console.log('Error: ', error);\n      }\n    );\n  }\n\n  isDate(val: any) {\n    return moment(val, moment.ISO_8601, true).isValid();\n  }\n\n  isUuid(value: string) {\n    return (\n      value.length === 36 &&\n      value.indexOf(' ') === -1 &&\n      value.indexOf('.') === -1\n    );\n  }\n\n  titleize(str) {\n    return str.replace(\n      /\\w\\S*/g,\n      (s) => s.charAt(0).toUpperCase() + s.substr(1).toLowerCase()\n    );\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Form } from '../../form-entry/form-factory/form';\nimport { NodeBase } from '../../form-entry/form-factory/form-node';\nimport { EncounterAdapter } from '../../form-entry/value-adapters/encounter.adapter';\n\nimport { EncounterPdfViewerService } from '../encounter-pdf-viewer.service';\n\n@Component({\n  selector: 'encounter-renderer',\n  template: `<a\n  type=\"button\"\n  style=\"display: block; font-size: 28px; cursor: pointer\"\n  class=\"text-right\"\n  (click)=\"displayPdf()\"\n>\n  <span class=\"glyphicon text-primary glyphicon-print\"></span>\n</a>\n<encounter-viewer\n  class=\"card\"\n  [form]=\"$form\"\n  [encounter]=\"$enc\"\n></encounter-viewer>\n`,\n  styles: [`.card{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12)}`]\n})\nexport class EncounterContainerComponent implements OnInit {\n  public $form: Form;\n  public $enc: any;\n\n  @Input() public set form(form) {\n    this.$form = form;\n  }\n  @Input() public set encounter(enc) {\n    this.$enc = enc;\n  }\n\n  constructor(\n    private encAdapter: EncounterAdapter,\n    private encounterPdfViewerService: EncounterPdfViewerService\n  ) {}\n\n  ngOnInit() {}\n\n  displayPdf() {\n    this.encounterPdfViewerService.displayPdf(this.$form);\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { EncounterViewerService } from '../encounter-viewer.service';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'question-control',\n  styles: [`input{border:none;box-shadow:none;color:#000;background:#fff!important;padding-top:23px;display:block;position:relative}`],\n  template: `<div>\n  {{ innerValue }}\n</div>\n`\n})\nexport class QuestionControlComponent implements OnInit {\n  @Input() public set schema(schema: any) {\n    this._schema = schema;\n  }\n  @Input() public set value(value) {\n    this._value = value;\n  }\n  @Input() public set dataSource(dataSource: any) {\n    this._dataSource = dataSource;\n  }\n  // The internal data model\n  public innerValue: any = '';\n  private _value: any;\n  private _schema: any;\n  private _dataSource: EncounterViewerService;\n  constructor() {}\n\n  ngOnInit() {\n    this.writeValue(this._value);\n  }\n  public isUuid(value: string) {\n    if (\n      value.length === 36 &&\n      value.indexOf(' ') === -1 &&\n      value.indexOf('.') === -1\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  // Current time string.\n\n  public writeValue(v: any, arrayElement?: boolean) {\n    if (v !== this.innerValue) {\n      if (this.isUuid(v)) {\n        if (!arrayElement) {\n          const val = this._dataSource.resolveSelectedValueFromSchema(\n            v,\n            this._schema\n          );\n          if (val) {\n            this.innerValue = val.toUpperCase();\n          } else {\n            this.innerValue = v;\n          }\n        } else {\n          return this._dataSource.resolveSelectedValueFromSchema(\n            v,\n            this._schema\n          );\n        }\n      } else if (_.isArray(v)) {\n        const arr = [];\n        _.forEach(v, (el) => {\n          arr.push(this.writeValue(el, true));\n        });\n        this.innerValue = arr;\n      } else if (this.isDate(v)) {\n        if (!arrayElement) {\n          this.innerValue = this._dataSource.convertTime(v);\n        } else {\n          return this._dataSource.convertTime(v);\n        }\n      } else {\n        if (!arrayElement) {\n          this.innerValue = v;\n        } else {\n          return v;\n        }\n      }\n    }\n  }\n\n  public isDate(str: string) {\n    return this._dataSource.isDate(str) && !_.isNumber(str);\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  forwardRef,\n  OnChanges,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { EncounterViewerService } from '../encounter-viewer.service';\nimport { DataSource } from '../../form-entry/question-models/interfaces/data-source';\nconst noop = () => {};\n\n@Component({\n  selector: 'file-preview',\n  styles: [``],\n  template: `<div *ngIf=\"fileUuid\">\n      <img\n        *ngIf=\"!resultsIsPdf\"\n        class=\"img-responsive\"\n        [src]=\"fileUuid | secure: this._dataSource.fetchFile\"\n        alt=\"image\"\n      />\n    </div>\n    <a *ngIf=\"resultsIsPdf\" (click)=\"getUrl()\" style=\"cursor: pointer\"\n      ><u>Open PDF</u></a\n    > `,\n\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FilePreviewComponent),\n      multi: true\n    }\n  ]\n})\nexport class FilePreviewComponent implements ControlValueAccessor, OnInit {\n  @Input() public source: any;\n  public fileUuid = null;\n  public pdfUrl: any;\n  public resultsIsPdf = false;\n  public _dataSource: DataSource;\n  @Input()\n  public get dataSource(): DataSource {\n    return this._dataSource;\n  }\n  public set dataSource(v: DataSource) {\n    this._dataSource = v;\n  }\n  // Placeholders for the callbacks which are later providesd\n  // by the Control Value Accessor\n  private onTouchedCallback: () => void = noop;\n  private onChangeCallback: (_: any) => void = noop;\n  constructor(private encounterService: EncounterViewerService) {}\n  ngOnInit() {}\n  // get accessor\n  get value(): any {\n    return this.fileUuid;\n  }\n\n  // set accessor including call the onchange callback\n  set value(v: any) {\n    if (v !== this.fileUuid) {\n      this.fileUuid = v;\n    }\n  }\n  // Current time string.\n\n  public writeValue(v: any) {\n    if (v !== this.fileUuid) {\n      this.fileUuid = v;\n      this.checkFileType();\n    }\n  }\n  public checkFileType() {\n    const re = /pdf/gi;\n    if (this.fileUuid.search(re) !== -1) {\n      this.resultsIsPdf = true;\n    }\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnChange(fn: any) {\n    this.onChangeCallback = fn;\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnTouched(fn: any) {\n    this.onTouchedCallback = fn;\n  }\n\n  public onBlur() {\n    this.onTouchedCallback();\n  }\n\n  public onChange(event: any) {\n    // const files = event.srcElement.files;\n    // const fileToLoad = files[0];\n    // const fileReader = new FileReader();\n    // fileReader.onload = (fileLoadedEvent) => {\n    //   const data = fileReader.result;\n    //   const fileType = data.substring('data:image/'.length, data.indexOf(';base64'));\n    //   const payload = {\n    //     data,\n    //     extension: fileType\n    //   };\n    // };\n    // fileReader.readAsDataURL(fileToLoad);\n  }\n  public getUrl() {\n    this.dataSource.fetchFile(this.fileUuid, 'pdf').subscribe((file) => {\n      window.open(file.changingThisBreaksApplicationSecurity, '_blank');\n    });\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  forwardRef,\n  OnChanges,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { DataSource } from '../../form-entry/question-models/interfaces/data-source';\nconst noop = () => {};\n\n@Component({\n  selector: 'remote-answer',\n  styles: [],\n  template: `\n    <div *ngIf=\"innerValue\">\n      {{ innerValue }}\n    </div>\n  `,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => RemoteAnswerComponent),\n      multi: true\n    }\n  ]\n})\nexport class RemoteAnswerComponent implements ControlValueAccessor {\n  @Input() public source: any;\n  public innerValue = null;\n  private _dataSource: DataSource;\n  @Input()\n  public get dataSource(): DataSource {\n    return this._dataSource;\n  }\n  public set dataSource(v: DataSource) {\n    this._dataSource = v;\n  }\n  // Placeholders for the callbacks which are later providesd\n  // by the Control Value Accessor\n  private onTouchedCallback: () => void = noop;\n  private onChangeCallback: (_: any) => void = noop;\n  constructor() {}\n  // get accessor\n  get value(): any {\n    return this.innerValue;\n  }\n\n  // set accessor including call the onchange callback\n  set value(v: any) {\n    if (v !== this.innerValue) {\n      this.innerValue = v;\n    }\n  }\n  // Current time string.\n\n  public writeValue(v: any) {\n    if (v !== this.innerValue) {\n      if (this._dataSource) {\n        this._dataSource.resolveSelectedValue(v).subscribe((ans) => {\n          this.innerValue = ans.label;\n        });\n      } else {\n        this.innerValue = v;\n      }\n    }\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnChange(fn: any) {\n    this.onChangeCallback = fn;\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnTouched(fn: any) {\n    this.onTouchedCallback = fn;\n  }\n\n  public onBlur() {\n    this.onTouchedCallback();\n  }\n\n  public onChange(event: any) {}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { EncounterViewerComponent } from './encounter-view/encounter-viewer.component';\nimport { EncounterContainerComponent } from './encounter-container/encounter-container.component';\nimport { EncounterViewerService } from './encounter-viewer.service';\nimport { EncounterPdfViewerService } from './encounter-pdf-viewer.service';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { QuestionControlComponent } from './display-controls/question-control.component';\nimport { FilePreviewComponent } from './display-controls/file-preview.component';\nimport { RemoteAnswerComponent } from './display-controls/remote-answer.component';\nimport { HttpClientModule } from '@angular/common/http';\nimport { SharedModule } from '../shared.module';\n@NgModule({\n  declarations: [\n    EncounterViewerComponent,\n    EncounterContainerComponent,\n    QuestionControlComponent,\n    FilePreviewComponent,\n    RemoteAnswerComponent\n  ],\n  imports: [\n    FormsModule,\n    ReactiveFormsModule,\n    CommonModule,\n    HttpClientModule,\n    SharedModule\n  ],\n  providers: [EncounterViewerService, EncounterPdfViewerService],\n  exports: [EncounterContainerComponent, HttpClientModule]\n})\nexport class EncounterViewerModule {}\n","import {\n  Component,\n  Input,\n  forwardRef,\n  OnInit,\n  AfterViewInit\n} from '@angular/core';\n\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { DataSource } from '../../form-entry/question-models/interfaces/data-source';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'checkbox',\n  template: `<div *ngFor=\"let option of options; let i = index\">\n  <label class=\"form-control no-border\">\n    <input\n      type=\"checkbox\"\n      id=\"i + 'id'\"\n      (change)=\"selectOpt(option, $event)\"\n      value=\"option.value\"\n      [checked]=\"option.checked\"\n    />\n    {{ option.label }}\n  </label>\n</div>\n`,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => CheckboxControlComponent),\n      multi: true\n    }\n  ],\n  styles: [\n    `\n      .no-border {\n        border: 0;\n        box-shadow: none;\n      }\n    `\n  ]\n})\nexport class CheckboxControlComponent implements OnInit, AfterViewInit {\n  @Input() public options: Array<any>;\n  @Input() public selected: Array<any>;\n  public _value: Array<any> = [];\n\n  public ngOnInit() {\n    this.options = this.options.map((option) => {\n      if (this.selected.indexOf(option.value) !== -1) {\n        Object.assign(option, { checked: true });\n      }\n      return option;\n    });\n  }\n\n  public ngAfterViewInit() {}\n\n  public writeValue(value: any) {\n    this.value = value;\n  }\n\n  public registerOnChange(fn: (_: any) => void) {\n    this.onChange = fn;\n  }\n\n  public registerOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n\n  get value(): any {\n    if (this._value.length === 0) {\n      return '';\n    } else {\n      return this._value || this._value[0];\n    }\n  }\n\n  set value(v: any) {\n    if (typeof v === 'undefined' || v === null || v === '') {\n      v = [];\n    } else if (typeof v === 'string') {\n      v = [v];\n    } else if (!Array.isArray(v)) {\n      throw new TypeError('Value must be a string or an array.');\n    }\n  }\n\n  public selectOpt(option, event) {\n    if (event.target.checked) {\n      this._value.push(option.value);\n    } else {\n      this.options.forEach((o) => {\n        if (o.value === option.value) {\n          this._value.splice(o, 1);\n        }\n      });\n    }\n\n    this.onChange(this.value);\n  }\n\n  private onChange = (change: any) => {};\n  private onTouched = () => {};\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FormsModule } from '@angular/forms';\nimport { CheckboxControlComponent } from './checkbox.component';\n\n@NgModule({\n  declarations: [CheckboxControlComponent],\n  exports: [CheckboxControlComponent],\n  imports: [CommonModule, FormsModule]\n})\nexport class CheckboxModule {}\n","import { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Component, OnInit, forwardRef } from '@angular/core';\nimport * as moment_ from 'moment';\nconst moment = moment_;\n\n@Component({\n  selector: 'ngx-time-picker',\n  template: `<input\n  type=\"time\"\n  class=\"form-control\"\n  [ngModel]=\"value\"\n  (ngModelChange)=\"onTimeSelect($event)\"\n/>\n`,\n  styles: [``],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: forwardRef(() => NgxTimePickerComponent)\n    }\n  ]\n})\nexport class NgxTimePickerComponent implements OnInit, ControlValueAccessor {\n  public value: string = moment().format('HH:mm:ss');\n  public onChange: any = () => {};\n  public onTouched: any = () => {};\n\n  public ngOnInit() {}\n\n  public writeValue(value: any): void {\n    this.value = this.formatTimeValue(value);\n  }\n\n  public registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  public registerOnTouched(fn: any): void {}\n\n  public onTimeSelect($event: string): void {\n    const timeValue = this.formatTimeValue($event);\n    this.value = timeValue;\n    this.onChange(timeValue);\n  }\n\n  public formatTimeValue(timeInputString: string): string {\n    /*\n      Allows processing of data that comes in as date-time\n      or just time i.e '1970-03-01 12:32:21' or '12:32:21'\n      or '12:32' or '1970-01-01T13:03:00.000+0300'\n    */\n    let timeArray = [];\n    let dateArray = [];\n    let timeValue = '';\n\n    if (typeof timeInputString === 'undefined' || timeInputString === null) {\n    } else {\n      timeArray = timeInputString.split(':');\n      dateArray = timeInputString.split('-');\n    }\n    if (timeArray.length === 1 && moment(timeInputString).isValid()) {\n      timeValue = moment(timeInputString).format('HH:mm:ss');\n    } else if (timeArray.length > 1 && timeArray.length < 2) {\n      timeValue = moment(timeInputString, moment.defaultFormat).format(\n        'HH:mm:ss'\n      );\n    } else if (timeArray.length >= 2 && dateArray.length > 1) {\n      timeValue = moment(timeInputString, moment.defaultFormat).format(\n        'HH:mm:ss'\n      );\n    } else if (timeArray.length >= 2 && dateArray.length <= 1) {\n      timeValue = moment(timeInputString, 'HH:mm:ss').format('HH:mm:ss');\n    } else {\n      timeValue = moment().format('HH:mm:ss');\n    }\n    return timeValue;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NgxTimePickerComponent } from './ngx-time-picker.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule],\n  declarations: [NgxTimePickerComponent],\n  exports: [NgxTimePickerComponent],\n  providers: []\n})\nexport class NgxTimePickerModule {}\n","import { NgModule } from '@angular/core';\nimport { MatTabsModule, MatIconModule, MatCardModule } from '@angular/material';\n// import { NoopAnimationsModule} from '@angular/platform-browser/animations';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { FormBuilder } from '@angular/forms';\nimport { DebugModeService } from '../form-entry/services/debug-mode.service';\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\nimport { FormErrorsService } from './services/form-errors.service';\nimport { FormControlService } from './form-factory/form-control.service';\nimport { ValidationFactory } from './form-factory/validation.factory';\nimport { FormRendererComponent } from './form-renderer/form-renderer.component';\nimport { ErrorRendererComponent } from './error-renderer/error-renderer.component';\nimport { HistoricalValueDirective } from './directives/historical-value-directive';\nimport { HistoricalFieldHelperService } from './helpers/historical-field-helper-service';\nimport { SelectModule } from '../components/select/select.module';\n// import { NgSelectModule } from '@ng-select/ng-select';\nimport { RemoteFileUploadModule } from '../components/file-upload/file-upload.module';\nimport { DateTimePickerModule } from '../components/date-time-picker/date-time-picker.module';\nimport { NgxDateTimePickerModule } from '../components/ngx-date-time-picker/ngx-date-time-picker.module';\nimport { AfeNgSelectComponent } from '../components/afe-ng-select.component';\nimport { HidersDisablersFactory } from './form-factory/hiders-disablers.factory';\nimport { AlertsFactory } from './form-factory/show-messages.factory';\nimport { ExpressionRunner } from './expression-runner/expression-runner';\nimport { JsExpressionHelper } from './helpers/js-expression-helper';\nimport { FormSchemaCompiler } from './services/form-schema-compiler.service';\nimport { FormFactory } from './form-factory/form.factory';\nimport { QuestionFactory } from './form-factory/question.factory';\nimport { ControlRelationsFactory } from './form-factory/control-relations.factory';\nimport { EncounterAdapter } from './value-adapters/encounter.adapter';\nimport { PersonAttribuAdapter } from './value-adapters/person-attribute.adapter';\nimport { OrderValueAdapter } from './value-adapters/order.adapter';\nimport { ObsAdapterHelper } from './value-adapters/obs-adapter-helper';\nimport { ObsValueAdapter } from './value-adapters/obs.adapter';\nimport { RemoteSelectModule } from '../components/remote-select/remote-select.module';\nimport { AppointmentsOverviewComponent } from '../components/appointments-overview/appointments-overview.component';\nimport { EncounterViewerModule } from '../encounter-viewer/encounter-viewer.module';\nimport { CheckboxModule } from '../components/check-box/checkbox.module';\nimport { SharedModule } from '../shared.module';\nimport { TimeAgoPipe } from 'time-ago-pipe';\nimport { NgxTimePickerModule } from '../components/ngx-time-picker/ngx-time-picker.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    CollapseModule,\n    // NgSelectModule,\n    SelectModule,\n    DateTimePickerModule,\n    RemoteSelectModule,\n    // NoopAnimationsModule,\n    RemoteFileUploadModule,\n    EncounterViewerModule,\n    CheckboxModule,\n    MatIconModule,\n    MatTabsModule,\n    MatCardModule,\n    NgxDateTimePickerModule,\n    NgxTimePickerModule,\n    SharedModule\n  ],\n  declarations: [\n    FormRendererComponent,\n    AfeNgSelectComponent,\n    AppointmentsOverviewComponent,\n    HistoricalValueDirective,\n    ErrorRendererComponent,\n    TimeAgoPipe\n  ],\n  providers: [\n    FormBuilder,\n    FormControlService,\n    FormErrorsService,\n    ValidationFactory,\n    HidersDisablersFactory,\n    AlertsFactory,\n    ExpressionRunner,\n    JsExpressionHelper,\n    HistoricalFieldHelperService,\n    FormSchemaCompiler,\n    FormFactory,\n    QuestionFactory,\n    ValidationFactory,\n    ControlRelationsFactory,\n    ObsAdapterHelper,\n    ObsValueAdapter,\n    EncounterAdapter,\n    PersonAttribuAdapter,\n    OrderValueAdapter,\n    DebugModeService\n  ],\n  exports: [\n    FormRendererComponent,\n    AfeNgSelectComponent,\n    ErrorRendererComponent,\n    DateTimePickerModule,\n    EncounterViewerModule,\n    NgxDateTimePickerModule,\n    NgxTimePickerModule\n  ]\n})\nexport class FormEntryModule {}\n","export class Pair {\n  key: string;\n\n  value: any;\n\n  constructor(key: string, value: any) {\n    this.key = key;\n    this.value = value;\n  }\n}\n","export enum RenderingType {\n  Form,\n  Page,\n  Section,\n  Select,\n  DropDown\n}\n","/*\n * Public API Surface of ngx-formentry\n */\nexport { FormEntryModule } from './form-entry/form-entry.module';\n// export { DateTimePickerModule } from './components/date-time-picker/date-time-picker.module';\nexport { AfeFormControl } from './abstract-controls-extension/afe-form-control';\nexport { AfeFormGroup } from './abstract-controls-extension/afe-form-group';\nexport { AfeFormArray } from './abstract-controls-extension/afe-form-array';\nexport { AfeControlType } from './abstract-controls-extension/afe-control-type';\nexport { EncounterPdfViewerService } from './encounter-viewer/encounter-pdf-viewer.service';\nexport { ControlRelationsFactory } from './form-entry/form-factory/control-relations.factory';\nexport { FormControlService } from './form-entry/form-factory/form-control.service';\nexport { FormFactory } from './form-entry/form-factory/form.factory';\nexport { Form } from './form-entry/form-factory/form';\nexport { QuestionFactory } from './form-entry/form-factory/question.factory';\nexport { ValidationFactory } from './form-entry/form-factory/validation.factory';\nexport { FormSchemaCompiler } from './form-entry/services/form-schema-compiler.service';\nexport { HistoricalEncounterDataService } from './form-entry/services/historical-encounter-data.service';\nexport { FormErrorsService } from './form-entry/services/form-errors.service';\nexport { EncounterAdapter } from './form-entry/value-adapters/encounter.adapter';\nexport { PersonAttribuAdapter } from './form-entry/value-adapters/person-attribute.adapter';\nexport { OrderValueAdapter } from './form-entry/value-adapters/order.adapter';\nexport { ObsValueAdapter } from './form-entry/value-adapters/obs.adapter';\nexport { ObsAdapterHelper } from './form-entry/value-adapters/obs-adapter-helper';\nexport { ValueAdapter } from './form-entry/value-adapters/value.adapter';\nexport { DataSources } from './form-entry/data-sources/data-sources';\nexport { CheckBoxQuestion } from './form-entry/question-models/checkbox.model';\nexport { ConditionalValidationModel } from './form-entry/question-models/conditional-validation.model';\nexport { DateQuestion } from './form-entry/question-models/date-question';\nexport { DateValidationModel } from './form-entry/question-models/date-validation.model';\nexport { FileUploadQuestion } from './form-entry/question-models/file-upload-question';\nexport { QuestionGroup } from './form-entry/question-models/group-question';\nexport { JsExpressionValidationModel } from './form-entry/question-models/js-expression-validation.model';\nexport { MaxValidationModel } from './form-entry/question-models/max-validation.model';\nexport { MinValidationModel } from './form-entry/question-models/min-validation.model';\nexport { MultiSelectQuestion } from './form-entry/question-models/multi-select-question';\nexport { Pair } from './form-entry/question-models/pair.model';\nexport { QuestionBase } from './form-entry/question-models/question-base';\nexport { RenderingType } from './form-entry/question-models/rendering-type';\nexport { RepeatingQuestion } from './form-entry/question-models/repeating-question';\nexport { Option } from './form-entry/question-models/select-option';\nexport { SelectQuestion } from './form-entry/question-models/select-question';\nexport { TestOrderQuestion } from './form-entry/question-models/test-order-question';\nexport { TextAreaInputQuestion } from './form-entry/question-models/text-area-input-question';\nexport { TextInputQuestion } from './form-entry/question-models/text-input-question';\nexport { UiSelectQuestion } from './form-entry/question-models/ui-select-question';\nexport { ValidationModel } from './form-entry/question-models/validation.model';\nexport { BaseOptions } from './form-entry/question-models/interfaces/base-options';\nexport { RepeatingQuestionOptions } from './form-entry/question-models/interfaces/repeating-question-options';\nexport { GroupQuestionOptions } from './form-entry/question-models/interfaces/group-question-options';\nexport { NestedQuestion } from './form-entry/question-models/interfaces/nested-questions';\nexport { DateTimePickerModule } from './components/date-time-picker/date-time-picker.module';\nexport { NgxDateTimePickerModule } from './components/ngx-date-time-picker/ngx-date-time-picker.module';\nexport { JsExpressionHelper } from './form-entry/helpers/js-expression-helper';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {AfeNgSelectComponent as bg} from './components/afe-ng-select.component';\nexport {AppointmentsOverviewComponent as bh} from './components/appointments-overview/appointments-overview.component';\nexport {CheckboxControlComponent as z} from './components/check-box/checkbox.component';\nexport {CheckboxModule as y} from './components/check-box/checkbox.module';\nexport {DatePickerComponent as g} from './components/date-time-picker/date-picker/date-picker.component';\nexport {DateTimePickerComponent as k} from './components/date-time-picker/date-time-picker.component';\nexport {ModalComponent as i} from './components/date-time-picker/picker-modal/modal.component';\nexport {MomentPipe as j} from './components/date-time-picker/pipes/moment.pipe';\nexport {TimePickerComponent as h} from './components/date-time-picker/time-picker/time-picker.component';\nexport {FileUploadComponent as q} from './components/file-upload/file-upload.component';\nexport {RemoteFileUploadModule as n} from './components/file-upload/file-upload.module';\nexport {SecurePipe as p} from './components/file-upload/secure.pipe';\nexport {MY_FORMATS as ba,NgxDateTimePickerComponent as bb} from './components/ngx-date-time-picker/ngx-date-time-picker.component';\nexport {NgxTimePickerComponent as bd} from './components/ngx-time-picker/ngx-time-picker.component';\nexport {NgxTimePickerModule as bc} from './components/ngx-time-picker/ngx-time-picker.module';\nexport {RemoteSelectComponent as m} from './components/remote-select/remote-select.component';\nexport {RemoteSelectModule as l} from './components/remote-select/remote-select.module';\nexport {SelectDropdownComponent as e} from './components/select/select-dropdown.component';\nexport {STYLE as f} from './components/select/select-dropdown.component.style';\nexport {SELECT_VALUE_ACCESSOR as b,SelectComponent as c} from './components/select/select.component';\nexport {STYLE as d} from './components/select/select.component.style';\nexport {SelectModule as a} from './components/select/select.module';\nexport {FilePreviewComponent as w} from './encounter-viewer/display-controls/file-preview.component';\nexport {QuestionControlComponent as v} from './encounter-viewer/display-controls/question-control.component';\nexport {RemoteAnswerComponent as x} from './encounter-viewer/display-controls/remote-answer.component';\nexport {EncounterContainerComponent as u} from './encounter-viewer/encounter-container/encounter-container.component';\nexport {EncounterViewerComponent as s} from './encounter-viewer/encounter-view/encounter-viewer.component';\nexport {EncounterViewerModule as r} from './encounter-viewer/encounter-viewer.module';\nexport {EncounterViewerService as t} from './encounter-viewer/encounter-viewer.service';\nexport {HistoricalValueDirective as bi} from './form-entry/directives/historical-value-directive';\nexport {ErrorRendererComponent as bk} from './form-entry/error-renderer/error-renderer.component';\nexport {ExpressionRunner as bm} from './form-entry/expression-runner/expression-runner';\nexport {HidersDisablersFactory as bl} from './form-entry/form-factory/hiders-disablers.factory';\nexport {AlertsFactory as bo} from './form-entry/form-factory/show-messages.factory';\nexport {FormRendererComponent as be} from './form-entry/form-renderer/form-renderer.component';\nexport {DEFAULT_STYLES as bf} from './form-entry/form-renderer/form-renderer.component.css';\nexport {HistoricalFieldHelperService as bj} from './form-entry/helpers/historical-field-helper-service';\nexport {CheckboxOptions as bp} from './form-entry/question-models/interfaces/checkbox-options';\nexport {DateQuestionOptions as bq} from './form-entry/question-models/interfaces/date-question-options';\nexport {FileUploadQuestionOptions as br} from './form-entry/question-models/interfaces/file-upload-question-options';\nexport {MultiSelectQuestionOptions as bt} from './form-entry/question-models/interfaces/multi-select-options';\nexport {SelectOption as bu} from './form-entry/question-models/interfaces/select-option';\nexport {SelectQuestionOptions as bs} from './form-entry/question-models/interfaces/select-question-options';\nexport {TestOrderQuestionOptions as bv} from './form-entry/question-models/interfaces/test-order-question-options';\nexport {TextAreaQuestionOptions as bx} from './form-entry/question-models/interfaces/text-area-question-options';\nexport {TextQuestionOptions as bw} from './form-entry/question-models/interfaces/text-question-options';\nexport {UiSelectQuestionOptions as by} from './form-entry/question-models/interfaces/ui-select-question-options';\nexport {DebugModeService as bn} from './form-entry/services/debug-mode.service';\nexport {SharedModule as o} from './shared.module';"],"names":["Injectable","Subject","AbstractControl","tslib_1.__extends","FormControl","FormGroup","FormArray","AfeControlType","_.first","_.forEach","_.last","_.findIndex","_.filter","Validators","Component","Inject","DOCUMENT","Input","_.isArray","_.each","EventEmitter","_.isUndefined","Directive","Output","HostListener","tslib_1.__values","NG_VALUE_ACCESSOR","forwardRef","_","ViewEncapsulation","ViewChild","STYLE","NgModule","CommonModule","FormsModule","BehaviorSubject","WrappedValue","Pipe","ChangeDetectorRef","DomSanitizer","Renderer2","WebcamModule","NgxFileUploaderModule","moment","_.chunk","ChangeDetectionStrategy","MAT_DATE_FORMATS","DateAdapter","MomentDateAdapter","ReactiveFormsModule","MatDatepickerModule","MatFormFieldModule","MatNativeDateModule","MatInputModule","MatSelectModule","Option","_.isEmpty","_.includes","of","_.sortBy","_.isNil","_.extend","_.has","_.find","_.intersection","_.isEqual","_.map","_.clone","_.uniqBy","combineLatest","pdfMake.vfs","_.isNumber","noop","HttpClientModule","CollapseModule","MatIconModule","MatTabsModule","MatCardModule","TimeAgoPipe","FormBuilder","RenderingType"],"mappings":"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AAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,G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"}
