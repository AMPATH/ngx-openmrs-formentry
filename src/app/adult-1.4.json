{
  "uuid": "bcb914ea-1e03-4c7f-9fd5-1baba5841e78",
  "display": "AMPATH POC Adult Return Visit Form v1.4",
  "name": "AMPATH POC Adult Return Visit Form v1.4",
  "description": "AMPATH POC Adult Return Visit Form v1.4",
  "encounterType": {
    "uuid": "8d5b2be0-c2cc-11de-8d13-0010c6dffd0f",
    "display": "ADULTRETURN",
    "name": "ADULTRETURN",
    "description": "Outpatient Adult Return Visit",
    "retired": false,
    "links": [
      {
        "rel": "self",
        "uri": "https://ngx.ampath.or.ke/amrs/ws/rest/v1/encountertype/8d5b2be0-c2cc-11de-8d13-0010c6dffd0f"
      },
      {
        "rel": "full",
        "uri": "https://ngx.ampath.or.ke/amrs/ws/rest/v1/encountertype/8d5b2be0-c2cc-11de-8d13-0010c6dffd0f?v=full"
      }
    ],
    "resourceVersion": "1.8"
  },
  "version": "1.4",
  "build": null,
  "published": false,
  "formFields": [],
  "retired": false,
  "auditInfo": {
    "creator": {
      "uuid": "5aa3a3ca-13a9-11df-a1f1-0026b9348838",
      "display": "pseurey",
      "links": [
        {
          "rel": "self",
          "uri": "https://ngx.ampath.or.ke/amrs/ws/rest/v1/user/5aa3a3ca-13a9-11df-a1f1-0026b9348838"
        }
      ]
    },
    "dateCreated": "2018-08-29T12:32:32.000+0300",
    "changedBy": {
      "uuid": "5aa3a3ca-13a9-11df-a1f1-0026b9348838",
      "display": "pseurey",
      "links": [
        {
          "rel": "self",
          "uri": "https://ngx.ampath.or.ke/amrs/ws/rest/v1/user/5aa3a3ca-13a9-11df-a1f1-0026b9348838"
        }
      ]
    },
    "dateChanged": "2018-08-29T12:39:01.000+0300"
  },
  "resources": [
    {
      "uuid": "8d66afda-0b7a-403c-814e-d7253a429f7a",
      "name": "JSON schema",
      "valueReference": "c8588f89-dfe0-428d-a8ed-b29381afb31a",
      "display": "JSON schema",
      "links": [
        {
          "rel": "value",
          "uri": "https://ngx.ampath.or.ke/amrs/ws/rest/v1/form/bcb914ea-1e03-4c7f-9fd5-1baba5841e78/resource/8d66afda-0b7a-403c-814e-d7253a429f7a/value"
        },
        {
          "rel": "self",
          "uri": "https://ngx.ampath.or.ke/amrs/ws/rest/v1/form/bcb914ea-1e03-4c7f-9fd5-1baba5841e78/resource/8d66afda-0b7a-403c-814e-d7253a429f7a"
        },
        {
          "rel": "full",
          "uri": "https://ngx.ampath.or.ke/amrs/ws/rest/v1/form/bcb914ea-1e03-4c7f-9fd5-1baba5841e78/resource/8d66afda-0b7a-403c-814e-d7253a429f7a?v=full"
        }
      ],
      "resourceVersion": "1.9"
    }
  ],
  "links": [
    {
      "rel": "self",
      "uri": "https://ngx.ampath.or.ke/amrs/ws/rest/v1/form/bcb914ea-1e03-4c7f-9fd5-1baba5841e78"
    }
  ],
  "resourceVersion": "1.9",
  "pages": [
    {
      "label": "Encounter Details",
      "sections": [
        {
          "label": "Encounter Details",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Visit date:",
              "type": "encounterDatetime",
              "required": "true",
              "default": "",
              "id": "encDate",
              "questionOptions": {
                "rendering": "date"
              },
              "validators": [
                {
                  "type": "date"
                }
              ]
            },
            {
              "type": "encounterProvider",
              "label": "Provider:",
              "id": "provider",
              "required": "true",
              "default": "",
              "questionOptions": {
                "rendering": "ui-select-extended"
              }
            },
            {
              "type": "encounterLocation",
              "label": "Facility name (site/satellite clinic required):",
              "id": "location",
              "required": "true",
              "questionOptions": {
                "rendering": "ui-select-extended"
              }
            }
          ]
        }
      ]
    },
    {
      "label": "Pre-Clinic Review",
      "sections": [
        {
          "label": "Pre-clinic Review",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Was this visit scheduled?",
              "id": "scheduledVisit",
              "questionOptions": {
                "rendering": "select",
                "concept": "a89ff9a6-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a89b6440-1350-11df-a1f1-0026b9348838",
                    "label": "Scheduled visit"
                  },
                  {
                    "concept": "a89ff816-1350-11df-a1f1-0026b9348838",
                    "label": "Unscheduled visit early"
                  },
                  {
                    "concept": "a89ff8de-1350-11df-a1f1-0026b9348838",
                    "label": "Unscheduled visit late"
                  }
                ]
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "If unscheduled, actual scheduled date",
              "id": "actualDate",
              "type": "obs",
              "required": {
                "type": "conditionalRequired",
                "message": "Patient visit marked as unscheduled. Please provide the scheduled date.",
                "referenceQuestionId": "scheduledVisit",
                "referenceQuestionAnswers": [
                  "a89ff816-1350-11df-a1f1-0026b9348838",
                  "a89ff8de-1350-11df-a1f1-0026b9348838"
                ]
              },
              "questionOptions": {
                "rendering": "date",
                "concept": "dc1942b2-5e50-4adc-949d-ad6c905f054e"
              },
              "validators": [
                {
                  "type": "date",
                  "allowFutureDates": "true"
                },
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(scheduledVisit) && arrayContains(['a89ff816-1350-11df-a1f1-0026b9348838','a89ff8de-1350-11df-a1f1-0026b9348838'], scheduledVisit) && isEmpty(myValue)",
                  "message": "Patient visit marked as unscheduled. Please provide the scheduled date."
                }
              ],
              "hide": {
                "hideWhenExpression": "!arrayContains(['a89ff816-1350-11df-a1f1-0026b9348838','a89ff8de-1350-11df-a1f1-0026b9348838'], scheduledVisit)"
              }
            },
            {
              "label": "Patient covered by NHIF:",
              "id": "nhif",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('0b49e3e6-55df-4096-93ca-59edadb74b3f')) ? undefined : HD.getObject('prevEnc').getValue('0b49e3e6-55df-4096-93ca-59edadb74b3f')",
              "questionOptions": {
                "rendering": "select",
                "concept": "0b49e3e6-55df-4096-93ca-59edadb74b3f",
                "answers": [
                  {
                    "concept": "8b715fed-97f6-4e38-8f6a-c167a42f8923",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ]
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "What is the patient's NHIF status?",
              "id": "nhifStatus",
              "questionInfo": "Indicate if the patient has been remitting monthly contributions towards the NHIF medical cover.",
              "questionOptions": {
                "rendering": "select",
                "concept": "548e6743-67c0-4a6b-bb07-b5f799f63bc1",
                "answers": [
                  {
                    "concept": "b058a9ad-a0e4-4b37-9214-75b8aed1eaa4",
                    "label": "Active"
                  },
                  {
                    "concept": "dd373348-1a7f-4625-9e69-9904fa1cc9c7",
                    "label": "Inactive"
                  }
                ]
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "nhif !== '8b715fed-97f6-4e38-8f6a-c167a42f8923'"
              }
            },
            {
              "label": "What insurance do you have?",
              "id": "healthInsurance",
              "questionInfo": "Indicate if the patient has another medical cover.",
              "questionOptions": {
                "rendering": "select",
                "concept": "a8b02524-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "0bfb0150-949b-4625-98b8-b9d8275bcf44",
                    "label": "Employer based health insurance"
                  },
                  {
                    "concept": "6fac74c3-fe25-4170-92a4-3ecb8859152e",
                    "label": "Individual private health insurance"
                  },
                  {
                    "concept": "21eb8488-76ae-47ce-a542-bb3038ab05de",
                    "label": "Zuri health insurance"
                  },
                  {
                    "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                    "label": "Other"
                  }
                ]
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "nhif !== 'a899e0ac-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Do referral and networking as guided by the session:",
              "type": "obs",
              "id": "refnet",
              "questionOptions": {
                "concept": "a89c2344-1350-11df-a1f1-0026b9348838",
                "rendering": "checkbox",
                "answers": [
                  {
                    "label": "Social work",
                    "concept": "a89e2d1a-1350-11df-a1f1-0026b9348838"
                  },
                  {
                    "label": "Nutrition",
                    "concept": "a8a8afd8-1350-11df-a1f1-0026b9348838"
                  },
                  {
                    "label": "Support group",
                    "concept": "a89e2df6-1350-11df-a1f1-0026b9348838"
                  },
                  {
                    "label": "Psychological counseling",
                    "concept": "a8a8b42e-1350-11df-a1f1-0026b9348838"
                  },
                  {
                    "label": "Medical clinics",
                    "concept": "a89526f2-1350-11df-a1f1-0026b9348838"
                  },
                  {
                    "label": "LACE",
                    "concept": "355b199f-c9c7-4e91-831f-2be17d2c67bd"
                  },
                  {
                    "label": "Other",
                    "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838"
                  }
                ]
              }
            }
          ]
        },
        {
          "label": "Person Collecting Medication",
          "questions": [
            {
              "label": "Visited by:",
              "id": "vistBy",
              "questionInfo": "Record the person that came for the clinic today, whether it is the patient or the treatment supporter.",
              "questionOptions": {
                "rendering": "select",
                "concept": "a89cd410-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a898c6f4-1350-11df-a1f1-0026b9348838",
                    "label": "Self"
                  },
                  {
                    "concept": "01b957da-23bb-4862-819d-036364fe3faf",
                    "label": "Treatment supporter"
                  }
                ]
              },
              "type": "obs",
              "validators": []
            }
          ]
        }
      ]
    },
    {
      "label": "Clinical History",
      "sections": [
        {
          "label": "Social History",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Civil status:",
              "type": "obs",
              "historicalExpression": "HD.getObject('prevEnc').getValue('a899a9f2-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "rendering": "select",
                "concept": "a899a9f2-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a899af10-1350-11df-a1f1-0026b9348838",
                    "label": "Cohabitating"
                  },
                  {
                    "concept": "a899ad58-1350-11df-a1f1-0026b9348838",
                    "label": "Divorced"
                  },
                  {
                    "concept": "a8aa76b0-1350-11df-a1f1-0026b9348838",
                    "label": "Married monogamous"
                  },
                  {
                    "concept": "a8b03712-1350-11df-a1f1-0026b9348838",
                    "label": "Married polygamous"
                  },
                  {
                    "concept": "a899aba0-1350-11df-a1f1-0026b9348838",
                    "label": "Separated"
                  },
                  {
                    "concept": "a899ac7c-1350-11df-a1f1-0026b9348838",
                    "label": "Single"
                  },
                  {
                    "concept": "a899ae34-1350-11df-a1f1-0026b9348838",
                    "label": "Widowed"
                  }
                ]
              },
              "validators": [],
              "hide": {
                "hideWhenExpression": "visitTypeUuid !== '164c76c-cc91-4ac2-89e9-ab7c29152ee0'"
              }
            },
            {
              "label": "Discordant couple:",
              "required": "true",
              "questionOptions": {
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  },
                  {
                    "concept": "a899b50a-1350-11df-a1f1-0026b9348838",
                    "label": "Unknown"
                  },
                  {
                    "concept": "a89ad3a4-1350-11df-a1f1-0026b9348838",
                    "label": "N/A"
                  }
                ],
                "concept": "a8af49d8-1350-11df-a1f1-0026b9348838",
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "visitTypeUuid !== '164c76c-cc91-4ac2-89e9-ab7c29152ee0'"
              }
            }
          ]
        },
        {
          "label": "Prevention With Positives",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Prevention with positives: At risk population:",
              "required": "true",
              "historicalExpression": "HD.getObject('prevEnc').getValue('93aa3f1d-1c39-4196-b5e6-8adc916cd5d6')",
              "questionOptions": {
                "rendering": "select",
                "concept": "93aa3f1d-1c39-4196-b5e6-8adc916cd5d6",
                "answers": [
                  {
                    "concept": "5da55301-e28e-4fdf-8b64-02622dedc8b0",
                    "label": "Client of sex worker"
                  },
                  {
                    "concept": "a89ff438-1350-11df-a1f1-0026b9348838",
                    "label": "Commercial sex worker"
                  },
                  {
                    "concept": "a8af49d8-1350-11df-a1f1-0026b9348838",
                    "label": "Discordant couple"
                  },
                  {
                    "concept": "a890d57a-1350-11df-a1f1-0026b9348838",
                    "label": "IV drug use"
                  },
                  {
                    "concept": "e19c35f0-12f0-46c2-94ea-97050f37b811",
                    "label": "MSM"
                  },
                  {
                    "concept": "a89ad3a4-1350-11df-a1f1-0026b9348838",
                    "label": "N/A"
                  }
                ]
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "visitTypeUuid !== '164c76c-cc91-4ac2-89e9-ab7c29152ee0'"
              }
            },
            {
              "label": "Prevention with positives: PWP services:",
              "id": "pwpServices",
              "required": "true",
              "historicalExpression": "HD.getObject('prevEnc').getValue('9ce5dbf0-a141-4ad8-8c9d-cd2bf84fe72b')",
              "questionOptions": {
                "rendering": "select",
                "concept": "9ce5dbf0-a141-4ad8-8c9d-cd2bf84fe72b",
                "answers": [
                  {
                    "concept": "f0a280e8-eb88-41a8-837a-f9949ed1b9cd",
                    "label": "Condom promotion/provision"
                  },
                  {
                    "concept": "bf51f71e-937c-4da5-ae07-654acf59f5bb",
                    "label": "Couple counseling"
                  },
                  {
                    "concept": "91f43249-73c7-427c-8300-2038fc0d6be8",
                    "label": "Needle exchange"
                  },
                  {
                    "concept": "05656545-86be-4605-9527-34fb580534b1",
                    "label": "Targeted risk reduction"
                  },
                  {
                    "concept": "a89ad3a4-1350-11df-a1f1-0026b9348838",
                    "label": "N/A"
                  }
                ]
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "visitTypeUuid !== '164c76c-cc91-4ac2-89e9-ab7c29152ee0'"
              }
            }
          ]
        },
        {
          "label": "Hospitalization History",
          "questions": [
            {
              "type": "obsGroup",
              "label": "Recent hospitalizations",
              "questionOptions": {
                "rendering": "group",
                "concept": "a8a003a6-1350-11df-a1f1-0026b9348838"
              },
              "questions": [
                {
                  "label": "Was the patient hospitalized since last visit?",
                  "id": "wasHospitalized",
                  "questionOptions": {
                    "concept": "a898c56e-1350-11df-a1f1-0026b9348838",
                    "answers": [
                      {
                        "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                        "label": "Yes"
                      },
                      {
                        "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                        "label": "No"
                      }
                    ],
                    "rendering": "select"
                  },
                  "type": "obs",
                  "validators": []
                }
              ]
            },
            {
              "type": "obsGroup",
              "label": "If yes reason for hospitalization:",
              "questionOptions": {
                "concept": "a8a003a6-1350-11df-a1f1-0026b9348838",
                "rendering": "repeating"
              },
              "questions": [
                {
                  "label": "Reason for hospitalization:",
                  "id": "hospReason",
                  "questionOptions": {
                    "concept": "a8a07a48-1350-11df-a1f1-0026b9348838",
                    "rendering": "problem"
                  },
                  "type": "obs",
                  "validators": [
                    {
                      "type": "conditionalAnswered",
                      "message": "Providing diagnosis but didn't answer that patient was hospitalized in question",
                      "referenceQuestionId": "wasHospitalized",
                      "referenceQuestionAnswers": [
                        "a899b35c-1350-11df-a1f1-0026b9348838"
                      ]
                    },
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "isEmpty(myValue) && !isEmpty(wasHospitalized) && wasHospitalized === 'a899b35c-1350-11df-a1f1-0026b9348838'",
                      "message": "Patient previously marked as hospitalized. Please provide hospitalization reason."
                    }
                  ],
                  "hide": {
                    "hideWhenExpression": "wasHospitalized !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
                  }
                }
              ]
            }
          ]
        },
        {
          "label": "Reproductive History",
          "isExpanded": "true",
          "questions": [
            {
              "label": "How many pregnancies have you had?",
              "type": "obs",
              "id": "noPregnancy",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a8aaf59a-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('a8aaf59a-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a8aaf59a-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "max": "50",
                "min": "0"
              },
              "hide": {
                "hideWhenExpression": "sex !== 'F'"
              }
            },
            {
              "label": "How many pregnancies have you delivered?",
              "type": "obs",
              "id": "noDelivery",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a899a920-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('a899a920-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a899a920-1350-11df-a1f1-0026b9348838",
                "rendering": "number",
                "min": "0"
              },
              "hide": {
                "hideWhenExpression": "sex !== 'F'"
              }
            },
            {
              "label": "Menstruation status:",
              "id": "menStatus",
              "required": "true",
              "questionOptions": {
                "concept": "a8a185d2-1350-11df-a1f1-0026b9348838",
                "rendering": "select",
                "answers": [
                  {
                    "label": "Menstruating",
                    "concept": "a8ad2b4e-1350-11df-a1f1-0026b9348838"
                  },
                  {
                    "label": "Postmenopausal",
                    "concept": "5cc1c1a7-dfcc-47dc-ad73-c386c188fad8"
                  },
                  {
                    "label": "Hormonal amenorrhea",
                    "concept": "a8a18514-1350-11df-a1f1-0026b9348838"
                  }
                ]
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "sex !== 'F'"
              }
            },
            {
              "label": "LMP:",
              "id": "lmpDate1",
              "questionOptions": {
                "concept": "a89ff758-1350-11df-a1f1-0026b9348838",
                "rendering": "date"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "date"
                },
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && !isEmpty(pattype1) && pattype1 === '375e6d4a-ba94-41ac-8ac3-5a56015c4d92'",
                  "message": "Patient is antenatal. Please provide LMP."
                },
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && !isEmpty(menStatus) && menStatus === 'a8ad2b4e-1350-11df-a1f1-0026b9348838'",
                  "message": "Patient is menstruating. Please provide LMP."
                }
              ],
              "hide": {
                "hideWhenExpression": "menStatus !== 'a8ad2b4e-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Is the patient pregnant?",
              "id": "pregnant",
              "questionOptions": {
                "concept": "6b4f1d00-0a27-41dd-a299-fb7dc730819c",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ]
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && moment(encDate).diff(moment(lmpDate1), 'days') >= 35",
                  "message": "Last LMP is greater than 35 days. Please indicate patient's pregnancy status."
                }
              ],
              "hide": {
                "hideWhenExpression": "sex !== 'F' || menStatus !== 'a8ad2b4e-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "EDD:",
              "id": "delDate",
              "required": "true",
              "questionOptions": {
                "concept": "a8aaddbc-1350-11df-a1f1-0026b9348838",
                "rendering": "date",
                "calculate": {
                  "calculateExpression": "moment(lmpDate1).isValid() ? moment(lmpDate1).add(280, 'days').toDate():''"
                }
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "(new moment(lmpDate1)).isAfter((new moment(myValue)), 'day') || (new moment(lmpDate1)).isSame((new moment(myValue)), 'day')",
                  "message": "EDD should be greater than the encounter date."
                },
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && !isEmpty(pregnant) && pregnant === 'a899b35c-1350-11df-a1f1-0026b9348838'",
                  "message": "Patient is pregnant. Please provide EDD."
                }
              ],
              "hide": {
                "hideWhenExpression": "pregnant !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Reason patient not pregnant?",
              "id": "reasonNotPreg",
              "questionOptions": {
                "concept": "f701166d-9820-420d-b0bc-c98ad4747dec",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "5bafcbc0-e499-4741-85e3-52e93f68f08c",
                    "label": "Pregnancy not suspected"
                  },
                  {
                    "concept": "6cb93e09-cd9a-4333-994a-9cd65dfa8c12",
                    "label": "Pregnancy test is negative"
                  },
                  {
                    "concept": "c662737e-d529-4b49-9ad3-2d72eeb56b45",
                    "label": "Using hormonal contraceptive"
                  },
                  {
                    "concept": "3bca6c9c-333c-433e-ac07-7e44e0501b49",
                    "label": "postpartum < 6 weeks"
                  }
                ]
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && !isEmpty(pregnant) && pregnant === 'a899b42e-1350-11df-a1f1-0026b9348838'",
                  "message": "Patient is not pregnant. Please provide reasons."
                }
              ],
              "hide": {
                "hideWhenExpression": "pregnant !== 'a899b42e-1350-11df-a1f1-0026b9348838'"
              }
            }
          ]
        },
        {
          "label": "Family Planning Profile",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Is the client using condoms?",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a8a00090-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('a8a00090-1350-11df-a1f1-0026b9348838')",
              "id": "condomUse",
              "questionOptions": {
                "concept": "a8a00090-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": []
            },
            {
              "type": "obsGroup",
              "label": "Family planning, detailed",
              "questionOptions": {
                "concept": "767e8060-5272-4927-ab78-97534a4499ef",
                "rendering": "group"
              },
              "questions": [
                {
                  "label": "Select modern contraception method:",
                  "required": "true",
                  "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('767e8060-5272-4927-ab78-97534a4499ef.a894b1cc-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('767e8060-5272-4927-ab78-97534a4499ef.a894b1cc-1350-11df-a1f1-0026b9348838')",
                  "id": "fpMethod",
                  "questionOptions": {
                    "concept": "a894b1cc-1350-11df-a1f1-0026b9348838",
                    "answers": [
                      {
                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                        "label": "None"
                      },
                      {
                        "concept": "a8a713f8-1350-11df-a1f1-0026b9348838",
                        "label": "Bilateral tubal ligation"
                      },
                      {
                        "concept": "a123d949-31f3-4abf-98e3-8504e17ebc00",
                        "label": "3-year implant"
                      },
                      {
                        "concept": "feb48308-a56f-4754-8e8f-8c1698e570cb",
                        "label": "5-year implant"
                      },
                      {
                        "concept": "f8c66a32-3660-4233-ae51-d3a4a1eac44e",
                        "label": "IUCD copper"
                      },
                      {
                        "concept": "236dba53-1062-46b4-8067-ec8711897dbf",
                        "label": "IUCD hormonal"
                      },
                      {
                        "concept": "a8988b44-1350-11df-a1f1-0026b9348838",
                        "label": "Injectables (Depo)"
                      },
                      {
                        "concept": "a897dbd6-1350-11df-a1f1-0026b9348838",
                        "label": "OCP"
                      },
                      {
                        "concept": "eaa5796d-0b1c-478b-8c9d-d23cf4c3bddc",
                        "label": "Vasectomy"
                      }
                    ],
                    "rendering": "select"
                  },
                  "type": "obs",
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "sex !== 'F'  || menStatus ==='5cc1c1a7-dfcc-47dc-ad73-c386c188fad8'"
                  }
                },
                {
                  "type": "obs",
                  "label": "Approximate start date (If FP is 3-year implant/5-year implant/Injectables/Vasectomy/IUCD Copper/IUCD Hormonal/Bilateral tubal ligation)",
                  "id": "appStartDate",
                  "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('767e8060-5272-4927-ab78-97534a4499ef.a89ae092-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('767e8060-5272-4927-ab78-97534a4499ef.a89ae092-1350-11df-a1f1-0026b9348838')",
                  "questionOptions": {
                    "concept": "a89ae092-1350-11df-a1f1-0026b9348838",
                    "rendering": "date"
                  },
                  "validators": [
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "(new moment(encDate)).isBefore((new moment(myValue)), 'day') || (new moment(encDate)).isSame((new moment(myValue)), 'day')",
                      "message": "Start date should be before the encounter date."
                    },
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "isEmpty(myValue) && !(isEmpty(fpMethod) || !arrayContainsAny(fpMethod,['a123d949-31f3-4abf-98e3-8504e17ebc00','feb48308-a56f-4754-8e8f-8c1698e570cb','eaa5796d-0b1c-478b-8c9d-d23cf4c3bddc','a8988b44-1350-11df-a1f1-0026b9348838','a8a713f8-1350-11df-a1f1-0026b9348838','f8c66a32-3660-4233-ae51-d3a4a1eac44e','236dba53-1062-46b4-8067-ec8711897dbf']))",
                      "message": "Start date is required."
                    }
                  ],
                  "hide": {
                    "hideWhenExpression": "isEmpty(fpMethod) || arrayContains(['a899e0ac-1350-11df-a1f1-0026b9348838','a897dbd6-1350-11df-a1f1-0026b9348838'],fpMethod)"
                  }
                }
              ]
            },
            {
              "label": "Does the client wish to become pregnant in less than a year?",
              "id": "pregInaYear",
              "questionOptions": {
                "concept": "3ffd9c53-2638-4db2-8c2d-5f025c2a1bfb",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "sex !== 'F'  || fpMethod !== 'a899e0ac-1350-11df-a1f1-0026b9348838'|| menStatus ==='5cc1c1a7-dfcc-47dc-ad73-c386c188fad8'"
              }
            }
          ]
        },
        {
          "label": "Cancer Screening",
          "questions": [
            {
              "label": "Cervical cancer screening:",
              "id": "cervicalCancerScreening",
              "questionOptions": {
                "concept": "cf33d31f-b96b-4437-a6b8-ff5f43855f9b",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  },
                  {
                    "concept": "a89ad3a4-1350-11df-a1f1-0026b9348838",
                    "label": "N/A"
                  }
                ]
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "sex !== 'F'"
              }
            },
            {
              "label": "VIA test result:",
              "type": "obs",
              "id": "VIATestResult",
              "questionOptions": {
                "concept": "f165c64a-9354-4145-9b06-4ee437630218",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "a896f3a6-1350-11df-a1f1-0026b9348838",
                    "label": "Positive"
                  },
                  {
                    "concept": "a896d2cc-1350-11df-a1f1-0026b9348838",
                    "label": "Negative"
                  },
                  {
                    "concept": "a89ad3a4-1350-11df-a1f1-0026b9348838",
                    "label": "N/A"
                  }
                ],
                "showDate": "true",
                "shownDateOptions": {
                  "validators": [
                    {
                      "type": "date"
                    },
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "isEmpty(myValue) && !isEmpty(VIATestResult) && VIATestResult !== 'a89ad3a4-1350-11df-a1f1-0026b9348838' ",
                      "message": "Date is result is required."
                    }
                  ],
                  "hide": {
                    "hideWhenExpression": "isEmpty(VIATestResult)"
                  }
                }
              },
              "hide": {
                "hideWhenExpression": "sex !== 'F' || isEmpty(cervicalCancerScreening) || cervicalCancerScreening !== 'a899b35c-1350-11df-a1f1-0026b9348838' "
              }
            }
          ]
        },
        {
          "label": "Adult Vaccination",
          "questions": [
            {
              "label": "Immunization history:",
              "type": "obs",
              "questionOptions": {
                "rendering": "multiCheckbox",
                "concept": "507d7df8-2da6-4ace-93b8-4271620f27c5",
                "answers": [
                  {
                    "concept": "a897dd84-1350-11df-a1f1-0026b9348838",
                    "label": "Hepatitis B"
                  },
                  {
                    "concept": "a8a70746-1350-11df-a1f1-0026b9348838",
                    "label": "Flu"
                  }
                ]
              },
              "validators": []
            }
          ]
        }
      ]
    },
    {
      "label": "Medication History",
      "sections": [
        {
          "label": "ART History",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Is the patient on any ART?",
              "required": "true",
              "id": "onArt",
              "historicalExpression": "arrayContainsAny(['a89b7c50-1350-11df-a1f1-0026b9348838','a89b7ae8-1350-11df-a1f1-0026b9348838','a8a00220-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838'], HD.getObject('prevEnc').getValue('a89b75d4-1350-11df-a1f1-0026b9348838')) ? 'a899b35c-1350-11df-a1f1-0026b9348838' : HD.getObject('prevEnc').getValue('a89ae254-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a89ae254-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(transferInControl) && transferInControl === 'a899b42e-1350-11df-a1f1-0026b9348838' && !isEmpty(myValue) && arrayContains(['a899b35c-1350-11df-a1f1-0026b9348838'], myValue)",
                  "message": "In the enrollment section, patient not marked as transfer in. Kindly confirm."
                }
              ]
            },
            {
              "label": "Reason for use:",
              "id": "reasonUse",
              "type": "obs",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a8a30d1c-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('a8a30d1c-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a8a30d1c-1350-11df-a1f1-0026b9348838",
                "rendering": "select",
                "answers": [
                  {
                    "concept": "a89adc46-1350-11df-a1f1-0026b9348838",
                    "label": "Treatment"
                  },
                  {
                    "concept": "a8a19c20-1350-11df-a1f1-0026b9348838",
                    "label": "PEP"
                  },
                  {
                    "concept": "27ac429d-8a42-476e-b2f6-65bde0b8c935",
                    "label": "Prep"
                  },
                  {
                    "concept": "a89fbedc-1350-11df-a1f1-0026b9348838",
                    "label": "PMTCT"
                  }
                ]
              },
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "If patient started ART since last visit, enter start date:",
              "id": "startDate",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a89d200a-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('a89d200a-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a89d200a-1350-11df-a1f1-0026b9348838",
                "rendering": "date"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "date"
                }
              ],
              "hide": {
                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Line of ART patient is taking:",
              "id": "current_arv_line",
              "historicalExpression": "!_.isEmpty(HD.getObject('prevEnc').getValue('a89b6a62-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('04616f5d-b961-4f41-bbd7-bcc0dd235577')",
              "questionOptions": {
                "concept": "04616f5d-b961-4f41-bbd7-bcc0dd235577",
                "answers": [
                  {
                    "concept": "034047bd-3fa1-4b2a-b0f0-2787e9b9f7b3",
                    "label": "First line regimen"
                  },
                  {
                    "concept": "8f8a715d-e49a-4b2c-aa3a-83fa9d7a4254",
                    "label": "Second line regimen"
                  },
                  {
                    "concept": "a90ebdd2-351f-485a-b850-4938fcca2729",
                    "label": "Third line regimen"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && !isEmpty(onArt) && onArt === 'a899b35c-1350-11df-a1f1-0026b9348838'",
                  "message": "Patient previously marked as on ART. Please provide the treatment category."
                }
              ],
              "hide": {
                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Patient's ART regimen, adults:",
              "id": "current_art_regimen_adult",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a89b6a62-1350-11df-a1f1-0026b9348838')) ? (_.isEmpty(HD.getObject('prevEnc').getValue('a8a08344-1350-11df-a1f1-0026b9348838'))? HD.getObject('prevEnc').getValue('a899cf5e-1350-11df-a1f1-0026b9348838') : HD.getObject('prevEnc').getValue('a8a08344-1350-11df-a1f1-0026b9348838.a899cf5e-1350-11df-a1f1-0026b9348838')) : HD.getObject('prevEnc').getValue('a89b6a62-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a899cf5e-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "1c4a75d0-cc91-4752-b0a5-4b833326ff7a",
                    "label": "TDF300mg/3TC300mg/EFV600mg"
                  },
                  {
                    "concept": "18e86e1f-92b8-40cd-8266-0df0ab0a4a50",
                    "label": "DTG50mg/3TC300mg/TDF300mg"
                  },
                  {
                    "concept": "6a73f32d-1870-4527-af6e-74443251ded2",
                    "label": "NVP200/ZDV300/3TC150"
                  },
                  {
                    "concept": "a89cc876-1350-11df-a1f1-0026b9348838",
                    "label": "3TC300mg/TDF300mg"
                  },
                  {
                    "concept": "a896758e-1350-11df-a1f1-0026b9348838",
                    "label": "3TC150mg/ZDV300mg"
                  },
                  {
                    "concept": "a8afcf84-1350-11df-a1f1-0026b9348838",
                    "label": "Emtri200mg/TDF300(Truvada)"
                  },
                  {
                    "concept": "a897e7c0-1350-11df-a1f1-0026b9348838",
                    "label": "Aluvia (Kaletra)200mg/LPV50mg"
                  },
                  {
                    "concept": "a8afc066-1350-11df-a1f1-0026b9348838",
                    "label": "Atazanavir300/Ritonavir100"
                  },
                  {
                    "concept": "dabf36cb-dd9a-4542-a8ef-874c1ee5be4a",
                    "label": "FTC200mg/RPV25mg/TDF245mg(Eviplera)"
                  },
                  {
                    "concept": "98b0baf6-0b73-4429-9264-6233684b0969",
                    "label": "Dolutegravir 50mg"
                  },
                  {
                    "concept": "a897f8a0-1350-11df-a1f1-0026b9348838",
                    "label": "Abacavir 300mg"
                  },
                  {
                    "concept": "a89677e6-1350-11df-a1f1-0026b9348838",
                    "label": "Efavirenz 600mg"
                  },
                  {
                    "concept": "a89673f4-1350-11df-a1f1-0026b9348838",
                    "label": "Lamivudine 150mg"
                  },
                  {
                    "concept": "a8967656-1350-11df-a1f1-0026b9348838",
                    "label": "Nevirapine 200mg"
                  },
                  {
                    "concept": "a8afbd64-1350-11df-a1f1-0026b9348838",
                    "label": "Raltegravir 400mg"
                  },
                  {
                    "concept": "a897ea4a-1350-11df-a1f1-0026b9348838",
                    "label": "Zidovudine 300mg"
                  },
                  {
                    "concept": "68a0a5dd-1e91-43a2-8dce-c6e84a14de04",
                    "label": "Darunavir 600mg"
                  },
                  {
                    "concept": "1baf254e-1429-4fd9-8db1-edf6523cea13",
                    "label": "Ritonavir 100mg"
                  },
                  {
                    "concept": "42ef7c4d-d6fb-49c0-a46e-019c42dea203",
                    "label": "Ritonavir 80mg"
                  },
                  {
                    "concept": "38fbba9c-4b26-412d-9659-8dd649514d66",
                    "label": "Etravirine 100mg"
                  }
                ],
                "rendering": "multiCheckbox"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && !isEmpty(onArt) && onArt === 'a899b35c-1350-11df-a1f1-0026b9348838'",
                  "message": "Patient  marked as on ART. Please provide the Regimen."
                }
              ],
              "hide": {
                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "type": "obsGroup",
              "label": "ART adherence",
              "questionOptions": {
                "concept": "bc3834dd-ef07-4027-be30-729baa069291",
                "rendering": "group"
              },
              "questions": []
            }
          ]
        },
        {
          "label": "Morisky Adherence",
          "questions": [
            {
              "label": "Do you ever forget to take your medicines? (0=No, 1=Yes)",
              "id": "forget",
              "questionOptions": {
                "concept": "99a99956-90b0-431e-a453-bf8efffeb7d3",
                "rendering": "number",
                "max": "1",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(onArt) && onArt === 'a899b35c-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "Patient on ARVs. Please provide morisky adherence history."
                }
              ],
              "hide": {
                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Are you sometimes not keen about taking your medications? (0=No, 1=Yes)",
              "id": "notKeen",
              "questionOptions": {
                "concept": "26b3c8c9-20be-4585-98f7-c8b8bf2c9207",
                "rendering": "number",
                "max": "1",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(onArt) && onArt === 'a899b35c-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "Patient on ARVs. Please provide morisky adherence history."
                }
              ],
              "hide": {
                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Do you stop taking medicine at times when you feel worse? (0=No, 1=Yes)",
              "id": "feelWorse",
              "questionOptions": {
                "concept": "ccffa130-12c6-45e8-a24a-b16c0395abd5",
                "rendering": "number",
                "max": "1",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(onArt) && onArt === 'a899b35c-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "Patient on ARVs. Please provide morisky adherence history."
                }
              ],
              "hide": {
                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "If you feel better, do you sometimes stop taking your medicine? (0=No, 1=Yes)",
              "id": "feelBetter",
              "questionOptions": {
                "concept": "f9eb1023-4cd7-47a7-87cd-b3353824c2c7",
                "rendering": "number",
                "max": "1",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(onArt) && onArt === 'a899b35c-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "Patient on ARVs. Please provide morisky adherence history."
                }
              ],
              "hide": {
                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Morisky 4 total score:",
              "id": "moriskyScore4",
              "questionOptions": {
                "concept": "315472dc-2b5e-4add-b3b7-bbcf21a8959b",
                "rendering": "number",
                "max": "4",
                "min": "0",
                "calculate": {
                  "calculateExpression": "isNaN(parseFloat(feelBetter)+ parseFloat(feelWorse)+ parseFloat(notKeen)+ parseFloat(forget)) ? undefined: (parseFloat(feelBetter)+ parseFloat(feelWorse)+ parseFloat(notKeen)+ parseFloat(forget))"
                }
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Did you forget to take your medicine yesterday? (0=No, 1=Yes)",
              "id": "medicineYesterday",
              "questionOptions": {
                "concept": "2860acd4-2391-4467-9e69-e848d1672f96",
                "rendering": "number",
                "max": "1",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(moriskyScore4) && moriskyScore4 >=3 && isEmpty(myValue)",
                  "message": "Patient on ARVs. Please provide morisky adherence history."
                }
              ],
              "hide": {
                "hideWhenExpression": "isEmpty(moriskyScore4) || moriskyScore4 <3"
              }
            },
            {
              "label": "Do you sometimes stop taking medicine if you feel like your symptoms are under control? (0=No, 1=Yes)",
              "id": "symptomControl",
              "questionOptions": {
                "concept": "8fcb3ada-2188-4e0a-8c68-18c26fd123b2",
                "rendering": "number",
                "max": "1",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(moriskyScore4) && moriskyScore4 >=3 && isEmpty(myValue)",
                  "message": "Patient on ARVs. Please provide morisky adherence history."
                }
              ],
              "hide": {
                "hideWhenExpression": "isEmpty(moriskyScore4) || moriskyScore4 <3"
              }
            },
            {
              "label": "Do you ever feel under pressure about sticking to your treatment plan? (0=No, 1=Yes)",
              "id": "underPressure",
              "questionOptions": {
                "concept": "87ba16a0-6f57-4b0b-a76e-753977f1ef7f",
                "rendering": "number",
                "max": "1",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(moriskyScore4) && moriskyScore4 >=3 && isEmpty(myValue)",
                  "message": "Patient on ARVs. Please provide morisky adherence history."
                }
              ],
              "hide": {
                "hideWhenExpression": "isEmpty(moriskyScore4) || moriskyScore4 <3"
              }
            },
            {
              "label": "How often do you have difficulty remembering to take all your medication? (0=Never/Rarely, 1/4=Once in a while, 1/2=Sometimes, 3/4=Usually,1=All the time)",
              "id": "difficultyRemembering",
              "questionOptions": {
                "concept": "658523c7-77d2-4419-9633-eba789a7d64d",
                "rendering": "number",
                "max": "1",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(moriskyScore4) && moriskyScore4 >=3 && isEmpty(myValue)",
                  "message": "Patient on ARVs. Please provide morisky adherence history."
                }
              ],
              "hide": {
                "hideWhenExpression": "isEmpty(moriskyScore4) || moriskyScore4 <3"
              }
            },
            {
              "label": "Morisky 8 total score:",
              "id": "moriskyScore",
              "questionOptions": {
                "concept": "857caa4e-b566-4a43-ab78-f911c1a8a727",
                "rendering": "number",
                "max": "8",
                "min": "0",
                "calculate": {
                  "calculateExpression": "isNaN(parseFloat(difficultyRemembering) + parseFloat(underPressure) + parseFloat(symptomControl)+ parseFloat(medicineYesterday)+ parseFloat(feelBetter)+ parseFloat(feelWorse)+ parseFloat(notKeen)+ parseFloat(forget)) ? undefined: (parseFloat(difficultyRemembering) + parseFloat(underPressure) + parseFloat(symptomControl)+ parseFloat(medicineYesterday)+ parseFloat(feelBetter)+ parseFloat(feelWorse)+ parseFloat(notKeen)+ parseFloat(forget))"
                }
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "isEmpty(moriskyScore4) || moriskyScore4 <3"
              }
            },
            {
              "label": "Morisky score rating:",
              "id": "scoreMo",
              "questionOptions": {
                "concept": "",
                "rendering": "text",
                "calculate": {
                  "calculateExpression": "parseInt(moriskyScore) === 0 && parseFloat(moriskyScore) <= 0.25 ? 'Good' : parseFloat(moriskyScore) >=0.5 && parseInt(moriskyScore) <= 2 ? 'Inadequate' : parseInt(moriskyScore) >= 3 && parseInt(moriskyScore) <= 8 ? 'Poor' : 'Unknown'"
                }
              },
              "type": "control",
              "validators": [],
              "hide": {
                "hideWhenExpression": "isEmpty(moriskyScore4) || moriskyScore4 <3"
              }
            }
          ]
        },
        {
          "label": "Enhanced Adherence",
          "questions": [
            {
              "label": "Has a home visit been done?",
              "id": "homeVisit",
              "questionOptions": {
                "concept": "fe6800a2-76f1-42a4-a1c8-553e1fec18e9",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },

            {
              "label": "What are the support structures in place?",
              "id": "supportStructures",
              "questionOptions": {
                "concept": "a7958e13-c78c-4085-9fdf-b475d602b2b8",
                "answers": [
                  {
                    "concept": "01b957da-23bb-4862-819d-036364fe3faf",
                    "label": "Treatment supporter"
                  },
                  {
                    "concept": "a89e2df6-1350-11df-a1f1-0026b9348838",
                    "label": "Support group"
                  },
                  {
                    "concept": "a89cd280-1350-11df-a1f1-0026b9348838",
                    "label": "Caregiver"
                  },
                  {
                    "concept": "a8b03bb8-1350-11df-a1f1-0026b9348838",
                    "label": "Family"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "Has directly observed treatment (DOT) been done?",
              "id": "priorDotDone",
              "questionOptions": {
                "concept": "4b3c4263-9f86-4f3c-985b-1a71e2a57495",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "Number of directly observed treatment (DOT) done:",
              "id": "dotDone",
              "questionOptions": {
                "concept": "438c22e0-fcb9-4737-b3a6-55cc1f391e0c",
                "answers": [],
                "rendering": "number",
                "min": "0"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(priorDotDone) && priorDotDone !== 'a8aaf3e2-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "DST was done. Please indicate number of DSTs done."
                }
              ],
              "hide": {
                "hideWhenExpression": "priorDotDone !== 'a899b35c-1350-11df-a1f1-0026b9348838' || onArt!== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "Likely causes of poor adherence: (Choose all tha apply)",
              "id": "poorAdherence",
              "questionOptions": {
                "concept": "a89ebbc2-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a89eba46-1350-11df-a1f1-0026b9348838",
                    "label": "Stigma"
                  },
                  {
                    "concept": "945f0a33-dd89-4ca4-9eb3-d74128a2adc8",
                    "label": "School related stigma"
                  },
                  {
                    "concept": "b858568f-c722-411d-85ca-97d46bc98b3c",
                    "label": "Home related stigma"
                  },
                  {
                    "concept": "24ff3f30-b7ff-4464-b1b3-fda5ed5714a3",
                    "label": "Improper disclosure to child"
                  },
                  {
                    "concept": "e91a0b75-133d-4aae-81c9-2b4423e48379",
                    "label": "Inadequate supervision"
                  },
                  {
                    "concept": "a89d25fa-1350-11df-a1f1-0026b9348838",
                    "label": "Child refusing to take drugs"
                  },
                  {
                    "concept": "6a377e01-fa40-4ac2-98a9-0cb09cfbea36",
                    "label": "Pill related size"
                  },
                  {
                    "concept": "1c811199-3cc1-4495-8e05-980bebb045ab",
                    "label": "Pill taste"
                  },
                  {
                    "concept": "53956fb4-d7d9-438c-addf-c5f67b2a3866",
                    "label": "Pill color"
                  },
                  {
                    "concept": "a89ecaa4-1350-11df-a1f1-0026b9348838",
                    "label": "Disclosure"
                  },
                  {
                    "concept": "a89eb8c0-1350-11df-a1f1-0026b9348838",
                    "label": "Side effects"
                  },
                  {
                    "concept": "a89ced88-1350-11df-a1f1-0026b9348838",
                    "label": "Alcohol"
                  },
                  {
                    "concept": "a89ebb04-1350-11df-a1f1-0026b9348838",
                    "label": "Other drugs"
                  },
                  {
                    "concept": "a890b810-1350-11df-a1f1-0026b9348838",
                    "label": "Mental health issues"
                  },
                  {
                    "concept": "a8935fde-1350-11df-a1f1-0026b9348838",
                    "label": "Depression"
                  },
                  {
                    "concept": "abf95bf2-c481-490f-9e9f-84fa2d7b2f8c",
                    "label": "Caregiver changes"
                  },
                  {
                    "concept": "a89e3396-1350-11df-a1f1-0026b9348838",
                    "label": "Religious beliefs"
                  },
                  {
                    "concept": "b5c3006f-97fd-466f-b4ab-596e23ddc4d9",
                    "label": "Inadequate treatment preparation"
                  },
                  {
                    "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                    "label": "Other"
                  }
                ],
                "rendering": "multiCheckbox"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "type": "obsGroup",
              "label": "Poor adherence",
              "questionOptions": {
                "concept": "04edb08f-d1fd-43ac-98b1-adc5e7d73ba1",
                "rendering": "group"
              },
              "questions": [
                {
                  "label": "If other causes of poor adherence, explain:",
                  "id": "otherCausesSpecify",
                  "questionOptions": {
                    "concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
                    "answers": [],
                    "rendering": "text"
                  },
                  "type": "obs",
                  "validators": [
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "!isEmpty(poorAdherence) && poorAdherence !== 'a8aaf3e2-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                      "message": "Other selected as cause of poor adherence. Please indicate the cause."
                    }
                  ],
                  "hide": {
                    "hideWhenExpression": "isEmpty(poorAdherence) || !arrayContainsAny(['a8aaf3e2-1350-11df-a1f1-0026b9348838'], poorAdherence)"
                  }
                }
              ]
            },
            {
              "label": "Is patient enrolled in support group?",
              "id": "supportGroupEnroll",
              "questionOptions": {
                "concept": "ed1e7a5d-a9f4-4adf-a033-4e895409fafe",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "If no, wishes to enroll?",
              "id": "wishesToEnroll",
              "questionOptions": {
                "concept": "c796c49d-2e33-40c4-aadd-c5508e733c30",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(supportGroupEnroll) && supportGroupEnroll === 'a8aaf3e2-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "Patient is not enrolled in any group. Please indicate if they wish to enroll in any group."
                }
              ],
              "hide": {
                "hideWhenExpression": "supportGroupEnroll !== 'a899b42e-1350-11df-a1f1-0026b9348838' || onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "If yes, name of support group:",
              "id": "supportGroupName",
              "questionOptions": {
                "concept": "aab3dcc5-f984-45d2-b0c4-7a3ba746951b",
                "answers": [],
                "rendering": "text"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(supportGroupEnroll) && supportGroupEnroll !== 'a8aaf3e2-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "Patient is enrolled in a group. Please indicate name of the group."
                }
              ],
              "hide": {
                "hideWhenExpression": "supportGroupEnroll !== 'a899b35c-1350-11df-a1f1-0026b9348838' || onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "Has a pill count been done?",
              "id": "pillCountDone",
              "questionOptions": {
                "concept": "067e6d30-4962-46eb-9090-be55478d4afd",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "If yes, what are the findings:",
              "id": "pillCountFindings",
              "questionOptions": {
                "concept": "9bf98c27-1821-407f-9c06-5609357f3698",
                "answers": [
                  {
                    "concept": "5b1bf823-da30-4e23-a777-0d8ef93a6211",
                    "label": "Accurate"
                  },
                  {
                    "concept": "64433aeb-81fb-43a5-be42-3efce1692063",
                    "label": "Missed doses"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(pillCountDone) && pillCountDone !== 'a8aaf3e2-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "Pill count done. Indicate the findings."
                }
              ],
              "hide": {
                "hideWhenExpression": "pillCountDone !== 'a899b35c-1350-11df-a1f1-0026b9348838' || onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "Other possible causes of treatment failure:",
              "id": "treatmentFailure",
              "questionOptions": {
                "concept": "bc764345-2e57-42f5-aee9-c7d5bd012c97",
                "answers": [
                  {
                    "concept": "4a98eaa4-e5df-4e76-9b58-5191d61666eb",
                    "label": "Inadequate dosing/dose adjustments"
                  },
                  {
                    "concept": "01eedbcc-ea21-40cc-b150-fcaca5eef501",
                    "label": "Drug-drug interaction"
                  },
                  {
                    "concept": "c6f38251-5b52-489c-854e-ec2d3994a6cd",
                    "label": "Drug-food interaction"
                  },
                  {
                    "concept": "cfef32f6-2807-427e-9607-1397e8d7e347",
                    "label": "Impaired absorption (such as chronic severe diarrhea)"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "If drug causes treatment failure, indicate drug:",
              "id": "drugCausingFailure",
              "questionOptions": {
                "concept": "1682a920-c93d-4aad-b9cb-4a2b2c41ff1a",
                "rendering": "drug"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(treatmentFailure) && treatmentFailure !== 'a8aaf3e2-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "Drug was listed as causing treatment failure. Indicate the drug."
                }
              ],
              "hide": {
                "hideWhenExpression": "!arrayContains(['01eedbcc-ea21-40cc-b150-fcaca5eef501','c6f38251-5b52-489c-854e-ec2d3994a6cd'], treatmentFailure) ||onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "Does this patient have other co morbidities?",
              "id": "coMorbidities",
              "questionOptions": {
                "concept": "a8b010e8-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a8935f0c-1350-11df-a1f1-0026b9348838",
                    "label": "Convulsive disease"
                  },
                  {
                    "concept": "a890b810-1350-11df-a1f1-0026b9348838",
                    "label": "Mental health disorders"
                  },
                  {
                    "concept": "a893436e-1350-11df-a1f1-0026b9348838",
                    "label": "Diabetes"
                  },
                  {
                    "concept": "a8ad5254-1350-11df-a1f1-0026b9348838",
                    "label": "Renal disease"
                  },
                  {
                    "concept": "a8ad516e-1350-11df-a1f1-0026b9348838",
                    "label": "Liver disease"
                  },
                  {
                    "concept": "a8986880-1350-11df-a1f1-0026b9348838",
                    "label": "Hypertention"
                  },
                  {
                    "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                    "label": "None"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "Has drug sensitivity test (DST) been done?",
              "id": "dstDone",
              "questionOptions": {
                "concept": "2ae99396-0e12-463f-8968-1cba7cf24bc0",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "If DST result available, upload image:",
              "type": "obs",
              "default": "",
              "id": "dstImage",
              "questionOptions": {
                "concept": "8ec7c519-502e-46ea-8a98-181ed5a088be",
                "rendering": "file"
              },
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(dstDone) && dstDone !== 'a8aaf3e2-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                  "message": "DST was done.Please upload the image for the results."
                }
              ],
              "hide": {
                "hideWhenExpression": "dstDone !== 'a899b35c-1350-11df-a1f1-0026b9348838' || onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "Has an MDT been done?",
              "id": "mdtDone",
              "questionOptions": {
                "concept": "946dabee-3079-4dd1-9f84-1a1ab5507a26",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            },
            {
              "label": "If No, wish to refer?",
              "id": "wishRefertoMDT",
              "questionOptions": {
                "concept": "88a8c7d1-95ac-4aa4-8058-df99a3598390",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "mdtDone !== 'a899b42e-1350-11df-a1f1-0026b9348838' ||onArt!== 'a899b35c-1350-11df-a1f1-0026b9348838'||visitTypeUuid !== '6c5d74f4-943f-489a-b1c4-b2accfae92fb'"
              }
            }
          ]
        },
        {
          "label": "PCP Prophylaxis History",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Is the patient on any PCP prophylaxis?",
              "id": "pcpProphylaxisCurrent",
              "historicalExpression": "HD.getObject('prevEnc').getValue('a899e282-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a899e282-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                    "label": "None"
                  },
                  {
                    "concept": "a8989396-1350-11df-a1f1-0026b9348838",
                    "label": "Septrin"
                  },
                  {
                    "concept": "a890c9e0-1350-11df-a1f1-0026b9348838",
                    "label": "Dapsone 100mg"
                  }
                ],
                "rendering": "select"
              },
              "required": "true",
              "type": "obs",
              "validators": []
            },
            {
              "type": "obsGroup",
              "label": "PCP prophylaxis adherence:",
              "questionOptions": {
                "concept": "275eee16-c358-4f3a-ac16-e8f24659df87",
                "rendering": "group"
              },
              "questions": [
                {
                  "label": "Patient's adherence on PCP prophylaxis:",
                  "id": "pcpProphylaxisAdherence",
                  "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('115c744a-cf54-469f-bd5f-820352ffe9be')) ? undefined : HD.getObject('prevEnc').getValue('115c744a-cf54-469f-bd5f-820352ffe9be')",
                  "questionOptions": {
                    "concept": "115c744a-cf54-469f-bd5f-820352ffe9be",
                    "answers": [
                      {
                        "concept": "a8b0f882-1350-11df-a1f1-0026b9348838",
                        "label": "Good"
                      },
                      {
                        "concept": "a73d20b3-d721-4763-a362-14a0c41a6b5e",
                        "label": "Fair"
                      },
                      {
                        "concept": "fdaf8b47-ea14-4d28-80fa-e1da58a30e8b",
                        "label": "Poor"
                      }
                    ],
                    "rendering": "select"
                  },
                  "type": "obs",
                  "validators": [
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "!isEmpty(pcpProphylaxisCurrent) && arrayContains(['a8989396-1350-11df-a1f1-0026b9348838', 'a890c9e0-1350-11df-a1f1-0026b9348838'], pcpProphylaxisCurrent) && isEmpty(myValue)",
                      "message": "Patient on PCP Prophylaxis. Please provide adherence history"
                    }
                  ],
                  "hide": {
                    "hideWhenExpression": "isEmpty(pcpProphylaxisCurrent) || pcpProphylaxisCurrent === 'a899e0ac-1350-11df-a1f1-0026b9348838'"
                  }
                },
                {
                  "label": "Adherence (PCP) reasons for poor/fair:",
                  "id": "pcpAdherence",
                  "questionOptions": {
                    "concept": "a89ebbc2-1350-11df-a1f1-0026b9348838",
                    "answers": [
                      {
                        "concept": "a89ced88-1350-11df-a1f1-0026b9348838",
                        "label": "Alcohol"
                      },
                      {
                        "concept": "a8935fde-1350-11df-a1f1-0026b9348838",
                        "label": "Depression"
                      },
                      {
                        "concept": "a89eac04-1350-11df-a1f1-0026b9348838",
                        "label": "Felt well"
                      },
                      {
                        "concept": "a89eacc2-1350-11df-a1f1-0026b9348838",
                        "label": "Forgot"
                      },
                      {
                        "concept": "7211031b-0685-44bc-a5e9-5a018d0173ea",
                        "label": "Gave away"
                      },
                      {
                        "concept": "a8af4cee-1350-11df-a1f1-0026b9348838",
                        "label": "Lost/ran out of pills"
                      },
                      {
                        "concept": "ecafa614-49c5-4eba-84c7-b85b0d9e2c46",
                        "label": "Pill burden"
                      },
                      {
                        "concept": "a89eb8c0-1350-11df-a1f1-0026b9348838",
                        "label": "Side effects"
                      },
                      {
                        "concept": "a89eba46-1350-11df-a1f1-0026b9348838",
                        "label": "Stigma"
                      },
                      {
                        "concept": "c0c9eab3-46f6-453c-b29d-dc1c242317c5",
                        "label": "Stock out"
                      },
                      {
                        "concept": "a89de2d8-1350-11df-a1f1-0026b9348838",
                        "label": "Too ill"
                      },
                      {
                        "concept": "a897fdaa-1350-11df-a1f1-0026b9348838",
                        "label": "Travel problems"
                      },
                      {
                        "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                        "label": "Other"
                      }
                    ],
                    "rendering": "multiCheckbox"
                  },
                  "type": "obs",
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "isEmpty(pcpProphylaxisCurrent) || pcpProphylaxisCurrent === 'a899e0ac-1350-11df-a1f1-0026b9348838' || !arrayContains(['a73d20b3-d721-4763-a362-14a0c41a6b5e','fdaf8b47-ea14-4d28-80fa-e1da58a30e8b'], pcpProphylaxisAdherence)"
                  }
                },
                {
                  "label": "Adherence (PCP): Other (specify):",
                  "questionOptions": {
                    "concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
                    "rendering": "text"
                  },
                  "type": "obs",
                  "id": "pcpOtherAdherence",
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "isEmpty(pcpProphylaxisCurrent) || pcpProphylaxisCurrent === 'a899e0ac-1350-11df-a1f1-0026b9348838' || !arrayContains(['a73d20b3-d721-4763-a362-14a0c41a6b5e','fdaf8b47-ea14-4d28-80fa-e1da58a30e8b'], pcpProphylaxisAdherence)"
                  }
                }
              ]
            }
          ]
        },
        {
          "label": "TB Prophylaxis History",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Is the patient on any TB prophylaxis?",
              "type": "obs",
              "required": "true",
              "id": "onTbProphylaxis",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('163784d2-6c55-4ceb-abf0-df8cebb385f1')) ? undefined : HD.getObject('prevEnc').getValue('163784d2-6c55-4ceb-abf0-df8cebb385f1')",
              "questionOptions": {
                "concept": "163784d2-6c55-4ceb-abf0-df8cebb385f1",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "validators": []
            },
            {
              "label": "If yes select drug",
              "type": "obs",
              "id": "onTbProphylaxisDrug",
              "historicalExpression": "HD.getObject('prevEnc').getValue('a899e35e-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a899e35e-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "162724df-5a66-4ae3-bbf6-5dc6dbba4ebb",
                    "label": "Isoniazid 100mg"
                  },
                  {
                    "concept": "b150ccdc-e7ec-4f99-b592-6f3fa73b3aea",
                    "label": "Isoniazid 300mg"
                  }
                ],
                "rendering": "select"
              },
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && !isEmpty(onTbProphylaxis) && onTbProphylaxis === 'a899b35c-1350-11df-a1f1-0026b9348838'",
                  "message": "Patient  marked as on TB Prophylaxis. Please provide the drug."
                }
              ],
              "hide": {
                "hideWhenExpression": "onTbProphylaxis !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "TB prophylaxis adherence",
              "type": "obsGroup",
              "questionOptions": {
                "concept": "3a69cfcf-f129-4702-a8dd-d061d2a16b9d",
                "rendering": "group"
              },
              "questions": [
                {
                  "label": "Patient's adherence on TB prophylaxis:",
                  "id": "adherenceOnTbProphy",
                  "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('3a69cfcf-f129-4702-a8dd-d061d2a16b9d','ebfdb93a-9292-4245-9a27-0faf49545720')) ? undefined : HD.getObject('prevEnc').getValue('3a69cfcf-f129-4702-a8dd-d061d2a16b9d','ebfdb93a-9292-4245-9a27-0faf49545720')",
                  "questionOptions": {
                    "concept": "ebfdb93a-9292-4245-9a27-0faf49545720",
                    "answers": [
                      {
                        "concept": "a8b0f882-1350-11df-a1f1-0026b9348838",
                        "label": "Good"
                      },
                      {
                        "concept": "a73d20b3-d721-4763-a362-14a0c41a6b5e",
                        "label": "Fair"
                      },
                      {
                        "concept": "fdaf8b47-ea14-4d28-80fa-e1da58a30e8b",
                        "label": "Poor"
                      }
                    ],
                    "rendering": "select"
                  },
                  "type": "obs",
                  "validators": [
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "!isEmpty(onTbProphylaxis) && arrayContains(['a899b35c-1350-11df-a1f1-0026b9348838'], onTbProphylaxis) && isEmpty(myValue)",
                      "message": "Patient on TB Prophylaxis. Please provide adherence history."
                    }
                  ],
                  "hide": {
                    "hideWhenExpression": "isEmpty(onTbProphylaxis)|| onTbProphylaxis !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
                  }
                },
                {
                  "label": "Adherence (TB Prophylaxis) reasons for poor/fair:",
                  "id": "tbProphylaxisAdherence",
                  "questionOptions": {
                    "concept": "a89ebbc2-1350-11df-a1f1-0026b9348838",
                    "answers": [
                      {
                        "concept": "a89ced88-1350-11df-a1f1-0026b9348838",
                        "label": "Alcohol"
                      },
                      {
                        "concept": "a8935fde-1350-11df-a1f1-0026b9348838",
                        "label": "Depression"
                      },
                      {
                        "concept": "a89eac04-1350-11df-a1f1-0026b9348838",
                        "label": "Felt well"
                      },
                      {
                        "concept": "a89eacc2-1350-11df-a1f1-0026b9348838",
                        "label": "Forgot"
                      },
                      {
                        "concept": "7211031b-0685-44bc-a5e9-5a018d0173ea",
                        "label": "Gave away"
                      },
                      {
                        "concept": "a8af4cee-1350-11df-a1f1-0026b9348838",
                        "label": "Lost/Ran out of pills"
                      },
                      {
                        "concept": "ecafa614-49c5-4eba-84c7-b85b0d9e2c46",
                        "label": "Pill burden"
                      },
                      {
                        "concept": "a89eb8c0-1350-11df-a1f1-0026b9348838",
                        "label": "Side effects"
                      },
                      {
                        "concept": "a89eba46-1350-11df-a1f1-0026b9348838",
                        "label": "Stigma"
                      },
                      {
                        "concept": "c0c9eab3-46f6-453c-b29d-dc1c242317c5",
                        "label": "Stock out"
                      },
                      {
                        "concept": "a89de2d8-1350-11df-a1f1-0026b9348838",
                        "label": "Too ill"
                      },
                      {
                        "concept": "a897fdaa-1350-11df-a1f1-0026b9348838",
                        "label": "Travel problems"
                      },
                      {
                        "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                        "label": "Other"
                      }
                    ],
                    "rendering": "multiCheckbox"
                  },
                  "type": "obs",
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "isEmpty(onTbProphylaxis) || onTbProphylaxis !== 'a899b35c-1350-11df-a1f1-0026b9348838' || !arrayContains(['a73d20b3-d721-4763-a362-14a0c41a6b5e','fdaf8b47-ea14-4d28-80fa-e1da58a30e8b'], adherenceOnTbProphy)"
                  }
                },
                {
                  "label": "Adherence (TB Prophylaxis): Other (specify):",
                  "questionOptions": {
                    "concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
                    "rendering": "text"
                  },
                  "type": "obs",
                  "id": "tbProphylaxisOtherAdherence",
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "isEmpty(onTbProphylaxis) || onTbProphylaxis !== 'a899b35c-1350-11df-a1f1-0026b9348838' || !arrayContains(['a73d20b3-d721-4763-a362-14a0c41a6b5e','fdaf8b47-ea14-4d28-80fa-e1da58a30e8b'], adherenceOnTbProphy)"
                  }
                }
              ]
            }
          ]
        },
        {
          "label": "Tuberculosis History",
          "isExpanded": "true",
          "questions": [
            {
              "id": "onTbTreatment",
              "required": "true",
              "label": "Is patient on TB treatment?",
              "historicalExpression": "HD.getObject('prevEnc').getValue('a8afcc82-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a8afcc82-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                    "label": "Yes"
                  },
                  {
                    "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                    "label": "No"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs"
            },
            {
              "label": "Start date of TB treatment:",
              "id": "startDateOfTbTreatment",
              "historicalExpression": "HD.getObject('prevEnc').getValue('a8afdb8c-1350-11df-a1f1-0026b9348838.a899e5f2-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a899e5f2-1350-11df-a1f1-0026b9348838",
                "rendering": "date"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "date"
                },
                {
                  "type": "js_expression",
                  "failsWhenExpression": "!isEmpty(onTbTreatment) && arrayContains(['a899b35c-1350-11df-a1f1-0026b9348838'], onTbTreatment) && isEmpty(myValue)",
                  "message": "You indicated patient on tb treatment, indicate start date."
                },
                {
                  "type": "js_expression",
                  "failsWhenExpression": "(isEmpty(onTbTreatment) || !arrayContains(['a899b35c-1350-11df-a1f1-0026b9348838'], onTbTreatment)) && !isEmpty(myValue)",
                  "message": "You indicated patient is not on tb treatment, therefore start date should not be indicated."
                }
              ],
              "hide": {
                "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "Tuberculosis treatment phase:",
              "type": "obs",
              "id": "tbPhase",
              "questionOptions": {
                "concept": "a8afdf4c-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a8afdd08-1350-11df-a1f1-0026b9348838",
                    "label": "Continuation phase"
                  },
                  {
                    "concept": "a8afddc6-1350-11df-a1f1-0026b9348838",
                    "label": "Retreatment phase"
                  },
                  {
                    "concept": "a8afdc4a-1350-11df-a1f1-0026b9348838",
                    "label": "Induction phase"
                  },
                  {
                    "concept": "a8afde8e-1350-11df-a1f1-0026b9348838",
                    "label": "Retreated phase"
                  },
                  {
                    "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                    "label": "Other"
                  }
                ],
                "rendering": "select"
              },
              "hide": {
                "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "type": "obsGroup",
              "label": "Current TB regimen",
              "questionOptions": {
                "concept": "a8afdb8c-1350-11df-a1f1-0026b9348838",
                "rendering": "repeating"
              },
              "questions": [
                {
                  "label": "Current TB regimen:",
                  "type": "obs",
                  "id": "tb_current",
                  "questionOptions": {
                    "concept": "a899e444-1350-11df-a1f1-0026b9348838",
                    "answers": [
                      {
                        "concept": "a899f51a-1350-11df-a1f1-0026b9348838",
                        "label": "RHZE"
                      },
                      {
                        "concept": "a897d1a4-1350-11df-a1f1-0026b9348838",
                        "label": "RHZ"
                      },
                      {
                        "concept": "a8a382ba-1350-11df-a1f1-0026b9348838",
                        "label": "RHE"
                      },
                      {
                        "concept": "a89b1ca6-1350-11df-a1f1-0026b9348838",
                        "label": "RH"
                      },
                      {
                        "concept": "a899e19c-1350-11df-a1f1-0026b9348838",
                        "label": "EH"
                      },
                      {
                        "concept": "a8971c64-1350-11df-a1f1-0026b9348838",
                        "label": "Ethambutol"
                      },
                      {
                        "concept": "a8a3243c-1350-11df-a1f1-0026b9348838",
                        "label": "MDR drugs"
                      },
                      {
                        "concept": "a896cc00-1350-11df-a1f1-0026b9348838",
                        "label": "INH"
                      },
                      {
                        "concept": "a8ac5f2a-1350-11df-a1f1-0026b9348838",
                        "label": "Pyrazinamide"
                      },
                      {
                        "concept": "a8952e4a-1350-11df-a1f1-0026b9348838",
                        "label": "Streptomycin"
                      },
                      {
                        "concept": "b8aa06ca-93c6-40ea-b144-c74f841926f4",
                        "label": "Rifabutin"
                      },
                      {
                        "concept": "a897d0be-1350-11df-a1f1-0026b9348838",
                        "label": "Rifampicin"
                      },
                      {
                        "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                        "label": "Other"
                      }
                    ],
                    "rendering": "select"
                  },
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
                  }
                },
                {
                  "label": "tabs/day:",
                  "questionOptions": {
                    "concept": "a8a07386-1350-11df-a1f1-0026b9348838",
                    "max": "30",
                    "min": "0",
                    "rendering": "number"
                  },
                  "type": "obs",
                  "hide": {
                    "field": "tb_current",
                    "value": [
                      "a899f51a-1350-11df-a1f1-0026b9348838",
                      "a897d1a4-1350-11df-a1f1-0026b9348838",
                      "a8a382ba-1350-11df-a1f1-0026b9348838"
                    ]
                  }
                },
                {
                  "label": "mg:",
                  "questionOptions": {
                    "concept": "a8a063c8-1350-11df-a1f1-0026b9348838",
                    "max": "2000",
                    "min": "0",
                    "rendering": "number"
                  },
                  "type": "obs",
                  "hide": {
                    "field": "tb_current",
                    "value": [
                      "a899e19c-1350-11df-a1f1-0026b9348838",
                      "a8ac5f2a-1350-11df-a1f1-0026b9348838",
                      "a8952e4a-1350-11df-a1f1-0026b9348838"
                    ]
                  }
                },
                {
                  "label": "mg/day:",
                  "questionOptions": {
                    "concept": "a8a0744e-1350-11df-a1f1-0026b9348838",
                    "max": "2000",
                    "min": "0",
                    "rendering": "number"
                  },
                  "type": "obs",
                  "hide": {
                    "field": "tb_current",
                    "value": [
                      "a896cc00-1350-11df-a1f1-0026b9348838",
                      "a8971c64-1350-11df-a1f1-0026b9348838"
                    ]
                  }
                },
                {
                  "label": "tabs:",
                  "questionOptions": {
                    "concept": "a8a0630a-1350-11df-a1f1-0026b9348838",
                    "max": "180",
                    "min": "0",
                    "rendering": "number"
                  },
                  "type": "obs",
                  "hide": {
                    "field": "tb_current",
                    "value": ["b8aa06ca-93c6-40ea-b144-c74f841926f4"]
                  }
                }
              ]
            },
            {
              "label": "TB treatment completion date:",
              "type": "obs",
              "id": "tbComplDate",
              "questionOptions": {
                "concept": "a8a176b4-1350-11df-a1f1-0026b9348838",
                "rendering": "date"
              },
              "hide": {
                "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "TB treatment defaulted year:",
              "type": "obs",
              "id": "tbDefaultDate",
              "questionOptions": {
                "concept": "a8a18758-1350-11df-a1f1-0026b9348838",
                "rendering": "number"
              },
              "hide": {
                "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "type": "obsGroup",
              "id": "tbadhere",
              "label": "Patient adherence to TB medications",
              "questionOptions": {
                "concept": "2a4b87dd-977d-4ce8-a321-1f13df4a31b2",
                "rendering": "group"
              },
              "questions": [
                {
                  "label": "Patient adherence to TB medications:",
                  "id": "tb_adherence",
                  "questionOptions": {
                    "concept": "479decbd-e964-41c3-9576-98b39089ebd3",
                    "answers": [
                      {
                        "concept": "a8b0f882-1350-11df-a1f1-0026b9348838",
                        "label": "Good"
                      },
                      {
                        "concept": "a73d20b3-d721-4763-a362-14a0c41a6b5e",
                        "label": "Fair"
                      },
                      {
                        "concept": "fdaf8b47-ea14-4d28-80fa-e1da58a30e8b",
                        "label": "Poor"
                      }
                    ],
                    "rendering": "select"
                  },
                  "type": "obs",
                  "validators": [
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "!isEmpty(onTbTreatment) && onTbTreatment === 'a899b35c-1350-11df-a1f1-0026b9348838' && isEmpty(myValue)",
                      "message": "Patient on TB Treament. Please provide adherence history."
                    }
                  ],
                  "hide": {
                    "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
                  }
                },
                {
                  "label": "Adherence (TB Treatment) reasons for poor/fair:",
                  "id": "adherenceTbTreatment",
                  "questionOptions": {
                    "concept": "a89ebbc2-1350-11df-a1f1-0026b9348838",
                    "answers": [
                      {
                        "concept": "a89ced88-1350-11df-a1f1-0026b9348838",
                        "label": "Alcohol"
                      },
                      {
                        "concept": "a8935fde-1350-11df-a1f1-0026b9348838",
                        "label": "Depression"
                      },
                      {
                        "concept": "a89eac04-1350-11df-a1f1-0026b9348838",
                        "label": "Felt well"
                      },
                      {
                        "concept": "a89eacc2-1350-11df-a1f1-0026b9348838",
                        "label": "Forgot"
                      },
                      {
                        "concept": "7211031b-0685-44bc-a5e9-5a018d0173ea",
                        "label": "Gave away"
                      },
                      {
                        "concept": "a8af4cee-1350-11df-a1f1-0026b9348838",
                        "label": "Lost/Ran out of pills"
                      },
                      {
                        "concept": "ecafa614-49c5-4eba-84c7-b85b0d9e2c46",
                        "label": "Pill burden"
                      },
                      {
                        "concept": "a89eb8c0-1350-11df-a1f1-0026b9348838",
                        "label": "Side effects"
                      },
                      {
                        "concept": "a89eba46-1350-11df-a1f1-0026b9348838",
                        "label": "Stigma"
                      },
                      {
                        "concept": "c0c9eab3-46f6-453c-b29d-dc1c242317c5",
                        "label": "Stock out"
                      },
                      {
                        "concept": "a89de2d8-1350-11df-a1f1-0026b9348838",
                        "label": "Too ill"
                      },
                      {
                        "concept": "a897fdaa-1350-11df-a1f1-0026b9348838",
                        "label": "Travel problems"
                      },
                      {
                        "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                        "label": "Other"
                      }
                    ],
                    "rendering": "multiCheckbox"
                  },
                  "type": "obs",
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838' || !arrayContains(['a73d20b3-d721-4763-a362-14a0c41a6b5e','fdaf8b47-ea14-4d28-80fa-e1da58a30e8b'], tb_adherence)"
                  }
                },
                {
                  "label": "Adherence (TB Treatment): Other (specify):",
                  "questionOptions": {
                    "concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
                    "rendering": "text"
                  },
                  "type": "obs",
                  "id": "adherenceTbOther",
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838' || !arrayContains(['a73d20b3-d721-4763-a362-14a0c41a6b5e','fdaf8b47-ea14-4d28-80fa-e1da58a30e8b'], tb_adherence)"
                  }
                }
              ]
            }
          ]
        },
        {
          "label": "Cryptococcal Secondary Prevention",
          "questions": [
            {
              "label": "Cryptococcus Tx:",
              "id": "cryptCurrent",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a899e516-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('a899e516-1350-11df-a1f1-0026b9348838')",
              "questionOptions": {
                "concept": "a899e516-1350-11df-a1f1-0026b9348838",
                "answers": [
                  {
                    "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                    "label": "None"
                  },
                  {
                    "concept": "a8971e12-1350-11df-a1f1-0026b9348838",
                    "label": "Fluconazole 400mg"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": []
            }
          ]
        },
        {
          "label": "Other Medications",
          "questions": [
            {
              "label": "Please add any other medications the patient is taking",
              "type": "obsGroup",
              "questionOptions": {
                "concept": "a8a072c8-1350-11df-a1f1-0026b9348838",
                "rendering": "repeating"
              },
              "questions": [
                {
                  "label": "Other drugs:",
                  "questionOptions": {
                    "concept": "a8a060c6-1350-11df-a1f1-0026b9348838",
                    "rendering": "drug"
                  },
                  "type": "obs",
                  "validators": []
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "label": "Med Side Effects",
      "sections": [
        {
          "label": "Side Effects/Toxicity",
          "questions": [
            {
              "type": "obsGroup",
              "label": "Side effects",
              "id": "sideEff",
              "questionOptions": {
                "concept": "a8a072c8-1350-11df-a1f1-0026b9348838",
                "rendering": "group"
              },
              "questions": [
                {
                  "label": "Any side effects attributable to any drug that the patient is currently taking:",
                  "id": "currSideEffect",
                  "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('30fc0cea-b6c7-48cc-bbfb-4eb53170ce41')) ? undefined : HD.getObject('prevEnc').getValue('30fc0cea-b6c7-48cc-bbfb-4eb53170ce41')",
                  "questionOptions": {
                    "concept": "30fc0cea-b6c7-48cc-bbfb-4eb53170ce41",
                    "answers": [
                      {
                        "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                        "label": "Yes"
                      },
                      {
                        "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                        "label": "No"
                      }
                    ],
                    "rendering": "select"
                  },
                  "type": "obs",
                  "validators": [
                    {
                      "type": "js_expression",
                      "failsWhenExpression": "!isEmpty(current_art_regimen_adult) && isEmpty(myValue) && arrayContains(current_art_regimen_adult, '98b0baf6-0b73-4429-9264-6233684b0969')",
                      "message": "Patient is on DTG. Kindly fill the side effects."
                    }
                  ]
                }
              ]
            },
            {
              "type": "obsGroup",
              "questionOptions": {
                "rendering": "repeating",
                "concept": "a8a072c8-1350-11df-a1f1-0026b9348838"
              },
              "label": "If yes drugs suspected to be causing side effects",
              "questions": [
                {
                  "label": "Drug:",
                  "id": "sideEffectDrug",
                  "questionOptions": {
                    "concept": "1682a920-c93d-4aad-b9cb-4a2b2c41ff1a",
                    "rendering": "drug"
                  },
                  "type": "obs",
                  "validators": [],
                  "hide": {
                    "hideWhenExpression": "currSideEffect !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
                  }
                }
              ]
            },
            {
              "label": "If yes, tick all that apply:",
              "id": "sideEffectype",
              "questionOptions": {
                "concept": "c2ecd5f7-4b47-47ae-b706-3dc5ed98b4db",
                "answers": [
                  {
                    "concept": "a877c7f6-1350-11df-a1f1-0026b9348838",
                    "label": "Anaemia"
                  },
                  {
                    "concept": "a8909060-1350-11df-a1f1-0026b9348838",
                    "label": "Hepatitis"
                  },
                  {
                    "concept": "a89d0c0a-1350-11df-a1f1-0026b9348838",
                    "label": "IRIS"
                  },
                  {
                    "concept": "a8a01dfa-1350-11df-a1f1-0026b9348838",
                    "label": "Lactic acidosis"
                  },
                  {
                    "concept": "a89cee50-1350-11df-a1f1-0026b9348838",
                    "label": "Lipo-dystrophy"
                  },
                  {
                    "concept": "a897fe86-1350-11df-a1f1-0026b9348838",
                    "label": "Neuropathy"
                  },
                  {
                    "concept": "a8ad239c-1350-11df-a1f1-0026b9348838",
                    "label": "Persistent vomiting"
                  },
                  {
                    "concept": "a895776a-1350-11df-a1f1-0026b9348838",
                    "label": "Rash"
                  },
                  {
                    "concept": "a8a16d0e-1350-11df-a1f1-0026b9348838",
                    "label": "Steven-Johnson syndrome"
                  },
                  {
                    "concept": "a8ad21e4-1350-11df-a1f1-0026b9348838",
                    "label": "Nausea"
                  },
                  {
                    "concept": "a894b604-1350-11df-a1f1-0026b9348838",
                    "label": "Burning sensation"
                  },
                  {
                    "concept": "a890861a-1350-11df-a1f1-0026b9348838",
                    "label": "Diarrhea"
                  },
                  {
                    "concept": "a8966d1e-1350-11df-a1f1-0026b9348838",
                    "label": "Headache"
                  },
                  {
                    "concept": "a8ad042a-1350-11df-a1f1-0026b9348838",
                    "label": "Fatigue"
                  },
                  {
                    "concept": "a89366a0-1350-11df-a1f1-0026b9348838",
                    "label": "Jaundice"
                  },
                  {
                    "concept": "a89836ee-1350-11df-a1f1-0026b9348838",
                    "label": "Dizzy"
                  },
                  {
                    "concept": "a8932f00-1350-11df-a1f1-0026b9348838",
                    "label": "Abdominal pain"
                  },
                  {
                    "concept": "a89cec02-1350-11df-a1f1-0026b9348838",
                    "label": "Anxiety"
                  },
                  {
                    "concept": "c80dcaad-ea61-4b88-b1f7-c091d706c7de",
                    "label": "Nightmare"
                  },
                  {
                    "concept": "a8935fde-1350-11df-a1f1-0026b9348838",
                    "label": "Depression"
                  },
                  {
                    "concept": "a8ad3b02-1350-11df-a1f1-0026b9348838",
                    "label": "Confusion/abnormal thinking"
                  },
                  {
                    "concept": "a8982de8-1350-11df-a1f1-0026b9348838",
                    "label": "Insomnia"
                  },
                  {
                    "concept": "a8ae7ecc-1350-11df-a1f1-0026b9348838",
                    "label": "Poor concentration/ memory problems"
                  },
                  {
                    "concept": "a8ad392c-1350-11df-a1f1-0026b9348838",
                    "label": "Paresthesia/painful neuropathy"
                  },
                  {
                    "concept": "f5b8f79a-5460-49a5-983e-78cc203673da",
                    "label": "Suicide ideation"
                  },
                  {
                    "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                    "label": "Other"
                  }
                ],
                "rendering": "multiCheckbox"
              },
              "type": "obs",
              "validators": [
                {
                  "type": "js_expression",
                  "failsWhenExpression": "isEmpty(myValue) && !isEmpty(currSideEffect) && currSideEffect === 'a899b35c-1350-11df-a1f1-0026b9348838'",
                  "message": "Patient  marked as having side effects. Please provide list."
                }
              ],
              "hide": {
                "hideWhenExpression": "currSideEffect !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "id": "reaction",
              "label": "Severity of the reaction:",
              "questionOptions": {
                "concept": "6c1b293c-4d8c-470f-9991-93cdde1274ff",
                "answers": [
                  {
                    "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                    "label": "None"
                  },
                  {
                    "concept": "a89efccc-1350-11df-a1f1-0026b9348838",
                    "label": "Mild"
                  },
                  {
                    "concept": "a89efdee-1350-11df-a1f1-0026b9348838",
                    "label": "Moderate"
                  },
                  {
                    "concept": "a89eff1a-1350-11df-a1f1-0026b9348838",
                    "label": "Severe"
                  },
                  {
                    "concept": "a899b50a-1350-11df-a1f1-0026b9348838",
                    "label": "Unknown"
                  },
                  {
                    "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                    "label": "Other"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "currSideEffect !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "id": "action",
              "label": "Action plan:",
              "questionOptions": {
                "concept": "01fb96f5-8dc5-4481-8a11-240994b3b795",
                "answers": [
                  {
                    "concept": "b5b9663c-9568-4f48-b70f-34c63b21bce4",
                    "label": "Stopped drugs"
                  },
                  {
                    "concept": "a8a00158-1350-11df-a1f1-0026b9348838",
                    "label": "Substitute drugs"
                  },
                  {
                    "concept": "a8a07bce-1350-11df-a1f1-0026b9348838",
                    "label": "Change drugs"
                  },
                  {
                    "concept": "a89b7c50-1350-11df-a1f1-0026b9348838",
                    "label": "Switched drugs"
                  },
                  {
                    "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                    "label": "Other"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "currSideEffect !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            },
            {
              "label": "How certain are you the drug(s) is/are the cause of the reaction?",
              "id": "certainityOfReaction",
              "questionOptions": {
                "concept": "d0efbf5b-cbfc-48fc-a857-c0ca4d70f077",
                "answers": [
                  {
                    "concept": "45eb8953-dc14-4c2e-8ce6-12cdf7da280a",
                    "label": "Certain"
                  },
                  {
                    "concept": "07e9e14e-a718-4a9e-9479-1de79e1f614a",
                    "label": "Probable/likely"
                  },
                  {
                    "concept": "260e6d24-1634-4467-a070-e8359f6827f7",
                    "label": "Possible"
                  },
                  {
                    "concept": "66b46c63-7e75-4b1d-918a-1e17348c62f7",
                    "label": "Unlikely"
                  },
                  {
                    "concept": "b1055e84-0e97-483a-ae8a-3f2dee84a623",
                    "label": "Conditional/unclassified"
                  },
                  {
                    "concept": "80d03d9f-2510-4a95-b9d6-2613aaeebd21",
                    "label": "Unassessable/unclassified"
                  }
                ],
                "rendering": "select"
              },
              "type": "obs",
              "validators": [],
              "hide": {
                "hideWhenExpression": "currSideEffect !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
              }
            }
          ]
        }
      ]
    },
    {
      "label": "Nutrition",
      "sections": [
        {
          "label": "Nutrition Assessment and Diagnosis",
          "questions": [
            {
              "label": "Nutrition status:",
              "id": "nutritionStatus",
              "questionOptions": {
                "rendering": "select",
                "concept": "ac5f7974-3a71-4867-af59-0c30d68ce9d8",
                "answers": [
                  {
                    "concept": "a899e7b4-1350-11df-a1f1-0026b9348838",
                    "label": "Normal"
                  },
                  {
                    "concept": "1505faef-c8aa-422c-b356-da065b88ec9c",
                    "label": "Overweight"
                  },
                  {
                    "concept": "2a60e784-1314-4454-91ba-7ea4cc2c3b15",
                    "label": "Obese"
                  },
                  {
                    "concept": "0306539c-f24f-49f5-b059-b646adbec47c",
                    "label": "Severe acute malnutrition"
                  },
                  {
                    "concept": "f0dd06d5-6174-447f-9a9c-f8635b4a6a6d",
                    "label": "Moderate  acute malnutrition"
                  }
                ]
              },
              "type": "obs",
              "validators": []
            }
          ]
        }
      ]
    },
    {
      "label": "Vitals",
      "sections": [
        {
          "label": "Vital Signs",
          "isExpanded": "true",
          "questions": [
            {
              "label": "BP systolic:",
              "id": "syst",
              "questionOptions": {
                "rendering": "number",
                "concept": "a8a65d5a-1350-11df-a1f1-0026b9348838",
                "max": "250",
                "min": "0"
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "BP diastolic:",
              "id": "dias",
              "questionOptions": {
                "rendering": "number",
                "concept": "a8a65e36-1350-11df-a1f1-0026b9348838",
                "max": "200",
                "min": "0"
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "Pulse (Rate/min):",
              "questionOptions": {
                "rendering": "number",
                "concept": "a8a65f12-1350-11df-a1f1-0026b9348838",
                "max": "230",
                "min": "0"
              },
              "type": "obs",
              "validators": []
            },
						{
							"label": "Temp(C):",
							"questionOptions": {
								"rendering": "decimal",
								"concept": "a8a65fee-1350-11df-a1f1-0026b9348838",
								"max": "43.00",
								"min": "25.00"
							},
							"type": "obs",
							"validators": [
								{
									"type": "decimal",
									"decimalPlace": 1
								}
							],
							"id": "temp"
						},
            {
              "label": "Weight (Kg):",
              "id": "weight",
              "questionOptions": {
                "rendering": "number",
                "concept": "a8a660ca-1350-11df-a1f1-0026b9348838",
                "max": "150",
                "min": "0"
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "Height (Cm):",
              "id": "height",
              "questionOptions": {
                "rendering": "number",
                "concept": "a8a6619c-1350-11df-a1f1-0026b9348838",
                "max": "228",
                "min": "0"
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "Sp02:",
              "questionOptions": {
                "rendering": "number",
                "concept": "a8a66354-1350-11df-a1f1-0026b9348838",
                "max": "100",
                "min": "0"
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "BMI (Kg/m2):",
              "id": "bmi",
              "questionOptions": {
                "rendering": "number",
                "concept": "a89c60c0-1350-11df-a1f1-0026b9348838",
                "max": "100",
                "min": "0",
                "calculate": {
                  "calculateExpression": "calcBMI(height,weight)"
                }
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "MUAC:",
              "id": "muac",
              "questionOptions": {
                "rendering": "number",
                "concept": "a89c6188-1350-11df-a1f1-0026b9348838",
                "max": "450",
                "min": "60"
              },
              "type": "obs",
              "validators": []
            }
          ]
        }
      ]
    },
    {
			"label": "Hospitalization",
			"sections": [
        	{
					"label": "Hospitalization History",
					"questions": [
						{
							"type": "obsGroup",
							"label": "Recent hospitalizations",
							"questionOptions": {
								"rendering": "group",
								"concept": "a8a003a6-1350-11df-a1f1-0026b9348838"
							},
							"questions": [
								{
									"label": "Was the patient hospitalized since last visit?",
									"id": "wasHospitalized",
									"questionOptions": {
										"concept": "a898c56e-1350-11df-a1f1-0026b9348838",
										"answers": [
											{
												"concept": "a899b35c-1350-11df-a1f1-0026b9348838",
												"label": "Yes"
											},
											{
												"concept": "a899b42e-1350-11df-a1f1-0026b9348838",
												"label": "No"
											}
										],
										"rendering": "select"
									},
									"type": "obs",
									"validators": []
								}
							],
							"id": "__KnxusvEvw"
						},
						{
							"type": "obsGroup",
							"label": "If yes reason for hospitalization:",
							"questionOptions": {
								"concept": "a8a003a6-1350-11df-a1f1-0026b9348838",
								"rendering": "repeating"
							},
							"questions": [
								{
									"label": "Reason for hospitalization:",
									"id": "hospReason",
									"questionOptions": {
										"concept": "a8a07a48-1350-11df-a1f1-0026b9348838",
										"rendering": "problem"
									},
									"type": "obs",
									"validators": [
										{
											"type": "conditionalAnswered",
											"message": "Providing diagnosis but didn't answer that patient was hospitalized in question",
											"referenceQuestionId": "wasHospitalized",
											"referenceQuestionAnswers": [
												"a899b35c-1350-11df-a1f1-0026b9348838"
											]
										},
										{
											"type": "js_expression",
											"failsWhenExpression": "isEmpty(myValue) && !isEmpty(wasHospitalized) && wasHospitalized === 'a899b35c-1350-11df-a1f1-0026b9348838'",
											"message": "Patient previously marked as hospitalized. Please provide hospitalization reason."
										}
									],
									"hide": {
										"hideWhenExpression": "wasHospitalized !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
									}
								}
							],
							"id": "__nqqwwJovF"
						}
					]
				},
        {
					"label": " History of Present Illness and Key Physical Exam Findings:",
					"isExpanded": "true",
					"questions": [
						{
							"label": "History of present illness and key physical exam findings",
							"type": "obs",
							"questionOptions": {
								"rendering": "textarea",
								"concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
								"rows": "5"
							},
							"id": "hkf"
						}
					]
				}
				
			]
		},
    {
			"label": "Diagnosis & Problem List",
			"sections": [
				{
					"reference": {
						"form": "component_problem-list-v.1.2",
						"page": "Problem list",
						"section": "Problem List"
					}
				}
			]
		},
		{
			"label": "Plan",
			"sections": [
				{
					"label": "Referrals",
					"isExpanded": "true",
					"questions": [
						{
							"label": "Urgent referrals",
							"type": "obs",
							"questionOptions": {
								"rendering": "select",
								"concept": "deeee215-e324-4617-aaca-12d174a02f50",
								"answers": [
									{
										"concept": "a8a8afd8-1350-11df-a1f1-0026b9348838",
										"label": "Nutritional support",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "5484"
											},
											{
												"type": "local",
												"value": "5484"
											}
										]
									},
									{
										"concept": "a8a8aefc-1350-11df-a1f1-0026b9348838",
										"label": "Family planning services",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "5483"
											},
											{
												"type": "local",
												"value": "5483"
											}
										]
									},
									{
										"concept": "a89c2f42-1350-11df-a1f1-0026b9348838",
										"label": "AMPATH",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1286"
											},
											{
												"type": "MCL/CIEL",
												"value": "1286"
											}
										]
									},
									{
										"concept": "a8a8b42e-1350-11df-a1f1-0026b9348838",
										"label": "Mental health services",
										"conceptMappings": [
											{
												"type": "local",
												"value": "5489"
											},
											{
												"type": "MCL/CIEL",
												"value": "5489"
											}
										]
									},
									{
										"concept": "a8a0660c-1350-11df-a1f1-0026b9348838",
										"label": "Dental services",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1902"
											}
										]
									},
									{
										"concept": "ab396b67-273c-4c97-9f90-f858d79b13b1",
										"label": "Another facility, nos",
										"conceptMappings": [
											{
												"type": "local",
												"value": "7308"
											}
										]
									},
									{
										"concept": "a8a06788-1350-11df-a1f1-0026b9348838",
										"label": "Ophthalmology services",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1904"
											}
										]
									},
									{
										"concept": "c65fcd72-1f3f-4450-b93f-90a87ae64d55",
										"label": "Referral to suggery",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6571"
											}
										]
									},
									{
										"concept": "a2187952-59e0-449b-895f-5102b7aed49c",
										"label": "Cardiology",
										"conceptMappings": []
									},
									{
										"concept": "bd50ac6b-75f3-4faf-8e2c-56db64fe595b",
										"label": "Orthopedic services",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "160465"
											}
										]
									},
									{
										"concept": "073ea366-834b-49bd-b4db-ce4e6c61bbc3",
										"label": "Oncology services",
										"conceptMappings": []
									},
									{
										"concept": "2394dc0b-711a-4b93-be87-27842954450b",
										"label": "Palliative cate",
										"conceptMappings": []
									},
									{
										"concept": "f3c103de-6457-4df4-b6a0-020cc933409a",
										"label": "Oncology breast cancer screening program",
										"conceptMappings": []
									},
									{
										"concept": "97eb97f5-d241-4c09-a07f-490fbfa7451e",
										"label": "Oncology ceevical cancer screening program",
										"conceptMappings": []
									},
									{
										"concept": "5c4612a6-91ba-4986-a036-4e963103e30c",
										"label": "National health insurance fund officer",
										"conceptMappings": []
									},
									{
										"concept": "0d516ea7-218f-43d4-b5c0-58d126529271",
										"label": "Dermatology clinic",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6758"
											}
										]
									},
									{
										"concept": "0fa18f9a-95c8-4ab3-81ed-a1bac69063fa",
										"label": "Diabetes management",
										"conceptMappings": [
											{
												"type": "local",
												"value": "7341"
											}
										]
									},
									{
										"concept": "a8a8b26c-1350-11df-a1f1-0026b9348838",
										"label": "Tuberculosis treatment or DOT program",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "5487"
											},
											{
												"type": "local",
												"value": "5487"
											}
										]
									}
								],
								"conceptMappings": [
									{
										"type": "local",
										"value": "7272"
									}
								]
							},
							"id": "urgentReferrals"
						},
						{
							"label": "Non Urgent Referrals",
							"type": "obs",
							"questionOptions": {
								"rendering": "select",
								"concept": "3391c26e-ab66-40bf-9080-53c770523707",
								"answers": [
									{
										"concept": "a8a8afd8-1350-11df-a1f1-0026b9348838",
										"label": "Nutritional support",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "5484"
											},
											{
												"type": "local",
												"value": "5484"
											}
										]
									},
									{
										"concept": "a8a8aefc-1350-11df-a1f1-0026b9348838",
										"label": "Family planning services",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "5483"
											},
											{
												"type": "local",
												"value": "5483"
											}
										]
									},
									{
										"concept": "a89c2f42-1350-11df-a1f1-0026b9348838",
										"label": "AMPATH",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1286"
											},
											{
												"type": "MCL/CIEL",
												"value": "1286"
											}
										]
									},
									{
										"concept": "a8a0660c-1350-11df-a1f1-0026b9348838",
										"label": "Dental services",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1902"
											}
										]
									},
									{
										"concept": "a8a06788-1350-11df-a1f1-0026b9348838",
										"label": "OPHTHALMOLOGY SERVICES",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1904"
											}
										]
									},
									{
										"concept": "c65fcd72-1f3f-4450-b93f-90a87ae64d55",
										"label": "REFERRAL TO SURGERY",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6571"
											}
										]
									},
									{
										"concept": "bd50ac6b-75f3-4faf-8e2c-56db64fe595b",
										"label": "ORTHOPEDIC SERVICES",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "160465"
											}
										]
									},
									{
										"concept": "073ea366-834b-49bd-b4db-ce4e6c61bbc3",
										"label": "ONCOLOGY SERVICES",
										"conceptMappings": []
									},
									{
										"concept": "2394dc0b-711a-4b93-be87-27842954450b",
										"label": "PALLIATIVE CARE",
										"conceptMappings": []
									},
									{
										"concept": "f3c103de-6457-4df4-b6a0-020cc933409a",
										"label": "ONCOLOGY BREAST CANCER SCREENING PROGRAM",
										"conceptMappings": []
									},
									{
										"concept": "97eb97f5-d241-4c09-a07f-490fbfa7451e",
										"label": "ONCOLOGY CERVICAL CANCER SCREENING PROGRAM",
										"conceptMappings": []
									},
									{
										"concept": "0fa18f9a-95c8-4ab3-81ed-a1bac69063fa",
										"label": "DIABETES MANAGEMENT",
										"conceptMappings": [
											{
												"type": "local",
												"value": "7341"
											}
										]
									},
									{
										"concept": "5c4612a6-91ba-4986-a036-4e963103e30c",
										"label": "NATIONAL HEALTH INSURANCE FUND OFFICER",
										"conceptMappings": []
									},
									{
										"concept": "0d516ea7-218f-43d4-b5c0-58d126529271",
										"label": "DERMATOLOGY CLINIC",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6758"
											}
										]
									},
									{
										"concept": "a8a8b26c-1350-11df-a1f1-0026b9348838",
										"label": "TUBERCULOSIS TREATMENT OR DOT PROGRAM",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "5487"
											},
											{
												"type": "local",
												"value": "5487"
											}
										]
									}
								],
								"conceptMappings": [
									{
										"type": "local",
										"value": "7278"
									}
								]
							},
							"id": "nonurgentReferrals"
						}
					]
				},
				{
					"label": "Imaging",
					"isExpanded": "true",
					"questions": [
						{
							"label": "Urgent Imaging",
							"type": "obs",
							"questionOptions": {
								"rendering": "select",
								"concept": "06bd726f-74ce-423a-8e1c-3d2f81611e6b",
								"answers": [
									{
										"concept": "e83f4f97-91eb-4858-89d8-371535c5c131",
										"label": "ULTRASOUND",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6502"
											}
										]
									},
									{
										"concept": "759a4bd6-79ab-40a9-9836-1e30783f7ae5",
										"label": "XRAY",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6897"
											}
										]
									},
									{
										"concept": "9d3f2fc1-1604-472e-ac2d-be8facc11717",
										"label": "CT SCAN",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6501"
											}
										]
									},
									{
										"concept": "5f24edf3-da0f-4990-8a43-9c6e3ca52cfe",
										"label": "MAGNETIC RESONANCE IMAGING",
										"conceptMappings": []
									}
								]
							},
							"id": "urgentImaging"
						},
						{
							"label": "Non-Urgent Imaging",
							"type": "obs",
							"questionOptions": {
								"rendering": "select",
								"concept": "3194eb11-2246-4af0-b67d-e9b29a13aaf5",
								"answers": [
									{
										"concept": "e83f4f97-91eb-4858-89d8-371535c5c131",
										"label": "ULTRASOUND",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6502"
											}
										]
									},
									{
										"concept": "759a4bd6-79ab-40a9-9836-1e30783f7ae5",
										"label": "XRAY",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6897"
											}
										]
									},
									{
										"concept": "9d3f2fc1-1604-472e-ac2d-be8facc11717",
										"label": "CT SCAN",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6501"
											}
										]
									},
									{
										"concept": "5f24edf3-da0f-4990-8a43-9c6e3ca52cfe",
										"label": "MAGNETIC RESONANCE IMAGING",
										"conceptMappings": []
									}
								]
							},
							"id": "nonUrgentImaging"
						}
					]
				},
				{
					"label": "Plan",
					"isExpanded": "true",
					"questions": [
						{
							"label": "Key Observations and Plans From This Visit",
							"type": "obs",
							"questionOptions": {
								"rendering": "textarea",
								"concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
								"rows": "",
								"conceptMappings": [
									{
										"type": "local",
										"value": "1915"
									},
									{
										"type": "MCL/CIEL",
										"value": "160632"
									}
								]
							},
							"id": "keyObservationsandPlans "
						},
						{
							"label": "Labs",
							"type": "testOrder",
							"questionOptions": {
								"rendering": "repeating",
								"concept": "a89c2268-1350-11df-a1f1-0026b9348838",
								"orderType": "testorder",
								"orderSettingUuid": "6f0c9a92-6f24-11e3-af88-005056821db0",
								"selectableOrders": [
									{
										"concept": "a898b2ea-1350-11df-a1f1-0026b9348838",
										"label": "LIVER FUNCTION TESTS",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "953"
											},
											{
												"type": "local",
												"value": "953"
											}
										]
									},
									{
										"concept": "a8af7520-1350-11df-a1f1-0026b9348838",
										"label": "GLYCOSYLATED HEMOGLOBIN",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6126"
											}
										]
									},
									{
										"concept": "a8982474-1350-11df-a1f1-0026b9348838",
										"label": "HIV VIRAL LOAD, QUANTITATIVE",
										"conceptMappings": [
											{
												"type": "local",
												"value": "856"
											},
											{
												"type": "MCL/CIEL",
												"value": "856"
											}
										]
									},
									{
										"concept": "a8999fb6-1350-11df-a1f1-0026b9348838",
										"label": "HIV ENZYME IMMUNOASSAY, QUALITATIVE",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "1042"
											},
											{
												"type": "local",
												"value": "1042"
											}
										]
									},
									{
										"concept": "a898fe80-1350-11df-a1f1-0026b9348838",
										"label": "HIV DNA POLYMERASE CHAIN REACTION, QUALITATIVE",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1030"
											},
											{
												"type": "MCL/CIEL",
												"value": "1030"
											}
										]
									},
									{
										"concept": "1b2dc83b-9abf-4494-b18e-2bfd76b5db4d",
										"label": "FULL THYROID PANEL",
										"conceptMappings": []
									},
									{
										"concept": "7129af13-e39a-43b0-9923-6d1de22c9c5e",
										"label": "MICROALBUMIN TEST, URINE",
										"conceptMappings": [
											{
												"type": "local",
												"value": "7302"
											}
										]
									},
									{
										"concept": "a898f50c-1350-11df-a1f1-0026b9348838",
										"label": "COMPLETE BLOOD COUNT",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1019"
											},
											{
												"type": "MCL/CIEL",
												"value": "1019"
											}
										]
									},
									{
										"concept": "a8909524-1350-11df-a1f1-0026b9348838",
										"label": "MALARIAL SMEAR",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "32"
											},
											{
												"type": "local",
												"value": "32"
											}
										]
									},
									{
										"concept": "9364c765-eeec-4b03-b938-ea7874560d88",
										"label": "GENEXPERT ",
										"conceptMappings": []
									},
									{
										"concept": "a8909f56-1350-11df-a1f1-0026b9348838",
										"label": "URINE PREGNANCY TEST, QUALITATIVE",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "45"
											},
											{
												"type": "local",
												"value": "45"
											}
										]
									},
									{
										"concept": "a8945d4e-1350-11df-a1f1-0026b9348838",
										"label": "SPUTUM FOR ACID FAST BACILLI",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "307"
											},
											{
												"type": "local",
												"value": "307"
											}
										]
									},
									{
										"concept": "a894590c-1350-11df-a1f1-0026b9348838",
										"label": "URINALYSIS",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "302"
											},
											{
												"type": "local",
												"value": "302"
											}
										]
									},
									{
										"concept": "a8999dfe-1350-11df-a1f1-0026b9348838",
										"label": "HIV RAPID TEST, QUALITATIVE",
										"conceptMappings": [
											{
												"type": "local",
												"value": "1040"
											},
											{
												"type": "MCL/CIEL",
												"value": "1040"
											}
										]
									},
									{
										"concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
										"label": "NONE",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "1107"
											},
											{
												"type": "local",
												"value": "1107"
											}
										]
									},
									{
										"concept": "cde31588-6c57-4260-adca-b13c3cfb82fe",
										"label": "RENAL FUNCTION BLOOD TEST",
										"conceptMappings": [
											{
												"type": "local",
												"value": "6898"
											}
										]
									},
									{
										"concept": "a898e9e0-1350-11df-a1f1-0026b9348838",
										"label": "LIPID PANEL",
										"conceptMappings": [
											{
												"type": "MCL/CIEL",
												"value": "1010"
											}
										]
									},
									{
										"concept": "00ed7062-a576-4749-9dcb-783840caddc1",
										"label": "FASTING LIPID PANEL",
										"conceptMappings": []
									}
								]
							},
							"id": "labsordered"
						}
					]
				},
				{
					"reference": {
						"form": "cdmMedicationPlan",
						"page": "Medication",
						"section": "Medication Plan",
						"excludeQuestions": [
							"peripheralNeuropathyPlan",
							"peripheralNeuropathy",
							"antipnDrugs"
						]
					}
				},
				{
					"reference": {
						"form": "otherMedicationsOrders",
						"page": "Other medication",
						"section": "Additional Medication Orders"
					}
				},
				{
					"label": "Appointment Date",
					"isExpanded": "true",
					"questions": [
						{
							"label": "Return to clinic date:",
							"type": "obs",
							"required": "true",
							"id": "rtc",
							"questionOptions": {
								"concept": "a8a666ba-1350-11df-a1f1-0026b9348838",
								"rendering": "date",
                "showHolidays": "true",
								"weeksList": [
									2,
									4,
									6,
									8,
									12,
									16,
									24,
									36
								]
							},
							"validators": [
								{
									"type": "date",
									"allowFutureDates": "true"
								},
								{
									"type": "js_expression",
									"failsWhenExpression": "(new moment(encDate)).isAfter((new moment(myValue)), 'day') || (new moment(encDate)).isSame((new moment(myValue)), 'day')",
									"message": "Return to clinic date should be greater than the encounter date."
								}
							]
						}
					]
				}
			]
		}
	]
}